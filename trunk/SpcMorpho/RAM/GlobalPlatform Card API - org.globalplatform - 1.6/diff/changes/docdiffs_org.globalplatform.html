<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<HTML>
<HEAD>
<meta name="generator" content="JDiff v1.1.1">
<!-- Generated by the JDiff Javadoc doclet -->
<!-- (http://www.jdiff.org) -->
<meta name="description" content="JDiff is a Javadoc doclet which generates an HTML report of all the packages, classes, constructors, methods, and fields which have been removed, added or changed in any way, including their documentation, when two APIs are compared.">
<meta name="keywords" content="diff, jdiff, javadiff, java diff, java difference, API difference, difference between two APIs, API diff, Javadoc, doclet">
<LINK REL="stylesheet" TYPE="text/css" HREF="../stylesheet-jdiff.css" TITLE="Style">
<TITLE>
org.globalplatform Documentation Differences
</TITLE>
</HEAD>
<BODY>
<!-- Start of nav bar -->
<TABLE summary="Navigation bar" BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
  <TABLE summary="Navigation bar" BORDER="0" CELLPADDING="0" CELLSPACING="3">
    <TR ALIGN="center" VALIGN="top">
      <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1"> <A HREF="1.6\javadoc\core\org/globalplatform/package-summary.html" target="_top"><FONT CLASS="NavBarFont1"><B><tt>GPC-CORE-API-1.6</tt></B></FONT></A>&nbsp;</TD>
      <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1"> <A HREF="changes-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
      <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1"> &nbsp;<FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
      <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1"> &nbsp;<FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
      <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1"> <A HREF="docdiffs_index.html"><FONT CLASS="NavBarFont1"><B>Text Changes</B></FONT></A>&nbsp;</TD>
      <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1"> <A HREF="jdiff_help.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
    </TR>
  </TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM><b>Generated by<br><a href="http://www.jdiff.org" class="staysblack" target="_top">JDiff</a></b></EM></TD>
</TR>
<TR>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell2"><FONT SIZE="-2">
  <B>PREV PACKAGE</B>  &nbsp;
  &nbsp;<B>NEXT PACKAGE</B>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <A HREF="../changes.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
  &nbsp;<A HREF="docdiffs_org.globalplatform.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell2">&nbsp;</TD>
</TR>
</TABLE>
<HR>
<!-- End of nav bar -->
<h2>
org.globalplatform Documentation Differences
</h2>

<blockquote>
This file contains all the changes in documentation in the package <code>org.globalplatform</code> as colored differences.
Deletions are shown <strike>like this</strike>, and
additions are shown <span style="background: #FFFF00">like this</span>.
</blockquote>
<blockquote>
If no deletions or additions are shown in an entry, the HTML tags will be what has changed. The <i>new</i> HTML tags are shown in the differences. 
If no documentation existed, and then some was added in a later version, this change is noted in the appropriate class pages of differences, but the change is not shown on this page. Only changes in existing text are shown here. 
Similarly, documentation which was inherited from another class or interface is not shown here.
</blockquote>
<blockquote>
 Note that an HTML error in the new documentation may cause the display of other documentation changes to be presented incorrectly. For instance, failure to close a &lt;code&gt; tag will cause all subsequent paragraphs to be displayed differently.
</blockquote>
<hr>

<A NAME="org.globalplatform.Application!class"></A><a href="org.globalplatform.Application.html" class="hiddenlink">Class <b>Application</b></a><br><br><blockquote>This <span style="background: #FFFF00">interface </span>defines <strike>the</strike><span style="background: #FFFF00">a method through which an Application may forward
 input data</span> <span style="background: #FFFF00">to another Application.<p>

 This </span>interface <strike>that</strike><span style="background: #FFFF00">shall</span> <strike>represents</strike><span style="background: #FFFF00">be implemented by</span> an <strike>applet method accessible through</strike><span style="background: #FFFF00">Application that wishes to</span> <strike>the</strike><span style="background: #FFFF00">receive
 personalization</span> <strike>OPEN to
 the</strike><span style="background: #FFFF00">data forwarded by</span> <strike>application's</strike><span style="background: #FFFF00">its</span> associated Security Domain. <strike>This interface</strike><span style="background: #FFFF00">In</span> <strike>must be</strike><span style="background: #FFFF00">such a
</span> <strike>implemented</strike><span style="background: #FFFF00">scenario,</span> <strike>by</strike><span style="background: #FFFF00">if</span> the <strike>Applet
</strike><span style="background: #FFFF00">Application</span> <strike>class that will</strike><span style="background: #FFFF00">implements both the</span> <strike>use</strike><A HREF="1.6\javadoc\core\org/globalplatform/Application/Application.html"><TT><span style="background: #FFFF00">Application</TT></A></span> <strike>the</strike><span style="background: #FFFF00">and the
</span> <strike>additional</strike><A HREF="1.6\javadoc\core\org/globalplatform/Application/Personalization.html"><TT><span style="background: #FFFF00">Personalization</TT></A></span> <strike>functionality</strike><span style="background: #FFFF00">interface,</span> <strike>allowing a</strike><span style="background: #FFFF00">then the</span> Security Domain <strike>to pass data</strike><span style="background: #FFFF00">shall</span> <strike>to</strike><span style="background: #FFFF00">use</span> the
 <strike>applet</strike><A HREF="1.6\javadoc\core\org/globalplatform/Application/Personalization.html"><TT><span style="background: #FFFF00">Personalization</TT></A> interface</span>.<strike>
</strike><span style="background: #FFFF00"> <p>

 @see Personalization

</span> @since export file version 1.0</blockquote>
<A NAME="org.globalplatform.Application.dmethod.processData(byte[], short, short)"></A><a href="org.globalplatform.Application.html" class="hiddenlink">Class <b>Application</b></a>, <a href="org.globalplatform.Application.html#org.globalplatform.Application.processData_changed(byte[], short, short)" class="hiddenlink">void <b>processData(byte[], short, short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Processes</span> <strike>method processes </strike>application specific data received from another <strike>entity </strike>on<strike> the </strike><span style="background: #FFFF00">-</span>card<span style="background: #FFFF00"> entity</span>.<strike>
</strike><p><span style="background: #FFFF00">

</span> If <strike>this other entity is the</strike><span style="background: #FFFF00">the Application invoking this method</span> <strike>Application's</strike><span style="background: #FFFF00">is</span> <strike>associated</strike><span style="background: #FFFF00">a</span> Security Domain<strike>,</strike> <strike>this</strike><span style="background: #FFFF00">then</span> <strike>data</strike><span style="background: #FFFF00">it shall
 be assumed that:<ul>

 <li>The <code>baBuffer</code> byte array</span> is <strike>the
</strike><span style="background: #FFFF00">a <em>global</em></span> <strike>APDU</strike><span style="background: #FFFF00">byte</span> <strike>buffer.</strike><span style="background: #FFFF00">array;</span>
 <strike>Notes:</strike>
 <li><strike>During</strike><span style="background: #FFFF00">The</span> <strike>the invocation the Java Card VM performs</strike><span style="background: #FFFF00">data forwarded by the Security Domain is</span> a <strike>context</strike><span style="background: #FFFF00">STORE</span> <strike>switch</strike><span style="background: #FFFF00">DATA command</span>.<strike>
</strike> <strike>The</strike><span style="background: #FFFF00">The
</span> <strike>application</strike><code><span style="background: #FFFF00">sOffset</code></span> <strike>is responsible for</strike><span style="background: #FFFF00">parameter locates the</span> <strike>managing</strike><span style="background: #FFFF00">class byte of the command and
 the</span> <code><span style="background: #FFFF00">sLength</code> parameter indicates </span>the <strike>atomicity</strike><span style="background: #FFFF00">length</span> of <strike>its</strike><span style="background: #FFFF00">the</span> <strike>own</strike><span style="background: #FFFF00">entire
 command (i.e. header</span> <span style="background: #FFFF00">+ </span>data<span style="background: #FFFF00"> field)</span>.<strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>As</strike><span style="background: #FFFF00">Any exception thrown by</span> this method <strike>can</strike><span style="background: #FFFF00">will</span> be <strike>invoked</strike><span style="background: #FFFF00">rethrown</span> by <strike>a Security</strike><span style="background: #FFFF00">the Security
</span> Domain<span style="background: #FFFF00">,</span> <strike>immaterial</strike><span style="background: #FFFF00">hence</span> <strike>of</strike><span style="background: #FFFF00">will be converted to and returned as a response status word
 to</span> the <strike>Application</strike><span style="background: #FFFF00">off-card</span> <strike>Life
</strike><span style="background: #FFFF00">entity.</span> <strike>Cycle</strike><span style="background: #FFFF00">If</span> <strike>State,</strike><span style="background: #FFFF00">the</span> <strike>it</strike><span style="background: #FFFF00">exception</span> is <span style="background: #FFFF00">an <A HREF="1.6\javadoc\core\ISOException.html"><TT>ISOException</TT></A>, then
 </span>the <strike>responsibility</strike><span style="background: #FFFF00">status</span> <strike>of</strike><span style="background: #FFFF00">word will be</span> the <strike>applet to ensure</strike><span style="background: #FFFF00">reason code of</span> that <strike>its</strike><span style="background: #FFFF00">exception.</span> <strike>current</strike><span style="background: #FFFF00">Otherwise,</span> <strike>Life Cycle State
 is</strike><span style="background: #FFFF00">a
 status word of</span> <strike>valid</strike><span style="background: #FFFF00">'6F00'</span> <strike>for</strike><span style="background: #FFFF00">will be returned.

 </ul>

 <p>Notes:<ul>

 <li><em>Upon invocation of</span> this <strike>operation</strike><span style="background: #FFFF00">method, the Java Card VM performs a
 context switch</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> <li><em>As the <strike>applet</strike><span style="background: #FFFF00">Application</span> is not the <span style="background: #FFFF00">currently </span>selected <strike>application</strike><span style="background: #FFFF00">Application</span>, <strike>it</strike><span style="background: #FFFF00">it
</span> should not <strike>use</strike><span style="background: #FFFF00">attempt to access transient memory of</span> <strike>the
</strike><span style="background: #FFFF00">type
</span> <code>CLEAR_ON_DESELECT</code> <strike>when</strike><span style="background: #FFFF00">during</span> <strike>creating</strike><span style="background: #FFFF00">the</span> <strike>transient</strike><span style="background: #FFFF00">processing of this</span> <strike>arrays</strike><span style="background: #FFFF00">method</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> <li><em><strike>If the method throws an</strike><span style="background: #FFFF00">The Application is responsible for</span> <strike>ISOException</strike><span style="background: #FFFF00">managing</span> the <strike>JavaCard runtime environment sends 
</strike><span style="background: #FFFF00">atomic
 modification of its own</span> <strike>the</strike><span style="background: #FFFF00">data,</span> <strike>associated</strike><span style="background: #FFFF00">if</span> <strike>reason</strike><span style="background: #FFFF00">needed.</em>

</span> <strike>code</strike><li><em><span style="background: #FFFF00">As</span> <strike>as the response status</strike><span style="background: #FFFF00">this method may be</span> <strike>instead.
</strike><span style="background: #FFFF00">invoked</span> <strike>If the Exception thrown does not extends</strike><span style="background: #FFFF00">by a Security Domain immaterial of
 the</span> <strike>ISOException</strike><span style="background: #FFFF00">Application's internal</span> <span style="background: #FFFF00">state, </span>the <strike>reason code us</strike><span style="background: #FFFF00">Application is responsible</span> <strike>ISO7816.SW_UNKNOWN.</strike><span style="background: #FFFF00">for
</span> <strike>
</strike><span style="background: #FFFF00">ensuring</span> <strike>The</strike><span style="background: #FFFF00">that its internal state</span> <strike>personalization</strike><span style="background: #FFFF00">is valid</span> <strike>session remains open</strike><span style="background: #FFFF00">for this operation</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>the source </strike>byte array containing <strike>the</strike><span style="background: #FFFF00">input</span> data<span style="background: #FFFF00">.</span> <strike>expected by the</strike><span style="background: #FFFF00">Must be a
</span> <strike>applet</strike><em><span style="background: #FFFF00">global</em> byte array</span>.<span style="background: #FFFF00">
</span> <strike>This</strike><span style="background: #FFFF00">@param</span> <strike>buffer</strike><span style="background: #FFFF00">sOffset</span> <strike>must</strike> <strike>be</strike><span style="background: #FFFF00">offset</span> <strike>global</strike><span style="background: #FFFF00">of input data within <code>baBuffer</code></span>.
 @param <strike>sOffset</strike><span style="background: #FFFF00">sLength</span> <strike>starting</strike> <strike>offset</strike><span style="background: #FFFF00">length</span> of <span style="background: #FFFF00">input </span>data<span style="background: #FFFF00">.

</span> <strike>within</strike><span style="background: #FFFF00">@exception SecurityException if <code>baBuffer</code></span> <strike>source</strike><span style="background: #FFFF00">is not a
 <em>global</em></span> byte array.
 @<strike>param sLength</strike><span style="background: #FFFF00">exception NullPointerException</span> <strike>length</strike><span style="background: #FFFF00">if <code>baBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException</span> <span style="background: #FFFF00">if reading input data would
 cause access </span>of data<span style="background: #FFFF00"> outside array bounds</span>.</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.Authority!class"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a><br><br><blockquote>This interface <strike>provides services to recover</strike><span style="background: #FFFF00">allows performing operations such</span> <strike>a</strike><span style="background: #FFFF00">as recovering a
</span> cryptographic key <strike>and to</strike><span style="background: #FFFF00">or</span> <strike>sign</strike><span style="background: #FFFF00">signing</span> data. The <strike>CASD shall publish 
 this interface to the OPEN, using Global Service interface, to make its</strike><span style="background: #FFFF00">required</span> <strike>services available 
 to other Applications</strike><span style="background: #FFFF00">algorithms and credentials
 are known implicitly</span>.<strike> The</strike><p><span style="background: #FFFF00">

</span> <strike>APSD</strike><span style="background: #FFFF00">It</span> is <strike>the</strike><span style="background: #FFFF00">intended</span> <strike>first entity requiring this service from the CASD as</strike><span style="background: #FFFF00">that Security Domains would be able to access an</span> <strike>shown</strike><A HREF="1.6\javadoc\core\org/globalplatform/Authority/Authority.html"><TT><span style="background: #FFFF00">Authority</TT></A></span> <strike>in</strike><span style="background: #FFFF00">instance</span> <strike>2.1.
</strike><span style="background: #FFFF00">through</span> <strike>There is only one CASD inside the</strike><span style="background: #FFFF00">a Global Service by a Controlling Authority
</span> <strike>card.</strike><span style="background: #FFFF00">Security</span> <strike>The</strike><span style="background: #FFFF00">Domain</span> <span style="background: #FFFF00">(</span>CASD<strike> shall register this service</strike><span style="background: #FFFF00">)</span> <strike>as</strike><span style="background: #FFFF00">with</span> a <strike>unique Global Service with
 the </strike>service <strike>family identifier</strike><span style="background: #FFFF00">name</span> <strike>=#83#</strike><span style="background: #FFFF00">of</span> <code>(<strike>per section </strike><A HREF="1.6\javadoc\core\org/globalplatform/Authority/GPSystem.html#FAMILY_AUTHORITY"><TT><span style="background: #FFFF00">GPSystem.FAMILY_AUTHORITY</TT></A><</span>8<strike>.1.3 of GlobalPlatform Card Specification v2.2</strike><span style="background: #FFFF00">|0x00</span>)</code>.<p>
 
 <strike>The Authority interface is responsible</strike><span style="background: #FFFF00">@since</span> <strike>for</strike><ul><span style="background: #FFFF00">
</span> <strike>signing</strike><li><span style="background: #FFFF00">export</span> <strike>and verifying</strike><span style="background: #FFFF00">file version</span> <strike>message</strike><span style="background: #FFFF00">1.2:</span> <strike>with</strike><span style="background: #FFFF00">initial</span> <strike>a</strike><span style="background: #FFFF00">version.
</span> <strike>key</strike><li><span style="background: #FFFF00">export</span> <strike>
 implicitly known</strike><span style="background: #FFFF00">file version 1</span>.<span style="background: #FFFF00">6:</span> <strike>The</strike><span style="background: #FFFF00">reviewed overall</span> <strike>implementer</strike><span style="background: #FFFF00">description</span> of this interface<strike> has the knowledge of the keys used for the different operations</strike>.<strike> </strike>
 <strike>@since export file version 1.2</strike></ul></blockquote>
<A NAME="org.globalplatform.Authority.dmethod.init(byte)"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.init_changed(byte)" class="hiddenlink">void <b>init(byte)</b></a><br><br><blockquote>Initializes the Authority interface with the appropriate mode (<code>MODE_SIGN</code> or <code>MODE_KEY_RECOVERY</code>).
 
 @param theMode one of <A HREF="1.6\javadoc\core\.html#MODE_SIGN"><TT><span style="background: #FFFF00">.</span>MODE_SIGN</TT></A> or <A HREF="1.6\javadoc\core\.html#MODE_KEY_RECOVERY"><TT><span style="background: #FFFF00">.</span>MODE_KEY_RECOVERY<strike>
</strike></TT></A><span style="background: #FFFF00">.

</span> @exception CryptoException <strike> </strike>with the following reason code:<ul>
 <li><code>ILLEGUAL_VALUE</code> if theMode option is an <strike>undefined</strike><span style="background: #FFFF00">undefined
</span> value<span style="background: #FFFF00">.</ul></span></blockquote>
<A NAME="org.globalplatform.Authority.dmethod.recoverKey(byte[], short, short, byte[], short)"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.recoverKey_changed(byte[], short, short, byte[], short)" class="hiddenlink">short <b>recoverKey(byte[], short, short, byte[], short)</b></a><br><br><blockquote>Recovers a cryptographic key from a set of data 
 structures provided in the input buffer (inBuff).
 As a mandatory step, the recovery mechanism includes the verification of
 the origin and integrity of the recovered key. 
 This method knows, from the set of data structures present in the input 
 buffer, which recovery mechanism is to be used.
 The recovered key is written in the ouput buffer (outBuff) at specified
 offset (outOffset), in the form of a key data structure whose format 
 depends on the type of the key. 
 A call to this method resets this instance of the Authority interface to
 the state it was in when previously initialized via a call to init(). 
 That is, the object is reset and available to recover another key. 
 The input and output buffers may overlap and shall be <em>global</em> arrays.
 
 @param inBuff containing input data.
 @param inOffset offset of input data.
 @param inLength length of input data.
 @param outBuff the buffer where recovered key data structure shall be written 
 @param outOffset offset where recovered key data structure shall be written
 @return <code>Length</code> of the recovered key data structure written 
 in outBuff at outOffset,or 0 if the recovery mechanism failed 
 (e.g. recovered key was considered invalid).
  
 @throws CryptoException - with the following reason codes:<ul>
 <strike>	</strike><li><code>INVALID_INIT</code> if this Authority interface is not initialized or
 <strike>	initialized</strike><span style="background: #FFFF00">initialized</span> in <code>MODE_SIGN</code> mode.</ul>
 @throws SecurityException if the inBuff or outBuff are not <em>global</em> <strike>array</strike><span style="background: #FFFF00">arrays</span>.</blockquote>
<A NAME="org.globalplatform.Authority.dmethod.sign(byte[], short, short, byte[], short)"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.sign_changed(byte[], short, short, byte[], short)" class="hiddenlink">short <b>sign(byte[], short, short, byte[], short)</b></a><br><br><blockquote>Generates the signature of all/last input data. 
 A call to this method resets this Authority interface to the state it was 
 in when previously initialized via a call to init().
 That is, the object is reset and available to sign another message.
 The input and output buffer may overlap and shall be <em>global</em> arrays. 
 
 @param inBuff the input buffer of data to be signed
 @param inOffset the offset in input buffer at which the signature starts
 @param inLength the byte length to sign 
 @param sigBuff the output buffer to store signature data
 @param sigOffset the offset into sigBuff at which to begin signature generation
 
 @return the number of bytes of signature output in sigBuff
 
 @throws CryptoException with the following reason codes:<ul>
 <li><code>INVALID_INIT</code> if this Authority interface is not initialized or 
 initialized in <code>MODE_KEY_RECOVERY</code> mode.<strike> </strike>
 <li><code>ILLEGAL_USE</code> if this Authority algorithm does not pad the message and
 the message is not block aligned.</ul>
 @throws SecurityException if the inBuff or sigBuff are not <em>global</em> <strike>array</strike><span style="background: #FFFF00">arrays</span>.</blockquote>
<A NAME="org.globalplatform.Authority.dmethod.update(byte[], short, short)"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.update_changed(byte[], short, short)" class="hiddenlink">void <b>update(byte[], short, short)</b></a><br><br><blockquote>Accumulates input data. for the current operation (<code>MODE_SIGN</code> or <code>MODE_KEY_RECOVERY</code>).
 <p>
 When this method is used, temporary storage of intermediate results is required. 
 This method should only be used if all the input data required for the current operation
 is not available in one byte array.
 The <code>sign</code> or <code>recoverKey</code> methods are recommended whenever possible. 
 The inBuff shall be <em>global</em> array. 
 
 @param inBuff buffer containing input data
 @param inOffset offset of input data
 @param inLength length of input data 
 @throws CryptoException with the following reason codes:<ul>
 <li><code>INVALID_INIT</code> if this Authority interface is not initialized.</ul>
 @throws SecurityException if the inBuff is not <em>global</em> array.</blockquote>
<A NAME="org.globalplatform.Authority.field.MODE_KEY_RECOVERY"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.MODE_KEY_RECOVERY" class="hiddenlink">byte <b>MODE_KEY_RECOVERY</b></a><br><br><blockquote>Used <strike>in</strike><span style="background: #FFFF00">with</span> <A HREF="1.6\javadoc\core\.html#init"><TT><span style="background: #FFFF00">.</span>init<strike>()</strike></TT></A> <strike>methods</strike><span style="background: #FFFF00">method</span> to indicate key recovery mode.</blockquote>
<A NAME="org.globalplatform.Authority.field.MODE_SIGN"></A><a href="org.globalplatform.Authority.html" class="hiddenlink">Class <b>Authority</b></a>, <a href="org.globalplatform.Authority.html#org.globalplatform.Authority.MODE_SIGN" class="hiddenlink">byte <b>MODE_SIGN</b></a><br><br><blockquote>Used <strike>in</strike><span style="background: #FFFF00">with</span> <A HREF="1.6\javadoc\core\.html#init"><TT><span style="background: #FFFF00">.</span>init<strike>()</strike></TT></A> <strike>methods</strike><span style="background: #FFFF00">method</span> to indicate <strike>signature sign</strike><span style="background: #FFFF00">signing</span> mode.</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.CVM!class"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a><br><br><blockquote>This <span style="background: #FFFF00">interface </span>defines <strike>the</strike><span style="background: #FFFF00">basic</span> <strike>interface</strike><span style="background: #FFFF00">Cardholder Verification Method services
 (e.g. comparison</span> of <span style="background: #FFFF00">CVM value, CVM state query). It is typically exposed to
 on-card Applications by </span>a Global Services Application implementing one <strike>or</strike><span style="background: #FFFF00">or
</span> more Cardholder Verification <strike>
Methods</strike><span style="background: #FFFF00">Methods</span>. <strike>This</strike><span style="background: #FFFF00">Some services</span> <strike>class offers basic Cardholder Verification Method services</strike><span style="background: #FFFF00">are restricted to
 Applications having the CVM</span> <strike>(e</strike><span style="background: #FFFF00">Management Privilege</span>.<strike>g</strike><p><span style="background: #FFFF00">
 
 To retrieve an instance of this interface, an Application shall invoke the
 <A HREF="1.6\javadoc\core\org/globalplatform/CVM/GPSystem.html#getCVM"><TT>GPSystem</span>.<span style="background: #FFFF00">getCVM</TT></A> method, or shall use</span> <span style="background: #FFFF00">a <A HREF="1.6\javadoc\core\org/globalplatform/CVM/GlobalService.html"><TT>GlobalService</TT></A> instance
 of the <A HREF="1.6\javadoc\core\org/globalplatform/CVM/GPSystem.html#FAMILY_CVM"><TT>GPSystem.FAMILY_</span>CVM</TT></A><span style="background: #FFFF00"> family. For</span> <strike>verification</strike><span style="background: #FFFF00">backward compatibility</span>, <span style="background: #FFFF00">the
 <A HREF="1.6\javadoc\core\org/globalplatform/CVM/CVM.html"><TT></span>CVM</TT></A> <strike>state</strike><span style="background: #FFFF00">instances</span> <strike>
interrogation)</strike><span style="background: #FFFF00">retrieved</span> <strike>to</strike><span style="background: #FFFF00">using</span> <strike>any</strike><span style="background: #FFFF00">the <A HREF="1.6\javadoc\core\org/globalplatform/CVM/GPSystem.html#getCVM"><TT>GPSystem.getCVM</TT></A> method</span> <span style="background: #FFFF00">are
 mapped onto those retrieved as Global Services </span>of the <strike>Applications</strike><A HREF="1.6\javadoc\core\org/globalplatform/CVM/GPSystem.html#FAMILY_CVM"><TT><span style="background: #FFFF00">GPSystem.FAMILY_CVM</TT></A> family.<p>

</span> <strike>present</strike><span style="background: #FFFF00">The</span> <strike>on</strike><span style="background: #FFFF00">CVM instance maintains</span> the <strike>card</strike><span style="background: #FFFF00">following data (see Card Specification v2.2.1
 section 8.2.2 for more details):<ul>

 <li>CVM state: ACTIVE, INVALID_SUBMISSION</span>, <strike>while some</strike><span style="background: #FFFF00">VALIDATED or</span> <strike>of</strike><span style="background: #FFFF00">BLOCKED. In addition,
 we</span> <span style="background: #FFFF00">distinguish </span>the <strike>services</strike><span style="background: #FFFF00">case where the CVM instance is not fully initialized
</span> (<strike>e</strike><span style="background: #FFFF00">i</span>.<strike>g</strike><span style="background: #FFFF00">e</span>. <strike>unblock</strike><span style="background: #FFFF00">either</span> <span style="background: #FFFF00">the </span>CVM<strike>,</strike> <strike>change 
CVM</strike><span style="background: #FFFF00">value or</span> <strike>value</strike><span style="background: #FFFF00">the CVM try limit has not been set</span>) <strike>are restricted to Applications</strike><span style="background: #FFFF00">and has
 never entered</span> <strike>with</strike><span style="background: #FFFF00">the state ACTIVE.

 <li>CVM try limit:</span> the <strike>privilege to change</strike><span style="background: #FFFF00">maximum value of</span> the CVM <strike>values</strike><span style="background: #FFFF00">try counter</span>.<span style="background: #FFFF00">

</span> <strike>Prior</strike><li><span style="background: #FFFF00">CVM</span> <strike>to</strike><span style="background: #FFFF00">try</span> <strike>using</strike><span style="background: #FFFF00">counter:</span> <strike>this</strike><span style="background: #FFFF00">the</span> <strike>interface,
an</strike><span style="background: #FFFF00">number</span> <strike>Application is required to obtain a handle to</strike><span style="background: #FFFF00">of unsuccessful comparisons of the CVM value
 that</span> <strike>the</strike><span style="background: #FFFF00">may be performed before</span> <span style="background: #FFFF00">this </span>CVM <strike>services</strike><span style="background: #FFFF00">instance gets blocked</span>.<span style="background: #FFFF00">

</span> <strike>The</strike><li><span style="background: #FFFF00">CVM value: the</span> <span style="background: #FFFF00">secret value held by this </span>CVM <strike>application</strike><span style="background: #FFFF00">instance,</span> <strike>shall expose</strike><span style="background: #FFFF00">stored in</span> <strike>the</strike><span style="background: #FFFF00">ASCII,
 BCD or HEX format.

 </ul>

 Operations performed by</span> <strike>
GlobalService</strike><span style="background: #FFFF00">this</span> interface <strike>object</strike><span style="background: #FFFF00">shall be independent of, and not
 interfere with, any transaction in progress </span>(<strike>s)</strike><span style="background: #FFFF00">e.g. if</span> <strike>through</strike><span style="background: #FFFF00">the</span> <strike>applet</strike><A HREF="1.6\javadoc\core\org/globalplatform/CVM/.html#verify"><TT>.<strike>getShareableInterfaceObject()</strike><span style="background: #FFFF00">verify</TT></A>
</span> <strike>according</strike><span style="background: #FFFF00">method</span> <strike>to</strike><span style="background: #FFFF00">is invoked from</span> <span style="background: #FFFF00">within a transaction and </span>this <strike>specification.</strike><span style="background: #FFFF00">transaction is aborted,</span>
 <span style="background: #FFFF00">then the try counter is not revert to its original value).<p>

 </span>@since <ul><span style="background: #FFFF00">
 <li></span>export file version 1.0<span style="background: #FFFF00">: initial version.
 <li>export file version 1.6: reviewed overall description of this interface.
 </ul></span></blockquote>
<A NAME="org.globalplatform.CVM.dmethod.blockState()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.blockState_changed()" class="hiddenlink">boolean <b>blockState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Sets</span> <span style="background: #FFFF00">the CVM state to BLOCKED.<p>

 If the Application invoking this </span>method <strike>sets</strike><span style="background: #FFFF00">does</span> <span style="background: #FFFF00">not have the CVM Management
 Privilege, then </span>the CVM state <span style="background: #FFFF00">is not updated.<p>

 The CVM state can only be set </span>to BLOCKED<span style="background: #FFFF00"> if the CVM instance already
 entered the state ACTIVE once, that is, if the CVM instance is fully
 initialized. Notice that this method shall return <code>true</code> if the
 CVM state is already BLOCKED</span>.<strike>
</strike> <p><span style="background: #FFFF00">

 </span>Notes:<ul>
 <li><em><strike>The CVM application shall verify the CVM Management privilege using</strike><span style="background: #FFFF00">If the Global Service Application providing this CVM instance has
</span> the <strike>GPRegistryEntry</strike><span style="background: #FFFF00">Global</span> <strike>interface</strike><span style="background: #FFFF00">Registry Privilege, it is</span> <strike>of</strike><span style="background: #FFFF00">able</span> <span style="background: #FFFF00">to check that </span>the <span style="background: #FFFF00">Application
 </span>invoking <strike>applet.
</strike><span style="background: #FFFF00">this</span> <strike>
</strike><span style="background: #FFFF00">method</span> <span style="background: #FFFF00">has the</span> <span style="background: #FFFF00">CVM Management Privilege using</span> <span style="background: #FFFF00">the</span> <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <span style="background: #FFFF00">interface;</em></span>
 </ul><span style="background: #FFFF00">

 </span>@return <code>true</code> if the CVM state was set to BLOCKED,<span style="background: #FFFF00">
</span> <code>false</code> otherwise.<span style="background: #FFFF00">

 @see GPRegistryEntry#PRIVILEGE_CVM_MANAGEMENT</span></blockquote>
<A NAME="org.globalplatform.CVM.dmethod.getTriesRemaining()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.getTriesRemaining_changed()" class="hiddenlink">byte <b>getTriesRemaining()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns </strike>the <strike>number of</strike><span style="background: #FFFF00">CVM try</span> <strike>tries</strike><span style="background: #FFFF00">counter,</span> <strike>remaining</strike><span style="background: #FFFF00">that</span> <strike>for</strike><span style="background: #FFFF00">is,</span> the <strike>CVM.
 This</strike><span style="background: #FFFF00">number</span> <strike>indicates the number</strike><span style="background: #FFFF00">of unsuccessful comparisons
</span> of <strike>times </strike>the CVM value <strike>can</strike><span style="background: #FFFF00">that may</span> be <strike>incorrectly presented prior
 to the CVM</strike><span style="background: #FFFF00">performed before this CVM instance gets
</span> <strike>reaching</strike><span style="background: #FFFF00">blocked.<p>

</span> <strike>the</strike><span style="background: #FFFF00">@return</span> <strike>state</strike><span style="background: #FFFF00">current</span> <span style="background: #FFFF00">value </span>of <strike>BLOCKED.
</strike><span style="background: #FFFF00">the</span> <strike>@return</strike><span style="background: #FFFF00">CVM</span> <strike>Tries remaining</strike><span style="background: #FFFF00">try counter</span>.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.isActive()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.isActive_changed()" class="hiddenlink">boolean <b>isActive()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Indicates</span> <strike>method indicates </strike>whether <strike>the</strike><span style="background: #FFFF00">this</span> CVM <span style="background: #FFFF00">instance is active, that </span>is<span style="background: #FFFF00">, whether it has
 been fully</span> <strike>present</strike><span style="background: #FFFF00">initialized</span> <span style="background: #FFFF00">(i.e. both value and try limit) </span>and <strike>activated</strike><span style="background: #FFFF00">is ready
 for use</span>.<strike>
</strike> If <strike>active</strike><span style="background: #FFFF00">yes,</span> <span style="background: #FFFF00">then </span>the CVM <strike>could</strike><span style="background: #FFFF00">state is deemed</span> <span style="background: #FFFF00">to </span>be in <strike>any </strike>one of <strike>the</strike><span style="background: #FFFF00">the
</span> following states: ACTIVE, INVALID_SUBMISSION,<strike>
</strike> VALIDATED or BLOCKED.<strike>
</strike><p><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM <strike>state is</strike><span style="background: #FFFF00">has been</span> <strike>(at</strike><span style="background: #FFFF00">fully</span> <strike>least)</strike><span style="background: #FFFF00">initialized</span> <strike>ACTIVE</strike><span style="background: #FFFF00">and is
 ready for use</span>, <code>false</code> otherwise<span style="background: #FFFF00"> (i.e. the CVM state is NOT_READY)</span>.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.isBlocked()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.isBlocked_changed()" class="hiddenlink">boolean <b>isBlocked()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Indicates</span> <strike>method</strike><span style="background: #FFFF00">whether this CVM instance is blocked,</span> <strike>indicates</strike><span style="background: #FFFF00">that</span> <span style="background: #FFFF00">is, </span>whether the <strike>CVM is currently</strike><span style="background: #FFFF00">CVM
 state is</span> BLOCKED.<strike>
</strike><p><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM state is BLOCKED, <code>false</code><span style="background: #FFFF00">
</span> otherwise.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.isSubmitted()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.isSubmitted_changed()" class="hiddenlink">boolean <b>isSubmitted()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Indicates</span> <strike>method indicates </strike>whether an attempt has been made to compare the CVM value<strike>.
 Note:
  This method does</strike><span style="background: #FFFF00">,</span> <strike>not</strike><span style="background: #FFFF00">that
</span> <strike>differentiate</strike><span style="background: #FFFF00">is,</span> whether the CVM <strike>value has been</strike><span style="background: #FFFF00">state</span> <strike>successfully
</strike><span style="background: #FFFF00">is</span> <strike>verified</strike><span style="background: #FFFF00">INVALID_SUBMISSION</span> or <strike>not, i.e. CVM states of </strike>VALIDATED<strike> or INVALID_SUBMISSION</strike>.<strike>
 
</strike><p><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM state is <strike>(at</strike><span style="background: #FFFF00">INVALID_SUBMISSION</span> <strike>least)</strike><span style="background: #FFFF00">or
</span> <strike>SUBMITTED</strike><span style="background: #FFFF00">VALIDATED</span>, <code>false</code> otherwise.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.isVerified()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.isVerified_changed()" class="hiddenlink">boolean <b>isVerified()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Indicates</span> <strike>method indicates </strike>whether a successful comparison of the CVM value has occurred<span style="background: #FFFF00">,
 that is, whether the</span> <strike>(</strike>CVM <strike>state
 of</strike><span style="background: #FFFF00">state is</span> VALIDATED<strike>)</strike>.<strike>
</strike><p><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM state is VALIDATED,<span style="background: #FFFF00">
</span> <code>false</code> otherwise.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.resetAndUnblockState()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.resetAndUnblockState_changed()" class="hiddenlink">boolean <b>resetAndUnblockState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Resets</span> <span style="background: #FFFF00">the CVM state to ACTIVE, even if it is currently BLOCKED.<p>

 If the Application invoking this </span>method <strike>resets</strike><span style="background: #FFFF00">does not have the</span> <span style="background: #FFFF00">CVM Management
 Privilege, then </span>the CVM state <strike>from</strike><span style="background: #FFFF00">is</span> <strike>BLOCKED</strike><span style="background: #FFFF00">not updated.<p>

</span> <span style="background: #FFFF00">The CVM state can only be set </span>to ACTIVE<strike>.
</strike> <strike>Notes:
</strike><span style="background: #FFFF00">if</span> <strike>The</strike><span style="background: #FFFF00">the</span> CVM <strike>Application shall verify</strike><span style="background: #FFFF00">instance already
 entered</span> the <span style="background: #FFFF00">state ACTIVE once, that is, if the </span>CVM <strike>Management privilege using</strike><span style="background: #FFFF00">instance is fully
</span> <strike>
</strike><span style="background: #FFFF00">initialized.

 If</span> the <strike>GPRegistryEntry</strike><span style="background: #FFFF00">CVM</span> <strike>interface</strike><span style="background: #FFFF00">state is successfully reset, then this method also resets the
 CVM try counter</span> <strike>of</strike><span style="background: #FFFF00">to</span> the <strike>invoking</strike><span style="background: #FFFF00">CVM</span> <strike>applet;</strike><span style="background: #FFFF00">try limit.<p>

 Notes:<ul></span>
 <li><em><strike>The</strike><span style="background: #FFFF00">If the Global Service Application providing</span> <span style="background: #FFFF00">this </span>CVM <strike>try</strike><span style="background: #FFFF00">instance</span> <strike>counter</strike><span style="background: #FFFF00">has
 the Global</span> <span style="background: #FFFF00">Registry Privilege, it </span>is <strike>reset</strike><span style="background: #FFFF00">able to check that the Application
</span> <strike>when</strike><span style="background: #FFFF00">invoking this method</span> <strike>unblocking</strike><span style="background: #FFFF00">has</span> the CVM<strike>.</strike><span style="background: #FFFF00"> Management Privilege using the <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT>GPRegistryEntry</TT></A> interface;</span></em>
 </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM state was reset to ACTIVE,<span style="background: #FFFF00">
</span> <code>false</code> otherwise.<span style="background: #FFFF00">

 @see GPRegistryEntry#PRIVILEGE_CVM_MANAGEMENT</span></blockquote>
<A NAME="org.globalplatform.CVM.dmethod.resetState()"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.resetState_changed()" class="hiddenlink">boolean <b>resetState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Resets</span> <strike>method resets </strike>the CVM state to ACTIVE.<strike>
 </strike><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> The <strike>state of the </strike>CVM <span style="background: #FFFF00">state </span>can only be <strike>set</strike><span style="background: #FFFF00">reset</span> to ACTIVE from the states <span style="background: #FFFF00">ACTIVE,
 </span>INVALID_SUBMISSION or VALIDATED.<strike>
</strike> <strike>The</strike><span style="background: #FFFF00">In particular, it cannot be reset to
 ACTIVE if it is in</span> state <strike>of</strike><span style="background: #FFFF00">BLOCKED or if</span> the CVM <strike>cannot be set to</strike><span style="background: #FFFF00">instance never entered the
</span> <span style="background: #FFFF00">state </span>ACTIVE<span style="background: #FFFF00">,</span> <strike>from</strike><span style="background: #FFFF00">that</span> <strike>BLOCKED.
</strike><span style="background: #FFFF00">is,</span> <strike>
</strike><span style="background: #FFFF00">if the</span> <span style="background: #FFFF00">CVM instance is not fully
 initialized.</span><p><strike>
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if the CVM state was reset, <code>false</code> otherwise.</blockquote>
<A NAME="org.globalplatform.CVM.dmethod.setTryLimit(byte)"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.setTryLimit_changed(byte)" class="hiddenlink">boolean <b>setTryLimit(byte)</b></a><br><br><blockquote><strike>This method</strike><span style="background: #FFFF00">Sets the</span> <strike>sets</strike><span style="background: #FFFF00">CVM try limit, that is,</span> the maximum <strike>number</strike><span style="background: #FFFF00">value</span> of <strike>tries for </strike>the CVM<strike>.
</strike><span style="background: #FFFF00"> try
</span> <span style="background: #FFFF00">counter.</span><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> <strike>The</strike><span style="background: #FFFF00">If</span> <strike>CVM</strike><span style="background: #FFFF00">the</span> Application <strike>shall</strike><span style="background: #FFFF00">invoking this method does not</span> <strike>verify</strike><span style="background: #FFFF00">have</span> the CVM <strike>Management privilege</strike><span style="background: #FFFF00">Management
</span> <strike>using</strike><span style="background: #FFFF00">Privilege,</span> <strike>
</strike><span style="background: #FFFF00">then</span> the <strike>GPRegistryEntry</strike><span style="background: #FFFF00">CVM</span> <strike>interface of the invoking</strike><span style="background: #FFFF00">try limit is not</span> <strike>applet;
</strike><span style="background: #FFFF00">set.<p>

</span> <strike>The</strike><span style="background: #FFFF00">If</span> <span style="background: #FFFF00">the </span>CVM try <strike>counter</strike><span style="background: #FFFF00">limit</span> is <strike>reset</strike><span style="background: #FFFF00">successfully</span> <strike>when setting</strike><span style="background: #FFFF00">set,</span> <strike>the maximum number of</strike><span style="background: #FFFF00">then this method also</span> <strike>tries;
</strike><span style="background: #FFFF00">resets</span> <strike>The</strike><span style="background: #FFFF00">the
</span> CVM <strike>state is</strike><span style="background: #FFFF00">try</span> <strike>reset</strike><span style="background: #FFFF00">counter</span> to <strike>ACTIVE</strike><span style="background: #FFFF00">the new</span> <strike>when</strike><span style="background: #FFFF00">CVM try limit.</span> <strike>changing</strike><span style="background: #FFFF00">If</span> the <strike>maximum</strike><span style="background: #FFFF00">CVM</span> <strike>number of</strike><span style="background: #FFFF00">value has</span> <strike>tries.
</strike><span style="background: #FFFF00">already
</span> <strike>When setting the</strike><span style="background: #FFFF00">been successfully set</span> <strike>maximum</strike><span style="background: #FFFF00">previously,</span> <strike>number of</strike><span style="background: #FFFF00">then this</span> <strike>tries</strike><span style="background: #FFFF00">method also</span> <strike>before</strike><span style="background: #FFFF00">(re)sets</span> the <strike>CVM</strike><span style="background: #FFFF00">CVM
</span> state <strike>is</strike><span style="background: #FFFF00">to</span> ACTIVE<strike>,</strike><span style="background: #FFFF00">.<p>

 Notes:<ul>
</span> <li><em><span style="background: #FFFF00">If </span>the <span style="background: #FFFF00">Global Service Application providing this </span>CVM <strike>state</strike><span style="background: #FFFF00">instance</span> <strike>
</strike><span style="background: #FFFF00">has
 the Global Registry Privilege, it is</span> <strike>transitions</strike><span style="background: #FFFF00">able</span> to <strike>ACTIVE</strike><span style="background: #FFFF00">check</span> <strike>only</strike><span style="background: #FFFF00">that</span> <strike>if</strike><span style="background: #FFFF00">the Application
 invoking this method has</span> the CVM <strike>value is already</strike><span style="background: #FFFF00">Management Privilege using</span> <strike>set.
</strike><span style="background: #FFFF00">the</span> <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <span style="background: #FFFF00">interface;</em></span>
 <strike>
</strike></ul><span style="background: #FFFF00">

</span> @param bTryLimit the maximum number of tries for the CVM.<strike>
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if the <strike>maximum number of</strike><span style="background: #FFFF00">try</span> <strike>tries</strike><span style="background: #FFFF00">limit</span> was set, <code>false</code><span style="background: #FFFF00">
</span> otherwise.<span style="background: #FFFF00">

 @see GPRegistryEntry#PRIVILEGE_CVM_MANAGEMENT</span></blockquote>
<A NAME="org.globalplatform.CVM.dmethod.update(byte[], short, byte, byte)"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.update_changed(byte[], short, byte, byte)" class="hiddenlink">boolean <b>update(byte[], short, byte, byte)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Updates</span> <strike>method changes </strike>the CVM value.<p><span style="background: #FFFF00"> </span>
 <strike>Notes:</strike>
 <strike>The</strike><span style="background: #FFFF00">If</span> <strike>CVM</strike><span style="background: #FFFF00">the</span> Application <strike>shall verify</strike><span style="background: #FFFF00">invoking</span> <strike>the CVM Management privilege using</strike><span style="background: #FFFF00">this method does not have</span> the <strike>GPRegistryEntry</strike><span style="background: #FFFF00">CVM</span> <strike>interface</strike><span style="background: #FFFF00">Management
</span> <strike>of</strike><span style="background: #FFFF00">Privilege,</span> <strike>the invoking</strike><span style="background: #FFFF00">or if</span> <strike>applet;
</strike><span style="background: #FFFF00">the</span> <strike>The</strike><span style="background: #FFFF00">specified</span> <strike>invoking</strike><span style="background: #FFFF00">format</span> <strike>applet</strike><span style="background: #FFFF00">(<code>bFormat</code>)</span> is <strike>responsible for specifying the format</strike><span style="background: #FFFF00">unknown
</span> <strike>of</strike><span style="background: #FFFF00">(or</span> <strike>the CVM</strike><span style="background: #FFFF00">not supported</span> <strike>value;
</strike><span style="background: #FFFF00">by</span> <strike>The</strike><span style="background: #FFFF00">this</span> CVM <strike>Retry Counter is reset</strike><span style="background: #FFFF00">instance),</span> <strike>when changing</strike><span style="background: #FFFF00">or if</span> the <span style="background: #FFFF00">new </span>CVM value<strike>;
 </strike> <strike>The</strike><span style="background: #FFFF00">is</span> <strike>CVM state is reset</strike><span style="background: #FFFF00">not
 consistent with respect</span> to <strike>ACTIVE</strike><span style="background: #FFFF00">the specified</span> <strike>when</strike><span style="background: #FFFF00">format,</span> <strike>changing</strike><span style="background: #FFFF00">then</span> the CVM value<strike>.</strike> <span style="background: #FFFF00">is not
 updated.<p></span>
 <strike>When setting</strike><span style="background: #FFFF00">
 If</span> the CVM value <strike>before the CVM</strike><span style="background: #FFFF00">is</span> <strike>state is</strike><span style="background: #FFFF00">successfully updated</span> <strike>ACTIVE,</strike><span style="background: #FFFF00">and</span> the CVM <strike>state transitions 
 to ACTIVE only if</strike><span style="background: #FFFF00">try limit has already
 been successfully set</span> <strike>the</strike><span style="background: #FFFF00">previously,</span> <strike>Retry Limit is already</strike><span style="background: #FFFF00">then this method also</span> <strike>set;
</strike><span style="background: #FFFF00">resets</span> <span style="background: #FFFF00">the</span> <strike>Data</strike><span style="background: #FFFF00">CVM</span> <strike>presented always replaces</strike><span style="background: #FFFF00">try
 counter to</span> the <strike>previous data</strike><span style="background: #FFFF00">CVM</span> <strike>regardless</strike><span style="background: #FFFF00">try</span> <strike>of</strike><span style="background: #FFFF00">limit,</span> <strike>its</strike><span style="background: #FFFF00">and</span> <strike>format</strike><span style="background: #FFFF00">(re)sets</span> <strike>
 or</strike><span style="background: #FFFF00">the CVM</span> <strike>length.</strike><span style="background: #FFFF00">state</span> <strike>The</strike><span style="background: #FFFF00">to</span> <strike>CVM</strike><span style="background: #FFFF00">ACTIVE.<p>

</span> <strike>shall</strike><span style="background: #FFFF00">Notes:<ul>

</span> <strike>remember</strike><li><em><span style="background: #FFFF00">If</span> the <strike>format, length,</strike><span style="background: #FFFF00">Global</span> <strike>and value of the</strike><span style="background: #FFFF00">Service Application providing this</span> CVM <strike>data.
</strike><span style="background: #FFFF00">instance</span> <strike>The CVM may</strike><span style="background: #FFFF00">has
 the Global</span> <strike>(or</strike><span style="background: #FFFF00">Registry Privilege,</span> <strike>may</strike><span style="background: #FFFF00">it</span> <strike>not)</strike><span style="background: #FFFF00">is</span> <strike>do editing checks on</strike><span style="background: #FFFF00">able to check that</span> the <strike>data</strike><span style="background: #FFFF00">Application
</span> <strike>and</strike><span style="background: #FFFF00">invoking this method</span> <strike>reject</strike><span style="background: #FFFF00">has</span> the CVM <strike>update</strike><span style="background: #FFFF00">Management</span> <strike>if the data</strike><span style="background: #FFFF00">Privilege using the</span> <strike>fails</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>the</strike><span style="background: #FFFF00">interface;</em>

</span> <strike>editing</strike><li><em><span style="background: #FFFF00">The</span> <strike>checks</strike><span style="background: #FFFF00">CVM</span> <strike>(e.g.</strike><span style="background: #FFFF00">instance</span> <strike>reject data that</strike><span style="background: #FFFF00">shall record the</span> <strike>is</strike><span style="background: #FFFF00">format,</span> <strike>presented</strike><span style="background: #FFFF00">length,</span> <strike>as BCD that is not</strike><span style="background: #FFFF00">and value of the
 CVM</span> <strike>numerical)</strike><span style="background: #FFFF00">value</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
</strike><span style="background: #FFFF00">

</span> <strike>
 </strike>@param baBuffer <strike>the source </strike>byte array containing the <span style="background: #FFFF00">new </span>CVM value. <strike>This buffer</strike><span style="background: #FFFF00">Must</span> <strike>must </strike>be <span style="background: #FFFF00">a
 <em></span>global</em><span style="background: #FFFF00"> byte array</span>.
 @param sOffset <strike>the </strike>offset of the <span style="background: #FFFF00">new </span>CVM value within <strike>source byte array</strike><code><span style="background: #FFFF00">baBuffer</code></span>.
 @param bLength <strike>the </strike>length of the <span style="background: #FFFF00">new </span>CVM value.
 @param bFormat <strike>the </strike>format of the <span style="background: #FFFF00">new </span>CVM value<span style="background: #FFFF00">: <A HREF="1.6\javadoc\core\.html#FORMAT_ASCII"><TT></span>.<strike>
</strike><span style="background: #FFFF00">FORMAT_ASCII</TT></A>, <A HREF="1.6\javadoc\core\.html#FORMAT_BCD"><TT>.FORMAT_BCD</TT></A> or <A HREF="1.6\javadoc\core\.html#FORMAT_HEX"><TT>.FORMAT_HEX</TT></A>.

</span> @return <code>true</code> if the CVM value was <strike>changed</strike><span style="background: #FFFF00">successfully updated</span>,<span style="background: #FFFF00">
</span> <code>false</code> otherwise.<span style="background: #FFFF00">

 @see GPRegistryEntry#PRIVILEGE_CVM_MANAGEMENT

 @exception SecurityException if <code>baBuffer</code> is not a
 <em>global</em> byte array.
 @exception NullPointerException if <code>baBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading the new CVM value
 would cause access of data outside array bounds.</span></blockquote>
<A NAME="org.globalplatform.CVM.dmethod.verify(byte[], short, byte, byte)"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.verify_changed(byte[], short, byte, byte)" class="hiddenlink">short <b>verify(byte[], short, byte, byte)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Compares</span> <strike>method</strike><span style="background: #FFFF00">a value</span> <strike>compares</strike><span style="background: #FFFF00">with</span> the stored CVM value<span style="background: #FFFF00">.<p>

</span> <strike>with</strike><span style="background: #FFFF00">If</span> the <strike>one</strike><span style="background: #FFFF00">CVM</span> <strike>passed as</strike><span style="background: #FFFF00">state is</span> <strike>parameter.
</strike><span style="background: #FFFF00">BLOCKED,</span> <strike>Notes:
</strike><span style="background: #FFFF00">or</span> <strike>If</strike><span style="background: #FFFF00">if</span> the <strike>value passed</strike><span style="background: #FFFF00">submitted</span> <strike>as</strike><span style="background: #FFFF00">format
</span> <strike>parameter</strike><span style="background: #FFFF00">(<code>bFormat</code>)</span> is <strike>not in</strike><span style="background: #FFFF00">unknown</span> <strike>the</strike><span style="background: #FFFF00">(or</span> <strike>same format as the</strike><span style="background: #FFFF00">not supported by this</span> CVM <strike>value</strike><span style="background: #FFFF00">instance)</span>,
 <strike>the value passed as parameter must</strike><span style="background: #FFFF00">or if this method throws a</span> <strike>be</strike><A HREF="1.6\javadoc\core\NullPointerException.html"><TT><span style="background: #FFFF00">NullPointerException</TT></A></span> <strike>converted prior</strike><span style="background: #FFFF00">or an</span> <strike>to</strike><A HREF="1.6\javadoc\core\ArrayIndexOutOfBoundsException.html"><TT><span style="background: #FFFF00">ArrayIndexOutOfBoundsException</TT></A>,</span> <strike>comparing</strike><span style="background: #FFFF00">then the comparison is deemed
 unsuccessful</span>.<p>
 <span style="background: #FFFF00">
 </span>If <strike>HEX</strike><span style="background: #FFFF00">the</span> <strike>format</strike><span style="background: #FFFF00">submitted CVM</span> <span style="background: #FFFF00">value </span>is <strike>presented for CVM verification and ASCII or BCD</strike><span style="background: #FFFF00">not in the same format as the stored</span> <span style="background: #FFFF00">CVM
 value, then </span>format <strike>
 was used for updating</strike><span style="background: #FFFF00">conversion shall occur according to</span> the <strike>CVM</strike><span style="background: #FFFF00">following</span> <strike>value,</strike><span style="background: #FFFF00">rules
</span> <strike>the comparison</strike><span style="background: #FFFF00">prior to</span> <strike>fails;
</strike><span style="background: #FFFF00">comparing values:<ul>

</span> <li>If HEX format is <strike>presented for CVM verification</strike><span style="background: #FFFF00">submitted</span> and <strike>HEX format was used 
 for updating the CVM value</strike><span style="background: #FFFF00">the stored CVM value is in ASCII or BCD
 format</span>, <strike>the comparison</strike><span style="background: #FFFF00">then</span> <strike>succeeds when the length</strike><span style="background: #FFFF00">the conversion cannot occur</span> and the <strike>data</strike><span style="background: #FFFF00">comparison</span> <strike>value match exactly</strike><span style="background: #FFFF00">is deemed
 unsuccessful</span>;<strike>
</strike><span style="background: #FFFF00">

</span> <li>If BCD or ASCII format is <strike>presented for</strike><span style="background: #FFFF00">submitted</span> <strike>CVM verification and HEX format was used 
</strike><span style="background: #FFFF00">and the stored CVM value is in HEX
</span> <strike>for</strike><span style="background: #FFFF00">format,</span> <strike>updating</strike><span style="background: #FFFF00">then</span> the <strike>CVM</strike><span style="background: #FFFF00">conversion</span> <strike>value,</strike><span style="background: #FFFF00">cannot</span> <span style="background: #FFFF00">occur and </span>the comparison <strike>fails</strike><span style="background: #FFFF00">is deemed
 unsuccessful</span>;<strike>
</strike><span style="background: #FFFF00">

</span> <li>If ASCII format is <strike>presented</strike><span style="background: #FFFF00">submitted and the</span> <strike>for</strike><span style="background: #FFFF00">stored</span> CVM <strike>verification</strike><span style="background: #FFFF00">value</span> <strike>and</strike><span style="background: #FFFF00">is</span> <strike>BCD</strike><span style="background: #FFFF00">in BCD
</span> format<span style="background: #FFFF00">,</span> <strike>was used 
 for updating</strike><span style="background: #FFFF00">then conversion can occur if</span> the <span style="background: #FFFF00">submitted </span>CVM value<strike>,</strike> <strike>the comparison fails</strike><span style="background: #FFFF00">only contains
 numerical</span> <strike>if</strike><span style="background: #FFFF00">ASCII characters:</span> the <strike>ASCII</strike><span style="background: #FFFF00">numeric</span> characters <strike>presented</strike><span style="background: #FFFF00">(coded</span> <strike>
 for</strike><span style="background: #FFFF00">on one</span> <strike>verification</strike><span style="background: #FFFF00">byte)</span> <strike>are not all numerical</strike><span style="background: #FFFF00">of
 the submitted value</span> <strike>(zero</strike><span style="background: #FFFF00">are converted</span> to <strike>nine).</strike><span style="background: #FFFF00">numeric</span> <strike>
</strike><span style="background: #FFFF00">nibbles,</span> <strike>If all the</strike><span style="background: #FFFF00">padded together in
</span> <strike>ASCII</strike><span style="background: #FFFF00">bytes,</span> <strike>characters are</strike><span style="background: #FFFF00">and a</span> <strike>numerical,</strike><span style="background: #FFFF00">padding</span> <strike>format</strike><span style="background: #FFFF00">nibble</span> <strike>conversion</strike><span style="background: #FFFF00">'F' is</span> <strike>occurs and</strike><span style="background: #FFFF00">added on</span> the <strike>comparison</strike><span style="background: #FFFF00">right</span> <strike>succeeds
</strike><span style="background: #FFFF00">if</span> <span style="background: #FFFF00">necessary.
</span> <strike>when</strike><span style="background: #FFFF00">Otherwise,</span> the <strike>length</strike><span style="background: #FFFF00">conversion cannot</span> <span style="background: #FFFF00">occur </span>and the <strike>data value match exactly</strike><span style="background: #FFFF00">comparison is deemed
 unsuccessful</span>;<strike>
</strike><span style="background: #FFFF00">

</span> <li>If BCD format is <strike>presented</strike><span style="background: #FFFF00">submitted and the</span> <strike>for</strike><span style="background: #FFFF00">stored</span> CVM <strike>verification</strike><span style="background: #FFFF00">value</span> <strike>and</strike><span style="background: #FFFF00">is</span> <strike>ASCII</strike><span style="background: #FFFF00">in ASCII
</span> format<span style="background: #FFFF00">,</span> <strike>was used for
</strike><span style="background: #FFFF00">then conversion can</span> <span style="background: #FFFF00">occur</span> <strike>updating</strike><span style="background: #FFFF00">if</span> the <span style="background: #FFFF00">stored </span>CVM value<strike>,</strike> <span style="background: #FFFF00">only contains
 numerical ASCII characters: </span>the <strike>comparison fails if</strike><span style="background: #FFFF00">numeric nibbles of</span> the <strike>CVM</strike><span style="background: #FFFF00">submitted</span> value <strike>contains</strike><span style="background: #FFFF00">are
</span> <strike>non-numerical</strike><span style="background: #FFFF00">expanded</span> <strike>ASCII</strike><span style="background: #FFFF00">to</span> <strike>
</strike><span style="background: #FFFF00">the corresponding</span> characters<strike>.</strike> <strike>If</strike><span style="background: #FFFF00">coded on one byte and</span> the <strike>CVM value</strike><span style="background: #FFFF00">padding
 nibble</span> <strike>contains</strike><span style="background: #FFFF00">'F'</span> <strike>only numerical</strike><span style="background: #FFFF00">is deleted</span> <strike>ASCII</strike><span style="background: #FFFF00">(if</span> <strike>characters</strike><span style="background: #FFFF00">present). Otherwise</span>, <strike>format</strike><span style="background: #FFFF00">the</span> conversion <strike>occurs</strike><span style="background: #FFFF00">cannot</span> <strike>
</strike><span style="background: #FFFF00">occur
</span> and the comparison <strike>succeeds</strike><span style="background: #FFFF00">is deemed unsuccessful; </ul>

</span> <strike>when</strike><span style="background: #FFFF00">If</span> the <strike>length</strike><span style="background: #FFFF00">comparison is unsuccessful</span> and the <strike>data value match</strike><span style="background: #FFFF00">CVM state is</span> <strike>exactly;
</strike><span style="background: #FFFF00">not</span> <strike>If</strike><span style="background: #FFFF00">BLOCKED,</span> <span style="background: #FFFF00">then
 </span>the <strike>comparison is</strike><span style="background: #FFFF00">CVM try</span> <strike>successful</strike><span style="background: #FFFF00">counter must be decremented (by 1). In this case</span>, <span style="background: #FFFF00">if </span>the <span style="background: #FFFF00">CVM
 </span>try counter <strike>must</strike><span style="background: #FFFF00">reaches a value of '0' then</span> <span style="background: #FFFF00">the CVM state shall </span>be <strike>reset and</strike><span style="background: #FFFF00">set to
</span> <span style="background: #FFFF00">BLOCKED, otherwise </span>the CVM <strike>state
 must</strike><span style="background: #FFFF00">state shall</span> be set to <strike>VALIDATED</strike><span style="background: #FFFF00">INVALID_SUBMISSION</span>.<strike>
</strike><p><span style="background: #FFFF00">

</span> If the comparison is <strike>unsuccessful</strike><span style="background: #FFFF00">successful</span>, <span style="background: #FFFF00">then </span>the <span style="background: #FFFF00">CVM </span>try counter <strike>must</strike><span style="background: #FFFF00">shall</span> be <strike>updated</strike><span style="background: #FFFF00">reset
 to the CVM try limit</span> and <strike>the
</strike><span style="background: #FFFF00">the</span> CVM state <strike>must</strike><span style="background: #FFFF00">shall</span> be set to <strike>INVALID_SUBMISSION</strike><span style="background: #FFFF00">VALIDATED</span>.<strike>
</strike><p><span style="background: #FFFF00">

</span> The <strike>Retry Counter object</strike><span style="background: #FFFF00">CVM try counter</span> and the CVM <strike>states VALIDATED and INVALID_SUBMISSION</strike><span style="background: #FFFF00">state</span> shall not conform <strike>
 </strike>to a <strike>transaction</strike><span style="background: #FFFF00">transaction
</span> in progress, i.e. they shall not revert to a previous value if <strike>a</strike><span style="background: #FFFF00">a
</span> transaction in progress is aborted<strike>;
 If the maximum number of tries has been reached, the CVM state must be set to BLOCKED</strike>.<strike>
 
 </strike><p><strike>
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>the source </strike>byte array containing the submitted CVM value. <strike>This buffer must</strike><span style="background: #FFFF00">Must</span> be <span style="background: #FFFF00">a
 <em></span>global</em><span style="background: #FFFF00"> byte array</span>.
 @param sOffset <strike>the </strike>offset of the submitted CVM value within <strike>source byte array</strike><code><span style="background: #FFFF00">baBuffer</code></span>.
 @param bLength <strike>the </strike>length of the submitted CVM value.
 @param bFormat <strike>the </strike>format of the submitted CVM value<span style="background: #FFFF00">: <A HREF="1.6\javadoc\core\.html#FORMAT_ASCII"><TT></span>.<span style="background: #FFFF00">FORMAT_ASCII</TT></A>,</span>
 <A HREF="1.6\javadoc\core\.html#FORMAT_BCD"><TT><span style="background: #FFFF00">.FORMAT_BCD</TT></A> or <A HREF="1.6\javadoc\core\.html#FORMAT_HEX"><TT>.FORMAT_HEX</TT></A>.

 </span>@return <strike>value indicating</strike><A HREF="1.6\javadoc\core\.html#CVM_SUCCESS"><TT><span style="background: #FFFF00">.CVM_SUCCESS</TT></A></span> <strike>whether</strike><span style="background: #FFFF00">if</span> the comparison was successful<span style="background: #FFFF00">,</span> <strike>or</strike><A HREF="1.6\javadoc\core\.html#CVM_FAILURE"><TT><span style="background: #FFFF00">.CVM_FAILURE</TT></A></span> <span style="background: #FFFF00">otherwise.

 @exception SecurityException if <code>baBuffer</code> is </span>not<span style="background: #FFFF00"> a
 <em>global</em> byte array</span>.<span style="background: #FFFF00">
</span> <strike>Values</strike><span style="background: #FFFF00">@exception</span> <strike>other than</strike><span style="background: #FFFF00">NullPointerException if</span> <strike>CVM_SUCCESS</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>(0)</strike><span style="background: #FFFF00">is</span> <strike>or
</strike><code><span style="background: #FFFF00">null</code>.
</span> <strike>CVM_FAILURE</strike><span style="background: #FFFF00">@exception</span> <strike>(-1)</strike><span style="background: #FFFF00">ArrayIndexOutOfBoundsException</span> <strike>are</strike><span style="background: #FFFF00">if reading the submitted CVM
</span> <strike>Reserved</strike><span style="background: #FFFF00">value would cause access of data</span> <strike>for Future Use</strike><span style="background: #FFFF00">outside array bounds</span>.</blockquote>
<A NAME="org.globalplatform.CVM.field.FORMAT_ASCII"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.FORMAT_ASCII" class="hiddenlink">byte <b>FORMAT_ASCII</b></a><br><br><blockquote>The CVM value is formatted as ASCII bytes.<strike>
 </strike><p><span style="background: #FFFF00">

 </span>Note:<ul><strike>
</strike> <li><em>If the CVM value is stored in a format other than ASCII,<span style="background: #FFFF00">
</span> it is the <strike>responsibility
</strike><span style="background: #FFFF00">responsibility</span> of the interface to convert to the <strike>expected</strike><span style="background: #FFFF00">expected
</span> format.</em><strike>
</strike> </ul></blockquote>
<A NAME="org.globalplatform.CVM.field.FORMAT_BCD"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.FORMAT_BCD" class="hiddenlink">byte <b>FORMAT_BCD</b></a><br><br><blockquote>The CVM value is formatted as numerical digits, coded on a nibble (4 bits)<span style="background: #FFFF00">
</span> and left justified.<strike>
 </strike><p><span style="background: #FFFF00">

 </span>Note:<ul><strike>
</strike> <li><em>If the CVM value is stored in a format other than BCD,<span style="background: #FFFF00">
</span> it is the responsibility <strike>of
</strike><span style="background: #FFFF00">of</span> the interface to convert to the <strike>expected</strike><span style="background: #FFFF00">expected
</span> format.</em>
 <li><em>If the length of the CVM value is odd, the right most nibble <strike>of</strike><span style="background: #FFFF00">of
</span> the CVM <strike>value
</strike><span style="background: #FFFF00">value</span> shall be high values ('F').</em><strike>
</strike> </ul></blockquote>
<A NAME="org.globalplatform.CVM.field.FORMAT_HEX"></A><a href="org.globalplatform.CVM.html" class="hiddenlink">Class <b>CVM</b></a>, <a href="org.globalplatform.CVM.html#org.globalplatform.CVM.FORMAT_HEX" class="hiddenlink">byte <b>FORMAT_HEX</b></a><br><br><blockquote>The CVM value is formatted as hexadecimal (binary) data.<strike>
 </strike><p><span style="background: #FFFF00">

 </span>Note:<ul><strike>
</strike> <li><em>If the CVM value is stored in a format other than HEX,<span style="background: #FFFF00">
</span> it is the responsibility of <strike>the
</strike><span style="background: #FFFF00">the</span> interface to convert to the <strike>expected</strike><span style="background: #FFFF00">expected
</span> format.</em><strike>
</strike> </ul></blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.GPRegistryEntry!class"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a><br><br><blockquote>This <strike>defines the interface corresponding</strike><span style="background: #FFFF00">interface allows querying and</span> <strike>to</strike><span style="background: #FFFF00">potentially modifying</span> the <strike>GPRegistryEntry of a single</strike><span style="background: #FFFF00">registry data of
 an</span> Application<strike>.</strike> <strike>
 The Global Service</strike><span style="background: #FFFF00">registered within the GlobalPlatform</span> <strike>Application</strike><span style="background: #FFFF00">Registry.<p>

</span> <strike>uses</strike><span style="background: #FFFF00">Every</span> <strike>this</strike><A HREF="1.6\javadoc\core\org/globalplatform/GPRegistryEntry/GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>interface</strike><span style="background: #FFFF00">instance</span> to <strike>check</strike><span style="background: #FFFF00">an</span> <strike>the validity of</strike><span style="background: #FFFF00">Application registered within
</span> the <strike>request</strike><span style="background: #FFFF00">GlobalPlatform</span> <strike>presented</strike><span style="background: #FFFF00">Registry.<p>

</span> <strike>
 by</strike><span style="background: #FFFF00">To retrieve</span> an <strike>on-card entity.
 Prior to</strike><span style="background: #FFFF00">instance</span> <strike>using</strike><span style="background: #FFFF00">of</span> this interface, an Application <strike>is required</strike><span style="background: #FFFF00">shall</span> <strike>to obtain a handle to</strike><span style="background: #FFFF00">invoke</span> <strike>the</strike><span style="background: #FFFF00">the
</span> <strike>GPRegistryEntry</strike><A HREF="1.6\javadoc\core\org/globalplatform/GPRegistryEntry/GPSystem.html#getRegistryEntry"><TT><span style="background: #FFFF00">GPSystem.getRegistryEntry</TT></A></span> <strike>of</strike><span style="background: #FFFF00">method.<p>

</span> <strike>an</strike><span style="background: #FFFF00">@since</span> <ul>
 <strike>Application by</strike><li><span style="background: #FFFF00">export</span> <strike>invoking the</strike><span style="background: #FFFF00">file version</span> <strike>GPSystem</strike><span style="background: #FFFF00">1</span>.<strike>getRegistryEntry()</strike><span style="background: #FFFF00">1:</span> <strike>method.</strike><span style="background: #FFFF00">initial</span> <span style="background: #FFFF00">version.</span>
 <strike>@since </strike><li>export file version 1.<strike>1</strike><span style="background: #FFFF00">6: reviewed overall description of this interface.
 </ul></span></blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.deregisterService(short)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.deregisterService_changed(short)" class="hiddenlink">void <b>deregisterService(short)</b></a><br><br><blockquote><strike>This method allows</strike><span style="background: #FFFF00">Deregisters a service</span> <strike>a</strike><span style="background: #FFFF00">name.<p>

</span> <strike>Global Services Application</strike><span style="background: #FFFF00">The OPEN shall</span> <strike>(e.g.</strike><span style="background: #FFFF00">check</span> <strike>a CVM</strike><span style="background: #FFFF00">that the</span> Application<strike>)</strike><span style="background: #FFFF00"> invoking this method</span> <span style="background: #FFFF00">corresponds
 </span>to <strike>deregister</strike><code><span style="background: #FFFF00">this</code></span> <strike>a</strike><span style="background: #FFFF00">entry, that it has the Global Service Privilege, and
 that the specified</span> service name<span style="background: #FFFF00"> was previously uniquely registered by that
 same Application</span>.<strike>
</strike><span style="background: #FFFF00"> If not, this</span> <span style="background: #FFFF00">method shall throw an exception (see
 below).</span><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> <strike>The</strike><span style="background: #FFFF00">@param</span> <strike>OPEN</strike><span style="background: #FFFF00">sServiceName the service</span> <strike>checks</strike><span style="background: #FFFF00">name</span> that <strike>the</strike><span style="background: #FFFF00">shall be deregistered.<p>

 A service</span> <strike>requesting</strike><span style="background: #FFFF00">name is encoded</span> on<strike>-card</strike> <strike>entity</strike><span style="background: #FFFF00">2</span> <strike>has</strike><span style="background: #FFFF00">bytes,</span> the <strike>Global Service Privilege</strike><span style="background: #FFFF00">1st byte identifying</span> <span style="background: #FFFF00">a family of
 services </span>and <strike>is associated 
 with this registry</strike><span style="background: #FFFF00">the 2nd byte identifying a service</span> <strike>entry;
</strike><span style="background: #FFFF00">within</span> <span style="background: #FFFF00">that family.<p>

 </span>The <strike>OPEN</strike><A HREF="1.6\javadoc\core\GPSystem.html"><TT><span style="background: #FFFF00">GPSystem</TT></A></span> <strike>checks</strike><span style="background: #FFFF00">class</span> <strike>that</strike><span style="background: #FFFF00">defines a set of</span> <span style="background: #FFFF00">constants
 <code>FAMILY_XXX</code> (of </span>the <code><span style="background: #FFFF00">byte</code> type) that may be used to
 build a </span>service name <strike>is</strike><span style="background: #FFFF00">(of</span> <strike>registered</strike><span style="background: #FFFF00">the <code>short</code> type) suitable to invoke
 this</span> <span style="background: #FFFF00">method </span>as <strike>unique for</strike><span style="background: #FFFF00">shown in</span> the <strike>requesting</strike><span style="background: #FFFF00">following</span> <strike>on-card</strike><span style="background: #FFFF00">examples:<ul>

 <li><code>(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_CVM"><TT>GPSystem.FAMILY_CVM</TT></A><8)|0x11)</code>

</span> <strike>entity</strike><li><code><span style="background: #FFFF00">(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_HTTP_ADMINISTRATION"><TT>GPSystem</span>.<strike>
</strike><span style="background: #FFFF00">FAMILY_HTTP_ADMINISTRATION</TT></A><8)|0x00)</code>

</span> </ul><strike>
</strike><span style="background: #FFFF00">

</span> @<strike>param</strike><span style="background: #FFFF00">exception</span> <strike>sServiceName the unique</strike><span style="background: #FFFF00">ISOException if this</span> <strike>service</strike><span style="background: #FFFF00">method is not supported or</span> <span style="background: #FFFF00">if the service
 </span>name <span style="background: #FFFF00">was not found or if the conditions allowing </span>to deregister<span style="background: #FFFF00"> the service
 name are not satisfied</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @<strike>exception</strike><span style="background: #FFFF00">see</span> <strike>ISOException</strike><span style="background: #FFFF00">#registerService
</span> <strike>with</strike><span style="background: #FFFF00">@see</span> <strike>the</strike><span style="background: #FFFF00">GPSystem#FAMILY_CVM
</span> <strike>following</strike><span style="background: #FFFF00">@see</span> <strike>reason</strike><span style="background: #FFFF00">GPSystem#FAMILY_SECURE_CHANNEL
</span> <strike>code:</strike><span style="background: #FFFF00">@see</span> <strike>
</strike><span style="background: #FFFF00">GPSystem#FAMILY_USSM
</span> <strike>ISO7816.SW</strike><span style="background: #FFFF00">@see GPSystem#FAMILY_AUTHORITY
 @see GPSystem#FAMILY</span>_<strike>CONDITIONS</strike><span style="background: #FFFF00">HTTP_ADMINISTRATION
 @see GPSystem#FAMILY</span>_<strike>NOT</strike><span style="background: #FFFF00">HTTP</span>_<strike>SATISFIED</strike><span style="background: #FFFF00">REPORT</span></blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.getAID()"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.getAID_changed()" class="hiddenlink">AID <b>getAID()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns </strike>the <strike>Application's </strike>AID <strike>registered in the current GlobalPlatform Registry's entry.
 Notes:
 The</strike><span style="background: #FFFF00">of</span> <strike>OPEN checks that the requesting on-card entity has </strike>the <strike>Global Service Privilege and is associated</strike><span style="background: #FFFF00">Application</span> <strike>
 with</strike><span style="background: #FFFF00">corresponding to</span> <code>this<strike> registry</strike></code> entry<strike>;
 The OPEN checks that the service name is</strike><span style="background: #FFFF00">.

</span> <strike>registered</strike><span style="background: #FFFF00">@return</span> <strike>as</strike><A HREF="1.6\javadoc\core\AID.html"><TT><span style="background: #FFFF00">AID</TT></A></span> <strike>unique for</strike><span style="background: #FFFF00">instance identifying</span> the <strike>requesting on-card entity.
 
</strike><span style="background: #FFFF00">Application</span> <strike>@return</strike><span style="background: #FFFF00">corresponding</span> <strike>the</strike><span style="background: #FFFF00">to
</span> <code><strike>AID</strike><span style="background: #FFFF00">this</span></code> <strike>object</strike><span style="background: #FFFF00">entry</span>.</blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.getPrivileges(byte[], short)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.getPrivileges_changed(byte[], short)" class="hiddenlink">short <b>getPrivileges(byte[], short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns all </strike>the <strike>Privileges bytes</strike><span style="background: #FFFF00">Privilege</span> <strike>registered in</strike><span style="background: #FFFF00">Bytes of</span> the <strike>current</strike><span style="background: #FFFF00">Application</span> <strike>GlobalPlatform registry</strike><span style="background: #FFFF00">corresponding to
</span> <code><span style="background: #FFFF00">this</code> </span>entry.<strike>
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>The </strike>byte array where Privileges <strike>bytes</strike><span style="background: #FFFF00">Bytes</span> <strike>are to</strike><span style="background: #FFFF00">shall</span> be <strike>stored</strike><span style="background: #FFFF00">written</span>.
 @param sOffset <strike>The </strike>offset <strike>in</strike><span style="background: #FFFF00">within</span> <code>baBuffer<strike> at</strike></code> <strike>which to begin the Privileges bytes</strike><span style="background: #FFFF00">where Privileges Bytes
 shall be written</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <code>sOffset</code> + <strike>Length</strike><span style="background: #FFFF00">number</span> of <strike>the</strike><span style="background: #FFFF00">Privilege</span> <strike>Privileges</strike><span style="background: #FFFF00">Bytes written to
 <code>baBuffer</code></span>.<strike>
</strike><span style="background: #FFFF00">

</span> @exception <strike>ArrayIndexOutOfBoundsException</strike><span style="background: #FFFF00">SecurityException</span> if <strike>storing</strike><code><span style="background: #FFFF00">baBuffer</code> is not accessible</span> <span style="background: #FFFF00">in
 </span>the <strike>Privileges</strike><span style="background: #FFFF00">caller's context e.g.</span> <strike>bytes</strike><code><span style="background: #FFFF00">baBuffer</code> is</span> <strike>would</strike><span style="background: #FFFF00">not</span> <span style="background: #FFFF00">a <em>global</em></span>
 <strike>cause access outside</strike><span style="background: #FFFF00">array nor an</span> array <strike>bounds</strike><span style="background: #FFFF00">belonging</span> <strike>or</strike><span style="background: #FFFF00">to</span> the <strike>sOffset</strike><span style="background: #FFFF00">caller context.
 @exception NullPointerException if <code>baBuffer</code></span> is <strike>negative</strike><code><span style="background: #FFFF00">null</code>.
 @exception ArrayIndexOutOfBoundsException if writing Privileges Bytes would
 cause access of data outside array bounds</span>.</blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.getState()"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.getState_changed()" class="hiddenlink">byte <b>getState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns </strike>the Life Cycle State <strike>registered in</strike><span style="background: #FFFF00">of</span> the <strike>current GlobalPlatform Registry</strike><span style="background: #FFFF00">Application corresponding to
</span> <code><span style="background: #FFFF00">this</code> </span>entry.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>The</strike><span style="background: #FFFF00">the</span> Life Cycle State <strike>as defined in section</strike><span style="background: #FFFF00">of the Application corresponding</span> <strike>11.11</strike><span style="background: #FFFF00">to
 <code>this</code> entry</span>.</blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.isAssociated(AID)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.isAssociated_changed(javacard.framework.AID)" class="hiddenlink">boolean <b>isAssociated(AID)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Checks</span> <strike>method allows to</strike><span style="background: #FFFF00">whether</span> <strike>verify if the entity</strike><span style="background: #FFFF00">the Application corresponding to</span> <strike>whose</strike><code><span style="background: #FFFF00">this</code></span> <strike>AID is provided in</strike><span style="background: #FFFF00">entry is
 associated with</span> the <strike>input</strike><span style="background: #FFFF00">specified</span> <strike>parameters</strike><span style="background: #FFFF00">Security</span> <strike>is</strike><span style="background: #FFFF00">Domain.<p>

</span> <strike>registered
 as the associated Security Domain of</strike><span style="background: #FFFF00">The OPEN shall check that the specified</span> <strike>this</strike><code><span style="background: #FFFF00">sdAID</code></span> <strike>GPRegistryEntry.
</strike><span style="background: #FFFF00">indeed
</span> <strike>Notes:
</strike><span style="background: #FFFF00">identifies</span> <strike>The</strike><span style="background: #FFFF00">a</span> <strike>OPEN determines if</strike><span style="background: #FFFF00">Security Domain present</span> <span style="background: #FFFF00">on </span>the <strike>SDAID</strike><span style="background: #FFFF00">card,</span> <strike>is registered in</strike><span style="background: #FFFF00">and check that</span> <strike>the</strike><span style="background: #FFFF00">the
 Application</span> <strike>current GlobalPlatform</strike><span style="background: #FFFF00">corresponding to</span> <strike>Registry's</strike><code><span style="background: #FFFF00">this</code></span> entry <strike>as 
 the associated</strike><span style="background: #FFFF00">is associated with
 this</span> Security Domain.<strike>
</strike> <strike>
</strike><span style="background: #FFFF00">If not, this method shall return
 <code>false</code>.<p>

</span> @param <strike>SDAID object</strike><span style="background: #FFFF00">sdAID AID</span> of <strike>the investigated</strike><span style="background: #FFFF00">a</span> Security Domain.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>True</strike><code><span style="background: #FFFF00">true</code></span> if the <strike>GP Registry</strike><span style="background: #FFFF00">Application</span> <strike>references</strike><span style="background: #FFFF00">corresponding</span> <strike>the Security</strike><span style="background: #FFFF00">to
</span> <strike>Domain</strike><code><span style="background: #FFFF00">this</code></span> <strike>as being</strike><span style="background: #FFFF00">entry is</span> associated with <strike>this GPRegistryEntry, or
     </strike><span style="background: #FFFF00">the</span> <span style="background: #FFFF00">specified</span> <span style="background: #FFFF00">Security</span> <span style="background: #FFFF00">Domain,
</span> <strike>False</strike><code><span style="background: #FFFF00">false</code></span> otherwise<span style="background: #FFFF00">.</span></blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.isPrivileged(byte)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.isPrivileged_changed(byte)" class="hiddenlink">boolean <b>isPrivileged(byte)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Checks</span> <strike>method allows</strike><span style="background: #FFFF00">whether</span> <strike>an</strike><span style="background: #FFFF00">the</span> Application <strike>(e.g. a CVM Application)</strike><span style="background: #FFFF00">corresponding</span> to <strike>verify if a given Privilege is</strike><code><span style="background: #FFFF00">this</code></span> <strike>registered
 in this GPRegistryEntry</strike><span style="background: #FFFF00">entry has
 the specified</span> <strike>(e.g</strike><span style="background: #FFFF00">privilege</span>.<p><span style="background: #FFFF00">

</span> <strike>check</strike><span style="background: #FFFF00">If</span> the <strike>CVM</strike><span style="background: #FFFF00">specified</span> <strike>Management </strike>privilege <strike>of another</strike><span style="background: #FFFF00">is</span> <strike>Application</strike><span style="background: #FFFF00">unknown,</span> <strike>invoking 
 the</strike><span style="background: #FFFF00">this method shall</span> <strike>CVM.update()</strike><span style="background: #FFFF00">return
</span> <strike>method)</strike><code><span style="background: #FFFF00">false</code></span>.<strike>
</strike><span style="background: #FFFF00">

</span> @param bPrivilege the privilege number to <strike>verify</strike><span style="background: #FFFF00">check</span>, <strike>as</strike><span style="background: #FFFF00">i.e. one</span> <strike>defined in</strike><span style="background: #FFFF00">of the
</span> <strike>Table</strike><code><span style="background: #FFFF00">PRIVILEGE_XXX</code></span> <strike>6-1</strike><span style="background: #FFFF00">constants</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>True</strike><code><span style="background: #FFFF00">true</code></span> <strike> </strike>if <strike>at least </strike>the <strike>referenced Privilege is registered in</strike><span style="background: #FFFF00">Application</span> <strike>the GP</strike><span style="background: #FFFF00">corresponding to
</span> <strike>Registry</strike><code><span style="background: #FFFF00">this</code></span> entry<strike>, or
  </strike> <span style="background: #FFFF00">has</span> <strike>     False if </strike>the <strike>referenced Privilege is not registered in the</strike><span style="background: #FFFF00">specified</span> <strike>GP</strike><span style="background: #FFFF00">privilege,</span> <strike>Registry</strike><code><span style="background: #FFFF00">false</code>
</span> <strike>entry</strike><span style="background: #FFFF00">otherwise</span>.</blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.registerService(short)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.registerService_changed(short)" class="hiddenlink">void <b>registerService(short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Registers</span> <strike>method</strike><span style="background: #FFFF00">a service name</span> <strike>allows</strike><span style="background: #FFFF00">identifying</span> a <strike>Global</strike><span style="background: #FFFF00">service</span> <strike>Services Application</strike><span style="background: #FFFF00">provided by</span> <strike>(e.g</strike><span style="background: #FFFF00">the Application
 corresponding to <code>this</code> entry</span>.<p><span style="background: #FFFF00">
</span> <strike>a CVM</strike><span style="background: #FFFF00">
 The</span> <strike>Application</strike><span style="background: #FFFF00">specified service name (<code>sServiceName</code></span>) <strike>to register</strike><span style="background: #FFFF00">shall be</span> <strike>a</strike><span style="background: #FFFF00">unique
 among</span> <strike>unique</strike><span style="background: #FFFF00">all</span> <span style="background: #FFFF00">the </span>service <strike>
 identifier</strike><span style="background: #FFFF00">names previously</span> <strike>within</strike><span style="background: #FFFF00">registered in</span> the <strike>GlobalPlatform</strike><span style="background: #FFFF00">GlobalPlatform
</span> Registry<span style="background: #FFFF00"> using this method</span>.<span style="background: #FFFF00"> Following successful invocation of this method,</span>
 <strike>Notes</strike><span style="background: #FFFF00">this service name is known to be uniquely registered</span>:<strike>
</strike> <span style="background: #FFFF00">no other Application
 on the card will be able to register the same service name (until this
 service name is deregistered (see <A HREF="1.6\javadoc\core\.html#deregisterService"><TT>.deregisterService</TT></A>)). If the
 service name identifies a family of service, no other Application on the
 card will be able to register a service of that family.<p>

 </span>The OPEN <strike>checks</strike><span style="background: #FFFF00">shall first</span> <span style="background: #FFFF00">check </span>that the <strike>requesting</strike><span style="background: #FFFF00">Application invoking</span> <strike>on-card</strike><span style="background: #FFFF00">this method
</span> <strike>entity</strike><span style="background: #FFFF00">corresponds</span> <span style="background: #FFFF00">to <code>this</code> entry and that it </span>has the Global <strike>Service</strike><span style="background: #FFFF00">Service
</span> Privilege<span style="background: #FFFF00">.<p>

</span> <strike>and is associated</strike><span style="background: #FFFF00">Then the OPEN</span> <strike>
</strike><span style="background: #FFFF00">shall check</span> <strike>with</strike><span style="background: #FFFF00">that</span> the <strike>current</strike><span style="background: #FFFF00">specified service name:<ul>

 <li>is not already uniquely registered in the</span> GlobalPlatform Registry<strike> entry</strike>;<strike>
</strike> <strike>The</strike><span style="background: #FFFF00">if
</span> <strike>OPEN checks that</strike><span style="background: #FFFF00">the service name</span> <span style="background: #FFFF00">identifies an entire family of services, then </span>the <strike>requested</strike><span style="background: #FFFF00">OPEN
 shall</span> <span style="background: #FFFF00">check that no </span>service <strike>identifier</strike><span style="background: #FFFF00">name of that family is registered.

 <li>was previously recorded for the Application</span> <strike>matches with</strike><span style="background: #FFFF00">corresponding to
</span> <code><span style="background: #FFFF00">this</code> entry </span>(<strike>one</strike><span style="background: #FFFF00">i.e.</span> <span style="background: #FFFF00">specified as part </span>of<span style="background: #FFFF00"> System Install
 Parameters in the INSTALL command</span>)<span style="background: #FFFF00">.

 </ul>

 If</span> <span style="background: #FFFF00">any of </span>the <strike>Service</strike><span style="background: #FFFF00">above conditions is not satisfied, this method shall throw an
 exception</span> <strike>Parameter</strike>(<strike>s</strike><span style="background: #FFFF00">see below</span>)<span style="background: #FFFF00">.</span> <strike>
</strike><span style="background: #FFFF00">Otherwise,</span> <strike>recorded</strike><span style="background: #FFFF00">the specified service name shall be
</span> <span style="background: #FFFF00">uniquely registered </span>in the <strike>current </strike>GlobalPlatform Registry<span style="background: #FFFF00">.<p>

</span> <strike>entry;
</strike><span style="background: #FFFF00">@param</span> <strike>The</strike><span style="background: #FFFF00">sServiceName</span> <strike>OPEN</strike><span style="background: #FFFF00">the service</span> <strike>checks</strike><span style="background: #FFFF00">name</span> that <strike>the</strike><span style="background: #FFFF00">shall be</span> <span style="background: #FFFF00">uniquely registered.<p>

 A </span>service <strike>identifier</strike><span style="background: #FFFF00">name</span> is <strike>not</strike><span style="background: #FFFF00">encoded</span> <strike>already registered</strike><span style="background: #FFFF00">on 2</span> <strike>as</strike><span style="background: #FFFF00">bytes,</span> <strike>unique by any other</strike><span style="background: #FFFF00">the 1st byte identifying</span> <strike>entry</strike><span style="background: #FFFF00">a family of
 services</span> <strike>in
</strike><span style="background: #FFFF00">and</span> the <strike>GlobalPlatform</strike><span style="background: #FFFF00">2nd</span> <strike>Registry</strike><span style="background: #FFFF00">byte identifying a service within that family</span>.<strike>
</strike> <strike>
</strike><span style="background: #FFFF00">If</span> <strike>@param</strike><span style="background: #FFFF00">the
</span> <strike>sServiceName</strike><span style="background: #FFFF00">2nd byte is set to <code>0x00</code>, the caller of this method is
 registering an entire family of service.<p>

 The <A HREF="1.6\javadoc\core\GPSystem.html"><TT>GPSystem</TT></A> class defines a</span> <span style="background: #FFFF00">set of constants
 <code>FAMILY_XXX</code> (of </span>the <strike>unique</strike><code><span style="background: #FFFF00">byte</code> type) that may be used to
 build</span> <span style="background: #FFFF00">a </span>service name <span style="background: #FFFF00">(of the <code>short</code> type) suitable </span>to <strike>register</strike><span style="background: #FFFF00">invoke
 this method as shown in the following examples:<ul>

 <li><code>(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_CVM"><TT>GPSystem</span>.<strike>
</strike><span style="background: #FFFF00">FAMILY_CVM</TT></A><8)|0x11)</code>

 <li><code>(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_HTTP_ADMINISTRATION"><TT>GPSystem.FAMILY_HTTP_ADMINISTRATION</TT></A><8)|0x00)</code>

</span> </ul><span style="background: #FFFF00">

 </span>@exception ISOException <strike>with</strike><span style="background: #FFFF00">if this method is not supported or if the
 conditions allowing to</span> <span style="background: #FFFF00">register </span>the <strike>following reason</strike><span style="background: #FFFF00">service name</span> <strike>code:</strike><span style="background: #FFFF00">are</span> <strike>
</strike><span style="background: #FFFF00">not</span> <strike>ISO7816</strike><span style="background: #FFFF00">satisfied</span>.<strike>SW</strike><span style="background: #FFFF00">

 @see #deregisterService
 @see GPSystem#getService
 @see GPSystem#FAMILY</span>_<strike>CONDITIONS</strike><span style="background: #FFFF00">CVM
 @see GPSystem#FAMILY</span>_<strike>NOT</strike><span style="background: #FFFF00">SECURE</span>_<strike>SATISFIED</strike><span style="background: #FFFF00">CHANNEL
 @see GPSystem#FAMILY_USSM
 @see GPSystem#FAMILY_AUTHORITY
 @see GPSystem#FAMILY_HTTP_ADMINISTRATION
 @see GPSystem#FAMILY_HTTP_REPORT</span></blockquote>
<A NAME="org.globalplatform.GPRegistryEntry.dmethod.setState(byte)"></A><a href="org.globalplatform.GPRegistryEntry.html" class="hiddenlink">Class <b>GPRegistryEntry</b></a>, <a href="org.globalplatform.GPRegistryEntry.html#org.globalplatform.GPRegistryEntry.setState_changed(byte)" class="hiddenlink">boolean <b>setState(byte)</b></a><br><br><blockquote><span style="background: #FFFF00">Sets the Life Cycle state of the Application corresponding to
 <code>this</code> entry.<p>
 
 </span>This method <strike>allows</strike><span style="background: #FFFF00">enforces</span> the Life Cycle <strike>state</strike><span style="background: #FFFF00">State</span> <strike>of this GPRegistryEntry to</strike><span style="background: #FFFF00">transition rules described in
</span> <strike>be</strike><span style="background: #FFFF00">Card Specification v2.2.1 section 5.<p>
 
 If <code>this</code> entry</span> <strike>transitioned</strike><span style="background: #FFFF00">corresponds</span> to the <span style="background: #FFFF00">Issuer Security Domain (ISD),</span>
 <span style="background: #FFFF00">then the OPEN shall check that the </span>requested <strike>target</strike><span style="background: #FFFF00">transition complies</span> <strike>state</strike><span style="background: #FFFF00">with Card
 Life Cycle State transition rules</span>.<strike>
</strike><span style="background: #FFFF00"> If needed, the OPEN shall check that the
 Application</span> <span style="background: #FFFF00">invoking this method has the Card Lock Privilege or the Card
 Terminate Privilege.</span><p><strike>Notes</strike><span style="background: #FFFF00">
 
 Otherwise, the following rules shall apply</span>:<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>A</strike><span style="background: #FFFF00">If</span> <strike>transition</strike><code><span style="background: #FFFF00">this</code></span> <strike>request</strike><span style="background: #FFFF00">entry corresponds</span> to <span style="background: #FFFF00">a Security Domain, then the
 OPEN shall check that </span>the <span style="background: #FFFF00">requested transition complies with Security
 Domains' </span>Life Cycle State <strike>INSTALLED</strike><span style="background: #FFFF00">transition</span> <strike>shall</strike><span style="background: #FFFF00">rules.

</span> <strike>be</strike><li><span style="background: #FFFF00">If</span> <strike>rejected;</strike><code><span style="background: #FFFF00">this</code> entry does not correspond to a Security Domain,</span>
 <strike>A</strike><span style="background: #FFFF00">then the OPEN shall check the requested</span> transition <strike>request</strike><span style="background: #FFFF00">complies</span> <strike>to</strike><span style="background: #FFFF00">with
 Applications'</span> Life Cycle <span style="background: #FFFF00">State transition rules.

 <li>If this method is invoked to transition an Application (or Security
 Domain) from the INSTALLED </span>state <strike>other than</strike><span style="background: #FFFF00">to the</span> <strike>APPLICATION_LOCKED</strike><span style="background: #FFFF00">SELECTABLE</span> <strike>and</strike><span style="background: #FFFF00">state,</span> <strike>APPLICATION_UNLOCKED</strike><span style="background: #FFFF00">then</span> <strike>
</strike><span style="background: #FFFF00">the request
</span> shall be <strike>accepted</strike><span style="background: #FFFF00">rejected.
</span> <strike>only</strike><span style="background: #FFFF00">
</span> <strike>if</strike><li><span style="background: #FFFF00">If</span> the <strike>invoking Application</strike><span style="background: #FFFF00">high order</span> <span style="background: #FFFF00">bit</span> <strike>corresponds</strike><span style="background: #FFFF00">(b8) of <code>bState</code> is set</span> to <strike>this</strike><span style="background: #FFFF00">1,</span> <strike>GPRegistryEntry;
</strike><span style="background: #FFFF00">then</span> <strike>An</strike><span style="background: #FFFF00">the
</span> <strike>Application</strike><span style="background: #FFFF00">call to this method</span> shall be <strike>able</strike><span style="background: #FFFF00">interpreted as</span> <span style="background: #FFFF00">an attempt </span>to lock <strike>and shall</strike><span style="background: #FFFF00">an
 Application</span> <strike>not</strike><span style="background: #FFFF00">(or</span> <strike>be</strike><span style="background: #FFFF00">Security Domain),</span> <strike>able to</strike><span style="background: #FFFF00">and other</span> <strike>unlock</strike><span style="background: #FFFF00">bits of</span> <strike>itself;</strike><code><span style="background: #FFFF00">bState</code></span>
 <span style="background: #FFFF00">shall be ignored (b7-b1).

 </span><li><strike>Only</strike><span style="background: #FFFF00">If</span> <code><span style="background: #FFFF00">this</code> entry corresponds to </span>an Application <strike>with</strike><span style="background: #FFFF00">(or Security
</span> <strike>GlobalLock</strike><span style="background: #FFFF00">Domain)</span> <strike>privilege</strike><span style="background: #FFFF00">that</span> <strike>or</strike><span style="background: #FFFF00">is currenly locked, then only</span> the <strike>directly or indirectly</strike><span style="background: #FFFF00">high order bit</span> <strike>associated</strike><span style="background: #FFFF00">(b8)</span> <strike>Security</strike><span style="background: #FFFF00">of
</span> <strike>Domain
</strike><code><span style="background: #FFFF00">bState</code></span> <strike>of</strike><span style="background: #FFFF00">shall be taken into account and, if it is set to 0 then
 the call to</span> this <strike>GPRegistryEntry</strike><span style="background: #FFFF00">method</span> shall be <strike>able</strike><span style="background: #FFFF00">interpreted as an attempt</span> to <strike>lock</strike><span style="background: #FFFF00">unlock</span> <span style="background: #FFFF00">the
 Application (</span>or <strike>unlock</strike><span style="background: #FFFF00">Security</span> <strike>this</strike><span style="background: #FFFF00">Domain).</span> <strike>GPRegistry</strike><span style="background: #FFFF00">Other</span> <strike>Entry;
</strike><span style="background: #FFFF00">bits of <code>bState</code> shall
 be ignored (b7-b1).

</span> <li><strike>This</strike><span style="background: #FFFF00">If this</span> method <span style="background: #FFFF00">is invoked to lock or unlock an Application (or Security
 Domain), then the OPEN </span>shall <strike>fail if</strike><span style="background: #FFFF00">check that</span> <strike>this</strike><span style="background: #FFFF00">the Application invoking this
 method</span> <strike>GPRegsitryEntry</strike><span style="background: #FFFF00">either</span> corresponds to <code><span style="background: #FFFF00">this</code> entry or has </span>the <strike>Issuer Security Domain</strike><span style="background: #FFFF00">Global Lock
 Privilege</span>.<strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
</strike><span style="background: #FFFF00">

</span> @param bState the <strike>target</strike><span style="background: #FFFF00">new</span> <strike>state</strike><span style="background: #FFFF00">Life Cycle State. See Card Specification v2.2.1
 section 11.1.1</span> for <strike>this</strike><span style="background: #FFFF00">details on Life Cycle</span> <strike>GPRegistryEntry</strike><span style="background: #FFFF00">State Coding</span>.<strike>
</strike> <strike>@return</strike><span style="background: #FFFF00">A</span> <strike>True</strike><span style="background: #FFFF00">value</span> <span style="background: #FFFF00">of</span> <strike>if</strike><A HREF="1.6\javadoc\core\GPSystem.html#APPLICATION_LOCKED"><TT><span style="background: #FFFF00">GPSystem.APPLICATION_LOCKED</TT></A></span> <strike>the</strike><span style="background: #FFFF00">(resp.</span> <strike>transition</strike><span style="background: #FFFF00">0x00)</span> <strike>is</strike><span style="background: #FFFF00">may</span> <strike>successful,</strike><span style="background: #FFFF00">be used to request locking
 (resp. unlocking) an Application or a Security Domain (other than</span> <strike>or
</strike><span style="background: #FFFF00">the</span> <span style="background: #FFFF00">ISD).

</span> <span style="background: #FFFF00">@return</span> <code><span style="background: #FFFF00">true</code></span> <span style="background: #FFFF00">if</span> <span style="background: #FFFF00">the</span> <span style="background: #FFFF00">transition</span> <span style="background: #FFFF00">was</span> <span style="background: #FFFF00">successful,
</span> <strike>False</strike><code><span style="background: #FFFF00">false</code></span> otherwise.</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.GPSystem!class"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a><br><br><blockquote><strike>The GPSystem</strike><span style="background: #FFFF00">This</span> class exposes a subset of the behavior of the OPEN to the
 outside world. The OPEN implements and enforces a Card Issuer's security
 policy relating to these services. <strike>This OPEN class</strike><span style="background: #FFFF00">It</span> provides functionality at
 the same level as the JCRE, i.e. the "system" context with special
 privileges. <strike>This class is composed of static methods visible to all applets
 importing the globalplatform package.</strike>
 @since <ul>
 <li>export file version 1.0: initial version.
 <li>export file version 1.1: new services and/or constants added.
 <li>export file version 1.3: new services and/or constants added.
 <li>export file version 1.5: new services and/or constants added.
 <li><span style="background: #FFFF00">export file version 1.6: reviewed overall description of this interface.
 </span></ul></blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getCVM(byte)"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getCVM_changed(byte)" class="hiddenlink">CVM <b>getCVM(byte)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method</strike><span style="background: #FFFF00">a reference</span> <strike>returns</strike><span style="background: #FFFF00">to</span> a <strike>handle</strike><A HREF="1.6\javadoc\core\CVM.html"><TT><span style="background: #FFFF00">CVM</TT></A></span> <strike>to</strike><span style="background: #FFFF00">instance</span> <span style="background: #FFFF00">provided by </span>the <strike>CVM</strike><span style="background: #FFFF00">OPEN.<p>

</span> <strike>interface</strike><span style="background: #FFFF00">Since export file version 1</span>.<strike>
</strike><span style="background: #FFFF00">1,</span> <strike>
</strike><span style="background: #FFFF00">this</span> <strike>Notes</strike><span style="background: #FFFF00">method allows looking up for CVM
 instances registered as Global Services by so-called Global Services
 Applications (i.e. Applications having the Global Service Privilege) and
 the following mechanism is defined to retrieve such instances</span>:<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><span style="background: #FFFF00">The </span>OPEN <strike>searches</strike><span style="background: #FFFF00">looks up in</span> the GlobalPlatform Registry for <strike>the CVM</strike><span style="background: #FFFF00">a Global</span> <span style="background: #FFFF00">Services
 </span>Application <strike>that</strike><span style="background: #FFFF00">(i.e.</span> <strike>has</strike><span style="background: #FFFF00">having</span> the Global <strike>Service
</strike><span style="background: #FFFF00">Service</span> <strike>privilege</strike><span style="background: #FFFF00">Privilege)</span> <strike>and is uniquely</strike><span style="background: #FFFF00">that registered a
</span> <strike>registered</strike><span style="background: #FFFF00">Global Service</span> with <span style="background: #FFFF00">the specified </span><code><strike>FAMILY_CVM</strike><span style="background: #FFFF00">bCVMIdentifier</span></code> <strike>and this </strike><span style="background: #FFFF00">identifier
 for the</span> <strike>bCVMIdentifier</strike><A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT><span style="background: #FFFF00">.FAMILY_CVM</TT></A> family,</span> or <strike>is</strike><span style="background: #FFFF00">that</span> uniquely <strike>
 </strike>registered <span style="background: #FFFF00">a Global
 Service </span>for the entire <A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT><span style="background: #FFFF00">.</span>FAMILY_CVM<strike>;
</strike></TT></A><span style="background: #FFFF00"> family.

</span> <li><span style="background: #FFFF00">The </span>OPEN <strike>invokes the</strike><span style="background: #FFFF00">then retrieves</span> <strike>Applet.getShareableInterfaceObject()</strike><span style="background: #FFFF00">the</span> <strike>method</strike><span style="background: #FFFF00">corresponding</span> <strike>of</strike><A HREF="1.6\javadoc\core\GlobalService.html"><TT><span style="background: #FFFF00">GlobalService</TT></A>
</span> <strike>the corresponding
 CVM Application</strike><span style="background: #FFFF00">instance by invoking the</span> <A HREF="1.6\javadoc\core\Applet.html#getShareableInterfaceObject"><TT><span style="background: #FFFF00">Applet</span>.<strike> OPEN</strike><span style="background: #FFFF00">getShareableInterfaceObject</TT></A></span> <strike>provides the following parameters to the
</strike><span style="background: #FFFF00">method
 of that Global Services Application</span> <strike>Applet.getShareableInterfaceObject()</strike><span style="background: #FFFF00">with</span> <strike>method:</strike><span style="background: #FFFF00">the</span> <strike>#</strike><code>clientAID<strike>#</strike></code><span style="background: #FFFF00">
</span> <strike>is</strike><span style="background: #FFFF00">parameter</span> set to the AID of <strike>the
</strike><span style="background: #FFFF00">the</span> current applet context (i.e. the <strike>requesting</strike><span style="background: #FFFF00">one
</span> <strike>on-card</strike><span style="background: #FFFF00">invoking this</span> <strike>entity</strike><span style="background: #FFFF00">method</span>) and <strike>#</strike><span style="background: #FFFF00">the <code></span>parameter<strike># is</strike></code><span style="background: #FFFF00"> parameter</span> set <strike>to 
</strike><span style="background: #FFFF00">to
</span> <A HREF="1.6\javadoc\core\.html#GLOBAL_SERVICE_IDENTIFIER"><TT><span style="background: #FFFF00">.</span>GLOBAL_SERVICE_IDENTIFIER<strike>;</strike></TT></A><span style="background: #FFFF00">.</span>
 <span style="background: #FFFF00">
 </span><li>The <strike>CVM Application returns the</strike><span style="background: #FFFF00">OPEN</span> <strike>reference of the</strike><span style="background: #FFFF00">then retrieves a</span> <A HREF="1.6\javadoc\core\Shareable.html"><TT>Shareable</TT></A> <strike>Interface Object implementing</strike><span style="background: #FFFF00">instance by invoking</span> the
 <strike>GlobalService interface. OPEN invokes the </strike><A HREF="1.6\javadoc\core\GlobalService.html#getServiceInterface"><TT>GlobalService.getServiceInterface<strike>()</strike></TT></A> method <strike>with
 the following</strike><span style="background: #FFFF00">with</span> <strike>parameters:</strike><span style="background: #FFFF00">the
</span> <code><strike>#GPRegistryEntry#</strike><span style="background: #FFFF00">clientRegistryEntry</span></code> <strike>is</strike><span style="background: #FFFF00">parameter</span> set to the <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT>GPRegistryEntry</TT></A> <strike>interface</strike><span style="background: #FFFF00">instance</span> of the current <strike>applet
</strike><span style="background: #FFFF00">applet</span> context (i.e. the <strike>requesting</strike><span style="background: #FFFF00">one
</span> <strike>on-card</strike><span style="background: #FFFF00">invoking</span> <strike>entity</strike><span style="background: #FFFF00">this method</span>), <span style="background: #FFFF00">with the </span><code><strike>#</strike>sServiceName<strike>#</strike></code> <strike>first byte is </strike>set <strike>to</strike><span style="background: #FFFF00">to
</span> <code><span style="background: #FFFF00">(<A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT>.</span>FAMILY_CVM<strike>
 and second byte to </strike></TT></A><<span style="background: #FFFF00">8|</span>bCVMIdentifier<span style="background: #FFFF00">)</span></code>, <span style="background: #FFFF00">the
 <code></span>baBuffer</code> <strike>is</strike><span style="background: #FFFF00">parameter</span> set to <code>null<strike> (indicating no buffer)</strike></code>, <strike>
</strike><span style="background: #FFFF00">and</span> <span style="background: #FFFF00">the
 <code></span>sOffset</code> and <code>sLength<strike> are</strike></code> set to zero<strike>;
</strike><span style="background: #FFFF00">.

</span> <li><strike>The</strike><span style="background: #FFFF00">Finally,</span> <strike>CVM Application returns</strike><span style="background: #FFFF00">the OPEN casts</span> the <strike>reference</strike><span style="background: #FFFF00">retrieved <A HREF="1.6\javadoc\core\Shareable.html"><TT>Shareable</TT></A> instance to the
 <A HREF="1.6\javadoc\core\CVM.html"><TT>CVM</TT></A> interface before returning it.

</span> <li><span style="background: #FFFF00">If any </span>of the <strike>Shareable</strike><span style="background: #FFFF00">above steps fails,</span> <strike>Interface Object implementing</strike><span style="background: #FFFF00">the requested CVM</span> <strike>
</strike><span style="background: #FFFF00">instance is deemed
 to be unavailable.

 </ul>

</span> <span style="background: #FFFF00">For backward compatibility, </span>the <A HREF="1.6\javadoc\core\.html#CVM_GLOBAL_PIN"><TT><span style="background: #FFFF00">.</span>CVM<span style="background: #FFFF00">_GLOBAL_PIN</TT></A></span> <strike>interface</strike><span style="background: #FFFF00">constant</span> <strike>corresponding</strike><span style="background: #FFFF00">can still
 be used</span> to <span style="background: #FFFF00">access a Global Service registered with the </span><code><strike>bCVMIdentifier</strike><span style="background: #FFFF00">(<A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT>.FAMILY_CVM</TT></A><8|<A HREF="1.6\javadoc\core\.html#CVM_GLOBAL_PIN"><TT>.CVM_GLOBAL_PIN</TT></A>)</span></code><span style="background: #FFFF00"> identifier, or uniquely
 registered for the entire <A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT>.FAMILY_CVM</TT></A> family</span>. <strike>
</strike><span style="background: #FFFF00">Whether such</span> <strike>This handle</strike><span style="background: #FFFF00">a
 service</span> is <strike>then</strike><span style="background: #FFFF00">available</span> <strike>returned by OPEN</strike><span style="background: #FFFF00">or not still</span> <strike>to</strike><span style="background: #FFFF00">depends on</span> the <strike>requesting</strike><span style="background: #FFFF00">issuer's</span> <strike>applet</strike><span style="background: #FFFF00">policy</span>.<strike>
 
</strike><span style="background: #FFFF00">

</span> @param bCVMIdentifier identifies the <strike>required</strike><span style="background: #FFFF00">requested</span> CVM <strike>interface</strike><span style="background: #FFFF00">instance</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>the</strike><span style="background: #FFFF00">requested</span> CVM <strike>interface object</strike><span style="background: #FFFF00">instance,</span> <strike>reference.
</strike><span style="background: #FFFF00">or</span> <code>null</code> if <strike>there is no matching</strike><span style="background: #FFFF00">the</span> <strike>CVM Interface in the GlobalPlatform Registry</strike><span style="background: #FFFF00">requested CVM
 instance is not available</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @see <span style="background: #FFFF00">#</span>CVM_GLOBAL_PIN</blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getCardContentState()"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getCardContentState_changed()" class="hiddenlink">byte <b>getCardContentState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns </strike>the Life Cycle State of the current applet context.<strike>
 
 Notes:
 The OPEN locates the entry of the current applet context in the Open Platform Registry and
 retrieves the Life Cycle State.
 
 </strike><p><strike>
</strike><span style="background: #FFFF00">

</span> @return the Life Cycle State of the current applet context.<strike>
</strike><span style="background: #FFFF00">

</span> @see <span style="background: #FFFF00">#</span>APPLICATION_<strike>INSTALLED,</strike><span style="background: #FFFF00">INSTALLED
 @see</span> <span style="background: #FFFF00">#</span>APPLICATION_<strike>SELECTABLE,</strike><span style="background: #FFFF00">SELECTABLE
</span> <strike>SECURITY_DOMAIN</strike><span style="background: #FFFF00">@see #APPLICATION</span>_<strike>PERSONALIZED</strike><span style="background: #FFFF00">LOCKED</span></blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getCardState()"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getCardState_changed()" class="hiddenlink">byte <b>getCardState()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns </strike>the Life Cycle State of the card.<strike>
 </strike><p><strike>
</strike><span style="background: #FFFF00">

</span> @return the Life Cycle State of the <strike>card
</strike><span style="background: #FFFF00">card.

</span> @see <span style="background: #FFFF00">#</span>CARD_OP_<strike>READY,</strike><span style="background: #FFFF00">READY
</span> <span style="background: #FFFF00">@see #</span>CARD_<strike>INITIALIZED,</strike><span style="background: #FFFF00">INITIALIZED
 @see</span> <span style="background: #FFFF00">#</span>CARD_<strike>SECURED,</strike><span style="background: #FFFF00">SECURED
 @see</span> <span style="background: #FFFF00">#</span>CARD_<strike>LOCKED,
</strike><span style="background: #FFFF00">LOCKED
 @see</span> <span style="background: #FFFF00">#</span>CARD_TERMINATED</blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getRegistryEntry(AID)"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getRegistryEntry_changed(javacard.framework.AID)" class="hiddenlink">GPRegistryEntry <b>getRegistryEntry(AID)</b></a><br><br><blockquote><span style="background: #FFFF00">Gets a <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT>GPRegistryEntry</TT></A> instance.<p>

 </span>This method allows <strike>an</strike><span style="background: #FFFF00">the</span> Application <strike>(e.g.</strike><span style="background: #FFFF00">associated</span> <strike>a</strike><span style="background: #FFFF00">with the current</span> <strike>CVM)</strike><span style="background: #FFFF00">applet
</span> <span style="background: #FFFF00">context </span>to <strike>access the GP</strike><span style="background: #FFFF00">get its own</span> <strike>Registry</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>entry</strike><span style="background: #FFFF00">instance</span> <strike>of</strike><span style="background: #FFFF00">or the one</span> <span style="background: #FFFF00">of
 </span>another Application.<strike>
</strike><span style="background: #FFFF00">

</span> If <strike>no AID is</strike><span style="background: #FFFF00">the</span> <strike>input,</strike><code><span style="background: #FFFF00">aid</code></span> <strike>this method provides</strike><span style="background: #FFFF00">parameter is not</span> <strike>the</strike><code><span style="background: #FFFF00">null</code></span> <strike>GP Registry entry of</strike><span style="background: #FFFF00">and does not
 identify</span> the <strike>requesting </strike>Application<strike>. 
 It returns</strike> <strike>a handle</strike><span style="background: #FFFF00">invoking this</span> <strike>to</strike><span style="background: #FFFF00">method,</span> the <strike>GPRegistryEntry interface.
</strike><span style="background: #FFFF00">OPEN</span> <strike>Notes:
</strike><span style="background: #FFFF00">shall</span> <strike>The</strike><span style="background: #FFFF00">check</span> <strike>OPEN verifies that the requesting Application</strike><span style="background: #FFFF00">that
 the Application invoking this method</span> has the Global Registry <strike>privilege</strike><span style="background: #FFFF00">Privilege. If
 not</span>, <strike>
 or is</strike><span style="background: #FFFF00">this method shall</span> <strike>the</strike><span style="background: #FFFF00">return <code>null</code>.<p>

 @param</span> <strike>Security Domain associated with</strike><span style="background: #FFFF00">aid the AID of</span> the Application <strike>being investigated,</strike><span style="background: #FFFF00">whose</span> <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span>
 <strike>or</strike><span style="background: #FFFF00">instance</span> is <strike>the</strike><span style="background: #FFFF00">requested.</span> <strike>investigated</strike><span style="background: #FFFF00">Use</span> <strike>Application</strike><code><span style="background: #FFFF00">null</code></span> <strike>itself.
</strike><span style="background: #FFFF00">to</span> <strike>
</strike><span style="background: #FFFF00">retrieve</span> <strike>
</strike><span style="background: #FFFF00">the</span> <strike>@param</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>reqAID identifies</strike><span style="background: #FFFF00">instance of</span> the <strike>required</strike><span style="background: #FFFF00">current</span> <strike>GPRegistryEntry interface</strike><span style="background: #FFFF00">applet context</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>The GPRegistryEntry interface reference corresponding to </strike>the <strike>input AID,</strike><span style="background: #FFFF00">requested</span> <strike>or
</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>null</strike><span style="background: #FFFF00">instance</span> if <strike>there is</strike><span style="background: #FFFF00">it</span> <strike>no Application in</strike><span style="background: #FFFF00">was found in
</span> the <strike>GP</strike><span style="background: #FFFF00">GlobalPlatform</span> Registry <strike>that corresponds to</strike><span style="background: #FFFF00">and</span> the <strike>input AID or
 if the</strike><span style="background: #FFFF00">Application</span> <strike>requesting Application is not authorized</strike><span style="background: #FFFF00">invoking this method is
 allowed</span> to access <strike>the corresponding GP Registry</strike><span style="background: #FFFF00">that</span> entry<strike>.
 @see</strike><span style="background: #FFFF00">,</span> <code><strike>AID</strike><span style="background: #FFFF00">null</span></code><strike>
</strike><span style="background: #FFFF00"> otherwise.

</span> @since export file version 1.1</blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getSecureChannel()"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getSecureChannel_changed()" class="hiddenlink">SecureChannel <b>getSecureChannel()</b></a><br><br><blockquote><strike>This method returns</strike><span style="background: #FFFF00">Gets</span> a <strike>handle to the </strike><A HREF="1.6\javadoc\core\SecureChannel.html"><TT>SecureChannel</TT></A> <strike>interface</strike><span style="background: #FFFF00">instance</span>.<strike>
 </strike><p><strike>Notes:
 The</strike><span style="background: #FFFF00">

</span> <strike>OPEN</strike><span style="background: #FFFF00">This method</span> <strike>locates</strike><span style="background: #FFFF00">allows</span> the <strike>entry</strike><span style="background: #FFFF00">Application</span> <strike>of</strike><span style="background: #FFFF00">associated</span> <span style="background: #FFFF00">with </span>the current <strike>applet</strike><span style="background: #FFFF00">applet
</span> context <strike>in the</strike><span style="background: #FFFF00">to</span> <strike>Open Platform</strike><span style="background: #FFFF00">retrieve a</span> <strike>Registry</strike><A HREF="1.6\javadoc\core\SecureChannel.html"><TT><span style="background: #FFFF00">SecureChannel</TT></A></span> <strike>to
 determine the</strike><span style="background: #FFFF00">instance provided by</span> <strike>application's</strike><span style="background: #FFFF00">its
</span> associated Security Domain<span style="background: #FFFF00">.<p>

 Since export file version 1.1</span>,<strike>
</strike> <strike>This</strike><span style="background: #FFFF00">although not</span> <span style="background: #FFFF00">required, this </span>method may <strike>be</strike><span style="background: #FFFF00">be
</span> implemented using <strike>a</strike><span style="background: #FFFF00">the</span> <strike>similar mechanism</strike><span style="background: #FFFF00">Global Service</span> <strike>as</strike><span style="background: #FFFF00">facility,</span> <strike>described for the</strike><span style="background: #FFFF00">in which case</span> <strike>getCVM</strike><A HREF="1.6\javadoc\core\SecureChannel.html"><TT><span style="background: #FFFF00">SecureChannel</TT></A></span> <strike>method</strike><span style="background: #FFFF00">instances would be registered by Security Domains as Global
 Services</span>.<strike>
</strike><span style="background: #FFFF00"> In this case, Security Domains shall</span> <strike>
</strike><span style="background: #FFFF00">check that they only provide
 such <A HREF="1.6\javadoc\core\SecureChannel.html"><TT>SecureChannel</TT></A> instances to their associated</span> <span style="background: #FFFF00">Applications.</span><p><strike>
</strike><span style="background: #FFFF00">

</span> @return the SecureChannel interface object reference.<span style="background: #FFFF00">

 @see #getCVM the GPSystem.getCVM() method for an example of how to access a Global Service.</span></blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.getService(AID, short)"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.getService_changed(javacard.framework.AID, short)" class="hiddenlink">GlobalService <b>getService(AID, short)</b></a><br><br><blockquote><strike>This method</strike><span style="background: #FFFF00">Gets a</span> <strike>returns</strike><A HREF="1.6\javadoc\core\GlobalService.html"><TT><span style="background: #FFFF00">GlobalService</TT></A></span> <strike>a handle</strike><span style="background: #FFFF00">instance matching</span> <strike>to</strike><span style="background: #FFFF00">the specified service name
 (<code>sServiceName</code>).<p>

 The <code>serverAID</code> parameter is optional (i.e. may be set</span> <span style="background: #FFFF00">to
 <code>null</code>) and identifies </span>the Global Services <strike>interface</strike><span style="background: #FFFF00">Application providing
</span> <strike>of</strike><span style="background: #FFFF00">the</span> <strike>a</strike><span style="background: #FFFF00">service.<p>

 The OPEN shall look for</span> <span style="background: #FFFF00">the </span>Global Services Application<strike>.</strike> <strike>
</strike><span style="background: #FFFF00">providing</span> <strike>Notes</strike><span style="background: #FFFF00">the
 service</span>:<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>The</strike><span style="background: #FFFF00">If the</span> <code>serverAID</code> parameter is <strike>optional:</strike><code><span style="background: #FFFF00">null</code>,</span> <strike>if</strike><span style="background: #FFFF00">then</span> <strike>not</strike><span style="background: #FFFF00">the
 OPEN</span> <strike>known</strike><span style="background: #FFFF00">shall</span> <strike>by</strike><span style="background: #FFFF00">look for</span> the <strike>requesting</strike><span style="background: #FFFF00">specified</span> <strike>on-card</strike><span style="background: #FFFF00">service</span> <strike>entity,</strike><span style="background: #FFFF00">name</span> <strike>it is</strike><span style="background: #FFFF00">among the</span> set <strike>to</strike><span style="background: #FFFF00">of</span> <strike>null;
</strike><span style="background: #FFFF00">uniquely
</span> <strike>The</strike><span style="background: #FFFF00">registered</span> <strike>sServiceName</strike><span style="background: #FFFF00">service</span> <strike>parameter</strike><span style="background: #FFFF00">names</span> <strike>is</strike><span style="background: #FFFF00">(see</span> <strike>mandatory</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html#registerService"><TT><span style="background: #FFFF00">GPRegistryEntry.registerService</TT></A>)</span>. <strike>When</strike><span style="background: #FFFF00">If
</span> the <strike>serverAID</strike><span style="background: #FFFF00">requested</span> <strike>is</strike><span style="background: #FFFF00">service name only identifies</span> <strike>Null</strike><span style="background: #FFFF00">a family of services</span>, <strike>
 the</strike><span style="background: #FFFF00">then the
</span> OPEN <strike>searches</strike><span style="background: #FFFF00">shall look for a uniquely registered service name of</span> the <strike>GlobalPlatform Registry</strike><span style="background: #FFFF00">requested
 family</span> <strike>for</strike><span style="background: #FFFF00">(the search strategy remains implementation dependent). If a
 matching service name is found,</span> the Global Services Application <strike>corresponding 
 to this</strike><span style="background: #FFFF00">is</span> <strike>unique</strike><span style="background: #FFFF00">the</span> <strike>sServiceName</strike><span style="background: #FFFF00">one
</span> <strike>or to this entire</strike><span style="background: #FFFF00">that uniquely registered that</span> service <strike>family</strike><span style="background: #FFFF00">name</span>.<span style="background: #FFFF00">

</span> <strike>
</strike><li><span style="background: #FFFF00">Otherwise,</span> <strike>When</strike><span style="background: #FFFF00">if</span> the <code>serverAID</code> <span style="background: #FFFF00">parameter </span>is <strike>not</strike><span style="background: #FFFF00">not
</span> <code>null</code>, <span style="background: #FFFF00">then </span>the OPEN <strike>checks that</strike><span style="background: #FFFF00">shall look</span> <span style="background: #FFFF00">in </span>the <strike>sServiceName</strike><span style="background: #FFFF00">GlobalPlatform Registry
 for the corresponding Application:<ul>

   <li>If the Application does not have the Global Service Privilege, then
  </span> <strike>or
</strike><span style="background: #FFFF00">the search is deemed</span> to <strike>this</strike><span style="background: #FFFF00">be unsuccessful.

  </span> <strike>entire</strike><li><span style="background: #FFFF00">If the</span> <span style="background: #FFFF00">requested </span>service <span style="background: #FFFF00">name (or </span>family <strike>is</strike><span style="background: #FFFF00">of service) was not
 </span> <span style="background: #FFFF00"> previously </span>recorded <span style="background: #FFFF00">for that Application (i.e. not specified as part of
   System Install Parameters </span>in the <strike>GP</strike><span style="background: #FFFF00">INSTALL</span> <strike>Registry</strike><span style="background: #FFFF00">command),</span> <strike>for this</strike><span style="background: #FFFF00">then the</span> <strike>serverAID;
</strike><span style="background: #FFFF00">search</span> <strike>OPEN</strike><span style="background: #FFFF00">is
</span> <strike>invokes</strike> <strike>the</strike> <strike>Applet</strike><span style="background: #FFFF00">deemed to be unsuccessful</span>.<strike>getShareableInterfaceObject()</strike><span style="background: #FFFF00">

</span> <strike>method</strike> <strike>of</strike> <strike>the</strike></ul><span style="background: #FFFF00">
</span> <strike>corresponding</strike><span style="background: #FFFF00">
</span> </ul><span style="background: #FFFF00">

 If a </span>Global Services Application<strike>.
</strike><span style="background: #FFFF00"> was found,</span> <span style="background: #FFFF00">then the </span>OPEN <strike>provides</strike><span style="background: #FFFF00">shall retrieve
</span> the <strike>following</strike><A HREF="1.6\javadoc\core\GlobalService.html"><TT><span style="background: #FFFF00">GlobalService</TT></A></span> <strike>parameters to</strike><span style="background: #FFFF00">instance by</span> <span style="background: #FFFF00">invoking </span>the <A HREF="1.6\javadoc\core\Applet.html#getShareableInterfaceObject"><TT>Applet.getShareableInterfaceObject<strike>()</strike></TT></A> method<strike>:</strike> <strike>
</strike><span style="background: #FFFF00">of that Global</span> <span style="background: #FFFF00">Services
 Application with the </span><code>clientAID</code> <strike>is</strike><span style="background: #FFFF00">parameter</span> set to the AID of <strike>the</strike><span style="background: #FFFF00">the
</span> current applet context (i.e. the <strike>requesting</strike><span style="background: #FFFF00">one</span> <strike>on-card</strike><span style="background: #FFFF00">invoking this</span> <strike>entity</strike><span style="background: #FFFF00">method</span>) <strike>and
</strike><span style="background: #FFFF00">and</span> <span style="background: #FFFF00">the
</span> <code>parameter</code> <strike>is</strike><span style="background: #FFFF00">parameter</span> set to <A HREF="1.6\javadoc\core\.html#GLOBAL_SERVICE_IDENTIFIER"><TT><span style="background: #FFFF00">.</span>GLOBAL_SERVICE_IDENTIFIER<strike>;
</strike></TT></A><span style="background: #FFFF00">.

</span> <strike>The</strike><span style="background: #FFFF00">@param serverAID AID of the</span> Global Services Application <strike>returns</strike><span style="background: #FFFF00">providing the
 requested service, or <code>null</code> if</span> the <strike>reference</strike><span style="background: #FFFF00">caller</span> of <span style="background: #FFFF00">this method is
 requesting a uniquely registered service name.<p>

 @param sServiceName service name identifying a service or a family of
 services.<p>

 A service name is encoded on 2 bytes, </span>the <strike>Shareable</strike><span style="background: #FFFF00">1st byte identifying</span> <strike>Interface</strike><span style="background: #FFFF00">a family</span> <strike>Object implementing</strike><span style="background: #FFFF00">of
 services</span> <span style="background: #FFFF00">and </span>the <strike>GlobalService</strike><span style="background: #FFFF00">2nd byte identifying a service within that</span> <strike>interface</strike><span style="background: #FFFF00">family</span>. <strike>
</strike><span style="background: #FFFF00">If</span> <strike>This</strike><span style="background: #FFFF00">the
 2nd byte is</span> <strike>handle</strike><span style="background: #FFFF00">set</span> to <code><span style="background: #FFFF00">0x00</code>, </span>the <strike>GlobalService interface is then returned by OPEN</strike><span style="background: #FFFF00">caller of this method is
 requesting a</span> <strike>to</strike><span style="background: #FFFF00">service of</span> the <strike>requesting</strike><span style="background: #FFFF00">specified</span> <strike>applet.
</strike><span style="background: #FFFF00">family,</span> <strike>
</strike><span style="background: #FFFF00">but does not</span> <span style="background: #FFFF00">care exactly
 which service within that family.</span><p><strike>
</strike><span style="background: #FFFF00">

</span> <strike>@param</strike><span style="background: #FFFF00">This</span> <strike>serverAID identifies the required Global Service</strike><span style="background: #FFFF00">class defines a set of constants</span> <strike>Application</strike><code><span style="background: #FFFF00">FAMILY_XXX</code></span> <strike>AID</strike><span style="background: #FFFF00">(of</span> <strike>or</strike><span style="background: #FFFF00">the
</span> <strike>is</strike><code><span style="background: #FFFF00">byte</code></span> <strike>null.
</strike><span style="background: #FFFF00">type)</span> <strike>@param</strike><span style="background: #FFFF00">that</span> <strike>sServiceName identifies the required Global Service Service Name</strike><span style="background: #FFFF00">may be used to build a service name</span> <strike>or</strike><span style="background: #FFFF00">(of</span> <strike>the</strike><span style="background: #FFFF00">the
 <code>short</code> type)</span> <strike>entire</strike><span style="background: #FFFF00">suitable</span> <strike>Service</strike><span style="background: #FFFF00">to invoke this method as shown in</span> <strike>Family</strike><span style="background: #FFFF00">the
 following examples:<ul>

 <li><code>(short)((<A HREF="1.6\javadoc\core\.html#FAMILY_CVM"><TT></span>.<strike>
</strike><span style="background: #FFFF00">FAMILY_CVM</TT></A><8)|0x11)</code>

 <li><code>(short)((<A HREF="1.6\javadoc\core\.html#FAMILY_HTTP_ADMINISTRATION"><TT>.FAMILY_HTTP_ADMINISTRATION</TT></A><8)|0x00)</code>

 </ul>

</span> @return the <A HREF="1.6\javadoc\core\GlobalService.html"><TT>GlobalService</TT></A><span style="background: #FFFF00"> instance giving access to</span> <strike>interface object</strike><span style="background: #FFFF00">the requested
</span> <strike>reference</strike><span style="background: #FFFF00">service,</span> or <code>null</code><span style="background: #FFFF00"> if the Global Services Application could not
 be found or did not provide a <A HREF="1.6\javadoc\core\GlobalService.html"><TT>GlobalService</TT></A> instance</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @see #GLOBAL_SERVICE_IDENTIFIER
 @see #FAMILY_<strike>CVM 
</strike><span style="background: #FFFF00">CVM
</span> @see #FAMILY_SECURE_CHANNEL
 @see #FAMILY_USSM
 @see #FAMILY_AUTHORITY
 @see #FAMILY_HTTP_ADMINISTRATION
 @see #FAMILY_HTTP_REPORT
 @<span style="background: #FFFF00">see GPRegistryEntry#registerService

 @</span>since export file version 1.1</blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.lockCard()"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.lockCard_changed()" class="hiddenlink">boolean <b>lockCard()</b></a><br><br><blockquote><span style="background: #FFFF00">Locks the card. 

 </span>This method <strike>locks</strike><span style="background: #FFFF00">shall be used to</span> <span style="background: #FFFF00">transition </span>the card<span style="background: #FFFF00"> to <A HREF="1.6\javadoc\core\.html#CARD_LOCKED"><TT></span>.<span style="background: #FFFF00">CARD_LOCKED</TT></A></span>
 <span style="background: #FFFF00">Life Cycle State.</span><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> The OPEN <strike>locates the</strike><span style="background: #FFFF00">shall</span> <strike>entry of</strike><span style="background: #FFFF00">check that</span> the <strike>current</strike><span style="background: #FFFF00">Application</span> <strike>applet context in the Open Platform
 Registry</strike><span style="background: #FFFF00">invoking this method has the Card
 Lock</span> <strike>and</strike><span style="background: #FFFF00">Privilege.</span> <strike>verifies</strike><span style="background: #FFFF00">If</span> <strike>that</strike><span style="background: #FFFF00">not,</span> the <strike>application has the</strike><span style="background: #FFFF00">transition</span> <strike>card lock privilege</strike><span style="background: #FFFF00">shall be rejected</span>.<strike>
 
</strike> <p><strike>
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if <span style="background: #FFFF00">the </span>card <span style="background: #FFFF00">was </span>locked, <code>false</code> otherwise<span style="background: #FFFF00">.</span></blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.setATRHistBytes(byte[], short, byte)"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.setATRHistBytes_changed(byte[], short, byte)" class="hiddenlink">boolean <b>setATRHistBytes(byte[], short, byte)</b></a><br><br><blockquote><strike>This method</strike><span style="background: #FFFF00">Sets</span> <strike>sets </strike>the historical bytes of the <strike>ATR (</strike>Answer To Reset<span style="background: #FFFF00"> (ATR</span>) string.<strike>
</strike><p><span style="background: #FFFF00">

 This method only updates the ATR string that is used for the contact-based
 IO interface (as specified by [ISO/IEC 7816] upon power-up or cold
 reset.</span> The <strike>sequence</strike><span style="background: #FFFF00">ATR</span> <strike>of</strike><span style="background: #FFFF00">string used for warm reset shall remain unchanged.  The new
</span> <span style="background: #FFFF00">historical </span>bytes <strike>will</strike><span style="background: #FFFF00">shall</span> be visible <strike>on</strike><span style="background: #FFFF00">upon</span> <strike>a</strike><span style="background: #FFFF00">next</span> <strike>subsequent </strike>power-up or cold reset.<strike>
 </strike><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> The OPEN <strike>locates the</strike><span style="background: #FFFF00">shall</span> <strike>entry of</strike><span style="background: #FFFF00">check that</span> the <strike>current</strike><span style="background: #FFFF00">Application</span> <strike>applet context</strike><span style="background: #FFFF00">invoking this</span> <strike>in</strike><span style="background: #FFFF00">method has</span> the <strike>Open Platform
 Registry</strike><span style="background: #FFFF00">Card
 Reset Privilege</span> and <strike>verifies </strike>that the <strike>application</strike><code><span style="background: #FFFF00">bLength</code> is</span> <strike>has the</strike><span style="background: #FFFF00">both positive</span> <strike>"Card</strike><span style="background: #FFFF00">and
</span> <strike>Reset"</strike><span style="background: #FFFF00">lower</span> <strike>privilege</strike><span style="background: #FFFF00">than</span> <strike>for</strike><span style="background: #FFFF00">16. If not,</span> the <strike>current card</strike><span style="background: #FFFF00">change shall</span> <strike>I/O</strike><span style="background: #FFFF00">be</span> <strike>interface;</strike><span style="background: #FFFF00">rejected.<p>

 Notes:<ul></span>
 <li><em>The OPEN is responsible for synchronizing the length of <strike>historical</strike><span style="background: #FFFF00">historical
</span> bytes <strike>in
</strike><span style="background: #FFFF00">in the format character (low order</span> <strike>Format Character</strike><span style="background: #FFFF00">nibble of</span> T0<span style="background: #FFFF00">)</span> of the ATR<span style="background: #FFFF00"> string</span>.</em>
 </ul><strike>
</strike><span style="background: #FFFF00">

</span> <strike>
 </strike>@param baBuffer <strike>the source </strike>byte array containing the ATR historical bytes.
 @param sOffset <span style="background: #FFFF00"> </span>offset of the ATR historical bytes<strike> within source byte array</strike>.
 @param bLength <strike>the</strike> <strike>number</strike><span style="background: #FFFF00">length</span> of <span style="background: #FFFF00">the ATR </span>historical bytes.<strike>
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if ATR <span style="background: #FFFF00">historical </span>bytes <span style="background: #FFFF00">were </span>set, <code>false</code> otherwise.</blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.setCardContentState(byte)"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.setCardContentState_changed(byte)" class="hiddenlink">boolean <b>setCardContentState(byte)</b></a><br><br><blockquote><span style="background: #FFFF00">Sets the Life Cycle state of the Application invoking this method.  

 </span>This method allows the <strike>application</strike><span style="background: #FFFF00">Application</span> associated with the current <strike>applet</strike><span style="background: #FFFF00">applet
</span> context <strike>
</strike><span style="background: #FFFF00">to lock itself or</span> to change its state <strike>to</strike><span style="background: #FFFF00">from</span> an application <strike>specific life</strike><span style="background: #FFFF00">specific
</span> <strike>cycle state or</strike><span style="background: #FFFF00">Life Cycle State</span> to <strike>lock</strike><span style="background: #FFFF00">another</span> <strike>itself.</strike><span style="background: #FFFF00">application</span> <strike>
 An</strike><span style="background: #FFFF00">specific Life</span> <strike>application</strike><span style="background: #FFFF00">Cycle State. An
</span> <span style="background: #FFFF00">Application </span>cannot unlock itself<span style="background: #FFFF00">.<p>

</span> <strike>using this</strike><span style="background: #FFFF00">The OPEN</span> <strike>method.</strike><span style="background: #FFFF00">shall</span> <strike>
</strike><span style="background: #FFFF00">check</span> <strike>
</strike><span style="background: #FFFF00">that</span> <strike>@param</strike><span style="background: #FFFF00">the</span> <strike>bState</strike><span style="background: #FFFF00">Application is currently in</span> an <strike>application</strike><span style="background: #FFFF00">application
</span> specific <strike>life</strike><span style="background: #FFFF00">Life</span> <strike>cycle state</strike><span style="background: #FFFF00">Cycle State</span> (<span style="background: #FFFF00">i.e. in the range [</span>0x07 <strike>to</strike><span style="background: #FFFF00">..</span> 0x7F<span style="background: #FFFF00">] and</span> with <strike>3</strike><span style="background: #FFFF00">its</span> <span style="background: #FFFF00">3
 </span>low order bits set<span style="background: #FFFF00"> to 1</span>), <strike>
 or</strike><span style="background: #FFFF00">in particular</span> <span style="background: #FFFF00">that it is not in the <A HREF="1.6\javadoc\core\.html#APPLICATION_INSTALLED"></span><TT>.APPLICATION_<strike>LOCKED</strike><span style="background: #FFFF00">INSTALLED</span></TT></A> <strike>(0x80)</strike><span style="background: #FFFF00">state and not currently locked. If not, the change
 shall be rejected</span>.
 <strike>@return</strike><span style="background: #FFFF00">
 The OPEN shall check</span> <span style="background: #FFFF00">that </span><code><strike>false</strike><span style="background: #FFFF00">bState</span></code> <strike>if</strike><span style="background: #FFFF00">either encodes an application
 specific Life Cycle State or has its high order</span> <span style="background: #FFFF00">bit (b8) set to 1: the
 latter case shall be interpreted as a request from the </span>the <span style="background: #FFFF00">Application to
 lock itself.

 @param bState either an </span>application <strike>invoking this method is</strike><span style="background: #FFFF00">specific Life Cycle State</span> <strike>currently</strike><span style="background: #FFFF00">(i.e.</span> <strike>locked</strike><span style="background: #FFFF00">in the
 range [0x07 </span>.<strike>
</strike><span style="background: #FFFF00">. 0x7F] and with its 3 low order bits set to 1), or any value
 having its high order bit (b8) set to 1. A value of <A HREF="1.6\javadoc\core\.html#APPLICATION_LOCKED"><TT>.APPLICATION_LOCKED</TT></A> may be used to request locking the</span> <span style="background: #FFFF00">Application.

 </span>@return <code>true</code> if the <strike>operation</strike><span style="background: #FFFF00">Life</span> <strike>is</strike><span style="background: #FFFF00">Cycle State</span> <strike>successful</strike><span style="background: #FFFF00">of the Application was
 changed</span>, <code>false</code> otherwise.<strike>
</strike><span style="background: #FFFF00">

 @see #APPLICATION_INSTALLED
 @see</span> <span style="background: #FFFF00">#APPLICATION_LOCKED

 </span>@since <ul>
 <li>export file version 1.0: initial version.
 <li>export file version 1.5: this method now allows the <strike>application</strike><span style="background: #FFFF00">application
</span> associated with the current applet context to lock itself.
 </ul></blockquote>
<A NAME="org.globalplatform.GPSystem.dmethod.terminateCard()"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.terminateCard_changed()" class="hiddenlink">boolean <b>terminateCard()</b></a><br><br><blockquote><strike>This method</strike><span style="background: #FFFF00">Terminates</span> <strike>terminates </strike>the card.<strike>
 Notes:
</strike><span style="background: #FFFF00">

</span> This method shall <strike>not </strike>be <strike>invoked</strike><span style="background: #FFFF00">used to</span> <strike>from</strike><span style="background: #FFFF00">transition</span> the <strike>Applet</strike><span style="background: #FFFF00">card to <A HREF="1.6\javadoc\core\.html#CARD_TERMINATED"><TT></span>.<strike>install()</strike><span style="background: #FFFF00">CARD_TERMINATED</TT></A></span> <strike>method</strike><span style="background: #FFFF00">Life Cycle State</span>.<strike>
</strike><p><span style="background: #FFFF00">

</span> The OPEN <strike>locates the</strike><span style="background: #FFFF00">shall</span> <strike>entry of</strike><span style="background: #FFFF00">check that</span> the <strike>current</strike><span style="background: #FFFF00">Application</span> <strike>applet context in the Open Platform
 Registry</strike><span style="background: #FFFF00">invoking this method has the Card
 Terminate</span> <strike>and</strike><span style="background: #FFFF00">Privilege.</span> <strike>verifies</strike><span style="background: #FFFF00">If</span> <strike>that</strike><span style="background: #FFFF00">not,</span> the <strike>application has the</strike><span style="background: #FFFF00">transition</span> <strike>card terminate privilege</strike><span style="background: #FFFF00">shall be rejected</span>.<strike>
 
 </strike><p><strike>
</strike><span style="background: #FFFF00">

</span> @return <code>true</code> if <span style="background: #FFFF00">the </span>card <span style="background: #FFFF00">was </span>terminated, <code>false</code> otherwise.</blockquote>
<A NAME="org.globalplatform.GPSystem.field.APPLICATION_LOCKED"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.APPLICATION_LOCKED" class="hiddenlink">byte <b>APPLICATION_LOCKED</b></a><br><br><blockquote>The current applet context is in the Life Cycle State of LOCKED (0x80).<strike>
</strike><span style="background: #FFFF00">

</span> To know <strike>if</strike><span style="background: #FFFF00">whether</span> an application is locked<span style="background: #FFFF00"> or not</span>, a logical AND <strike>operation</strike><span style="background: #FFFF00">operation
</span> shall be <strike>
 </strike>performed between this constant and the current application <strike>life</strike><span style="background: #FFFF00">life
</span> cycle <strike>
 </strike>state.</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_1"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_1" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_1</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 1 (0x01).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_2"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_2" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_2</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 2 (0x02).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_3"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_3" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_3</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 3 (0x03).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_4"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_4" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_4</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 4 (0x04).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_5"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_5" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_5</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 5 (0x05).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_6"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_6" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_6</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 6 (0x06).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_7"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_7" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_7</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 7 (0x07).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_ETSI_PIN_APP_8"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_ETSI_PIN_APP_8" class="hiddenlink">byte <b>CVM_ETSI_PIN_APP_8</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is the ETSI PIN App 8 (0x08).
 @since export file version 1.5</blockquote>
<A NAME="org.globalplatform.GPSystem.field.CVM_GLOBAL_PIN"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.CVM_GLOBAL_PIN" class="hiddenlink">byte <b>CVM_GLOBAL_PIN</b></a><br><br><blockquote>Indicates that the <span style="background: #FFFF00">required </span>CVM interface <strike>required </strike>is a Global PIN (0x11).</blockquote>
<A NAME="org.globalplatform.GPSystem.field.FAMILY_HTTP_REPORT"></A><a href="org.globalplatform.GPSystem.html" class="hiddenlink">Class <b>GPSystem</b></a>, <a href="org.globalplatform.GPSystem.html#org.globalplatform.GPSystem.FAMILY_HTTP_REPORT" class="hiddenlink">byte <b>FAMILY_HTTP_REPORT</b></a><br><br><blockquote>Indicates the family of the HTTP Report Service Identifier (0x85).<strike> 
 Application is not requested to expose this service through .getService(AID, short)</strike>
 @since export file version 1.3</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.GlobalService!class"></A><a href="org.globalplatform.GlobalService.html" class="hiddenlink">Class <b>GlobalService</b></a><br><br><blockquote>This <strike>defines the </strike>interface <strike>for</strike><span style="background: #FFFF00">allows</span> requesting a Global Services Application <strike>to provide its actual service
 interface. The Global Services Application uses this</strike><span style="background: #FFFF00">for</span> <strike>interface to check the</strike><span style="background: #FFFF00">a
 Shareable Interface Object</span> <strike>validity</strike><span style="background: #FFFF00">(SIO)</span> <strike>of</strike><span style="background: #FFFF00">providing</span> the <strike>request</strike><span style="background: #FFFF00">actual</span> <strike>
</strike><span style="background: #FFFF00">service.<p>

</span> <strike>presented by</strike><span style="background: #FFFF00">To retrieve</span> an <strike>on-card entity.
 Prior to</strike><span style="background: #FFFF00">instance</span> <strike>using</strike><span style="background: #FFFF00">of</span> this interface, an Application <strike>is required to obtain a handle to the Global Services
 Application by</strike><span style="background: #FFFF00">shall</span> <strike>invoking the</strike><span style="background: #FFFF00">invoke the
</span> <A HREF="1.6\javadoc\core\org/globalplatform/GlobalService/GPSystem.html#getService"><TT>GPSystem.getService<strike>()</strike></TT></A> method.<strike> 
</strike><p><span style="background: #FFFF00">

</span> @since export file version 1.1</blockquote>
<A NAME="org.globalplatform.GlobalService.dmethod.getServiceInterface(GPRegistryEntry, short, byte[], short, short)"></A><a href="org.globalplatform.GlobalService.html" class="hiddenlink">Class <b>GlobalService</b></a>, <a href="org.globalplatform.GlobalService.html#org.globalplatform.GlobalService.getServiceInterface_changed(org.globalplatform.GPRegistryEntry, short, byte[], short, short)" class="hiddenlink">Shareable <b>getServiceInterface(GPRegistryEntry, short, byte[], short, short)</b></a><br><br><blockquote><strike>This method returns a handle</strike><span style="background: #FFFF00">Gets a Shareable Interface Object</span> <strike>to</strike><span style="background: #FFFF00">(SIO) actually</span> <span style="background: #FFFF00">providing </span>the requested service<span style="background: #FFFF00">.<p>

</span> <strike>interface of a Global Services</strike><span style="background: #FFFF00">The Application invoking this method</span> <strike>Application.</strike><span style="background: #FFFF00">shall set the
 <code>clientRegistryEntry</code> to its own <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT>GPRegistryEntry</TT></A></span>
 <span style="background: #FFFF00">instance.</span><p><strike>Note:
</strike><span style="background: #FFFF00">

</span> The Global Services Application <strike>verifies</strike><span style="background: #FFFF00">shall</span> <span style="background: #FFFF00">verify </span>the validity of the <strike>request</strike><span style="background: #FFFF00">request
</span> according to its own security <strike>policies
</strike><span style="background: #FFFF00">policies</span> for <strike>this</strike><span style="background: #FFFF00">the specified
</span> <code>sServiceName</code><strike> and</strike><span style="background: #FFFF00">,</span> based on the identity <strike>of the requesting</strike><span style="background: #FFFF00">and characteristics of</span> <strike>on-card</strike><span style="background: #FFFF00">the
</span> <strike>entity and its characteristics as
</strike><span style="background: #FFFF00">Application invoking this method as</span> registered <strike>in</strike><span style="background: #FFFF00">by</span> the <span style="background: #FFFF00">specified
 </span><code>clientRegistryEntry</code><strike>;
</strike><span style="background: #FFFF00">,</span> <strike>On</strike><span style="background: #FFFF00">and</span> <strike>a valid service</strike><span style="background: #FFFF00">possibly based on</span> <strike>request,</strike><span style="background: #FFFF00">the data contained
</span> <span style="background: #FFFF00">in </span>the <strike>Global</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>Service</strike><span style="background: #FFFF00">byte</span> <strike>Application</strike><span style="background: #FFFF00">array.<p>

</span> <strike>returns</strike><span style="background: #FFFF00">If</span> the <strike>reference</strike><span style="background: #FFFF00">request is</span> <strike>of</strike><span style="background: #FFFF00">valid,</span> the <strike>Shareable Interface 
</strike><span style="background: #FFFF00">Global Service Application</span> <strike>Object</strike><span style="background: #FFFF00">returns a SIO
</span> implementing the actual service: this <strike>Shareable Interface</strike><span style="background: #FFFF00">SIO</span> <strike>Object </strike>may either be this <A HREF="1.6\javadoc\core\GlobalService.html"><TT><span style="background: #FFFF00">GlobalService</TT></A> instance or another object. If the request is deemed to be
 invalid, the </span>Global <strike>Service 
</strike><span style="background: #FFFF00">Services Application</span> <strike>interface</strike><span style="background: #FFFF00">shall reject the request by</span> <span style="background: #FFFF00">either
 throwing an exception </span>or <strike>another</strike><span style="background: #FFFF00">returning <code>null</code>.<p>

 It is assumed that the Application invoking</span> <strike>Java</strike><span style="background: #FFFF00">this method</span> <strike>Card</strike><span style="background: #FFFF00">is aware of</span> <strike>shareable</strike><span style="background: #FFFF00">the
</span> interface<strike>;
</strike><span style="background: #FFFF00"> (extension of</span> <span style="background: #FFFF00">the <A HREF="1.6\javadoc\core\Shareable.html"><TT>Shareable</TT></A> interface) to which the
 retrieved SIO shall be casted in order to acces the service.<p>

 Notes:<ul>

 </span><li><em><strike>Depending on its own security</strike><span style="background: #FFFF00">It shall be noticed that</span> <strike>policy,</strike><span style="background: #FFFF00">an Application having</span> the Global <strike>Service</strike><span style="background: #FFFF00">Registry
 Privilege could potentially invoke this method with the
 <code>clientRegistryEntry</code> parameter set to the <A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT>GPRegistryEntry</TT></A> instance of another Application. If the Global</span> <span style="background: #FFFF00">Services
 </span>Application <span style="background: #FFFF00">itself has the Global Registry Privilege, it </span>may <strike>reject an invalid service request
</strike><span style="background: #FFFF00">explicitly
 retrieve and check the</span> <strike>by</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>either throwing an exception or just</strike><span style="background: #FFFF00">instance of the Application
 invoking this</span> <strike>returning</strike><span style="background: #FFFF00">method, by performing the following call:
</span> <code><strike>null</strike><span style="background: #FFFF00">GPSystem.getRegistryEntry(JCSystem.getPreviousContextAID())</span></code>.</em>
 <span style="background: #FFFF00">
 </span></ul>
 <span style="background: #FFFF00">
 </span>@param clientRegistryEntry the <strike>GP Registry entry</strike><A HREF="1.6\javadoc\core\GPRegistryEntry.html"><TT><span style="background: #FFFF00">GPRegistryEntry</TT></A></span> <strike>reference</strike><span style="background: #FFFF00">instance</span> of <strike>the</strike><span style="background: #FFFF00">the
</span> requesting <strike>on-card entity</strike><span style="background: #FFFF00">Application</span>.<p>
 @param sServiceName <span style="background: #FFFF00">a service name identifying </span>the requested service<span style="background: #FFFF00">.<p>

 A service</span> name<span style="background: #FFFF00"> is encoded on 2 bytes, the 1st byte identifying a family of
 services and the 2nd byte identifying a service within that family</span>.<strike>
</strike><p><span style="background: #FFFF00">

</span> <strike>@param</strike><span style="background: #FFFF00">The</span> <strike>baBuffer</strike><A HREF="1.6\javadoc\core\GPSystem.html"><TT><span style="background: #FFFF00">GPSystem</TT></A> class defines a set of constants
 <code>FAMILY_XXX</code> (of the <code>byte</code> type) that may be used to
 build a service name (of the <code>short</code> type) suitable to invoke
 this method as shown</span> <span style="background: #FFFF00">in </span>the <strike>source</strike><span style="background: #FFFF00">following examples:<ul>

 <li><code>(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_CVM"><TT>GPSystem.FAMILY_CVM</TT></A><8)|0x11)</code>

 <li><code>(short)((<A HREF="1.6\javadoc\core\GPSystem.html#FAMILY_HTTP_ADMINISTRATION"><TT>GPSystem.FAMILY_HTTP_ADMINISTRATION</TT></A><8)|0x00)</code>

 </ul>

 @param baBuffer</span> byte array containing additional parameters of the <strike>service </strike>request<span style="background: #FFFF00">,
 potentially authentication data. Must be <em>global</em> byte array</span>.
 @param sOffset offset of the additional <strike>request </strike>parameters<strike> within the source byte array</strike>.
 @param sLength length of the additional <strike>request </strike>parameters.<strike>
</strike><span style="background: #FFFF00">

</span> @return the <strike>specific</strike><span style="background: #FFFF00">SIO</span> <strike>service</strike><span style="background: #FFFF00">providing</span> <strike>interface</strike><span style="background: #FFFF00">the actual</span> <strike>reference</strike><span style="background: #FFFF00">service,</span> or <code>null</code><span style="background: #FFFF00"> if the
 service is not available or the request was rejected</span>.<strike>
</strike><span style="background: #FFFF00"> Alternatively, this
 method may reject the request by throwing an <code>ISOException</code>.

</span> @exception ISOException <strike>with</strike><span style="background: #FFFF00">if the request was rejected.</span> <span style="background: #FFFF00">Although not
 mandatory, it is recommended to use one of </span>the following reason codes:<ul><span style="background: #FFFF00">
 <li>'6A88' if the specified service was not found or is not available.
 <li>'6982' if some security conditions are not satisfied.</span>
 <li><span style="background: #FFFF00">'6985' if some other conditions are not satisfied.
 </ul>
 Alternatively, this method may reject the request by returning </span><code><strike>ISO7816</strike><span style="background: #FFFF00">null</code></span>.<strike>SW_CONDITIONS_NOT_SATISFIED</strike><span style="background: #FFFF00">

 @exception SecurityException if the Global Services Application requires
 reading data from <code>baBuffer</code> and <code>baBuffer</code> is not a
 <em>global</em> byte array.
 @exception NullPointerException if the Global Services Application requires
 reading data from <code>baBuffer</code> and <code>baBuffer</code> is
 </span><code><span style="background: #FFFF00">null</code>.</span>
 <span style="background: #FFFF00">@exception ArrayIndexOutOfBoundsException if the Global Services
 Application requires reading data from </span><code><strike>ISO7816</strike><span style="background: #FFFF00">baBuffer</code> and reading
 data would cause access of data outside array bounds</span>.<strike>SW</strike><span style="background: #FFFF00">

 @see GPSystem#getService
 @see GPSystem#FAMILY</span>_<strike>SECURITY</strike><span style="background: #FFFF00">CVM
 @see GPSystem#FAMILY</span>_<strike>STATUS</strike><span style="background: #FFFF00">SECURE</span>_<strike>NOT</strike><span style="background: #FFFF00">CHANNEL
 @see GPSystem#FAMILY</span>_<strike>SATISFIED</strike><span style="background: #FFFF00">USSM
 @see GPSystem#FAMILY_AUTHORITY
 @see GPSystem#FAMILY_HTTP_ADMINISTRATION
 @see GPSystem#FAMILY_HTTP_REPORT</span></blockquote>
<A NAME="org.globalplatform.GlobalService.field.KEY_ACCESS_ANY"></A><a href="org.globalplatform.GlobalService.html" class="hiddenlink">Class <b>GlobalService</b></a>, <a href="org.globalplatform.GlobalService.html#org.globalplatform.GlobalService.KEY_ACCESS_ANY" class="hiddenlink">byte <b>KEY_ACCESS_ANY</b></a><br><br><blockquote>Key Access indicating key may be used by the Security Domain and <strike>any</strike><span style="background: #FFFF00">any
</span> associated <strike>application</strike><span style="background: #FFFF00">Application</span> (0x00).</blockquote>
<A NAME="org.globalplatform.GlobalService.field.KEY_ACCESS_APPLICATION"></A><a href="org.globalplatform.GlobalService.html" class="hiddenlink">Class <b>GlobalService</b></a>, <a href="org.globalplatform.GlobalService.html#org.globalplatform.GlobalService.KEY_ACCESS_APPLICATION" class="hiddenlink">byte <b>KEY_ACCESS_APPLICATION</b></a><br><br><blockquote>Key Access indicating key may be used by any associated <strike>application</strike><span style="background: #FFFF00">Application</span> but <strike>not</strike><span style="background: #FFFF00">not
</span> by the <strike>
 </strike>Security Domain (0x02).</blockquote>
<A NAME="org.globalplatform.GlobalService.field.KEY_ACCESS_SECURITY_DOMAIN"></A><a href="org.globalplatform.GlobalService.html" class="hiddenlink">Class <b>GlobalService</b></a>, <a href="org.globalplatform.GlobalService.html#org.globalplatform.GlobalService.KEY_ACCESS_SECURITY_DOMAIN" class="hiddenlink">byte <b>KEY_ACCESS_SECURITY_DOMAIN</b></a><br><br><blockquote>Key Access indicating key may be used by the Security Domain but not by <strike>any associated
 application</strike><span style="background: #FFFF00">any
 associated Application</span> (0x01).</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.HTTPAdministration!class"></A><a href="org.globalplatform.HTTPAdministration.html" class="hiddenlink">Class <b>HTTPAdministration</b></a><br><br><blockquote>This interface <strike>handles</strike><span style="background: #FFFF00">defines</span> <strike>an</strike><span style="background: #FFFF00">a method to</span> <span style="background: #FFFF00">trigger a new </span>HTTP administration session<strike> triggering request</strike>.<strike>
 </strike><p><strike>
 The</strike><span style="background: #FFFF00">

</span> <strike>object implementing this interface shall belong</strike><span style="background: #FFFF00">To retrieve an instance of this</span> <strike>to</strike><span style="background: #FFFF00">interface,</span> <strike>the JCRE to have 
</strike><span style="background: #FFFF00">an Application shall use the
</span> <strike>access</strike><A HREF="1.6\javadoc\core\org/globalplatform/HTTPAdministration/GlobalService.html"><TT><span style="background: #FFFF00">GlobalService</TT></A></span> <strike>to</strike><span style="background: #FFFF00">instance,</span> <strike>any</strike><span style="background: #FFFF00">if</span> <strike>object.</strike><span style="background: #FFFF00">available,</span> <strike>
 The HTTPAdministration</strike><span style="background: #FFFF00">registered with a</span> service <strike>shall</strike><span style="background: #FFFF00">name
</span> <strike>verify</strike><span style="background: #FFFF00">of <code>(<A HREF="1.6\javadoc\core\org/globalplatform/HTTPAdministration/GPSystem.html#FAMILY_HTTP_ADMINISTRATION"><TT>GPSystem.FAMILY_HTTP_ADMINISTRATION</TT></A><8|0x00)</code>.

</span> <strike>that</strike><span style="background: #FFFF00">@see</span> <strike>the</strike><span style="background: #FFFF00">GlobalService
</span> <strike>method</strike><span style="background: #FFFF00">@see</span> <strike>parameters</strike><span style="background: #FFFF00">GPSystem#getService

</span> <strike>are</strike><span style="background: #FFFF00">@since</span> <ul>
 <strike>within</strike><li><span style="background: #FFFF00">export</span> <strike>bounds and</strike><span style="background: #FFFF00">file version</span> <strike>all</strike><span style="background: #FFFF00">1.3:</span> <strike>objects</strike><span style="background: #FFFF00">initial</span> <strike>passed</strike><span style="background: #FFFF00">version.
</span> <strike>in</strike><li><span style="background: #FFFF00">export</span> <strike>as parameters</strike><span style="background: #FFFF00">file version</span> <strike>are</strike><span style="background: #FFFF00">1.6:</span> <strike>accessible from 
 the</strike><span style="background: #FFFF00">reviewed overall description of</span> <strike>caller#s</strike><span style="background: #FFFF00">this</span> <strike>context</strike><span style="background: #FFFF00">interface</span>.
 <strike>@since export file version 1.3</strike></ul></blockquote>
<A NAME="org.globalplatform.HTTPAdministration.dmethod.requestHTTPAdministrationSession(byte[], short, short)"></A><a href="org.globalplatform.HTTPAdministration.html" class="hiddenlink">Class <b>HTTPAdministration</b></a>, <a href="org.globalplatform.HTTPAdministration.html#org.globalplatform.HTTPAdministration.requestHTTPAdministrationSession_changed(byte[], short, short)" class="hiddenlink">void <b>requestHTTPAdministrationSession(byte[], short, short)</b></a><br><br><blockquote><strike>Request an</strike><span style="background: #FFFF00">Triggers a</span> <span style="background: #FFFF00">new </span>administration session.<strike>
</strike> <p><strike> 
</strike><span style="background: #FFFF00">

</span> The Security Domain of the <strike>calling</strike><span style="background: #FFFF00">Application invoking</span> <strike>application</strike><span style="background: #FFFF00">this method</span> will handle <strike>the</strike><span style="background: #FFFF00">the
 SCP81</span> <span style="background: #FFFF00">(</span>PSK TLS<span style="background: #FFFF00">)</span> security of the communication.<strike>
</strike> <p><strike>
</strike><span style="background: #FFFF00">

</span> The <strike>calling</strike><span style="background: #FFFF00">Application</span> <strike>application</strike><span style="background: #FFFF00">invoking</span> <span style="background: #FFFF00">this method </span>will be notified of the <strike>request</strike><span style="background: #FFFF00">result</span> <strike>execution</strike><span style="background: #FFFF00">of the
 request</span> if it implements the <strike>interface </strike><A HREF="1.6\javadoc\core\HTTPReportListener.html"><TT>HTTPReportListener</TT></A><strike>
</strike><span style="background: #FFFF00"> interface.</span> <p><strike>
</strike><span style="background: #FFFF00">

</span> @param triggeringParameters <strike>this buffer</strike><span style="background: #FFFF00">byte</span> <strike>contains the</strike><span style="background: #FFFF00">array containing</span> administration <strike>session</strike><span style="background: #FFFF00">session
</span> triggering <strike>parameters
 		  as defined in Amendment B</strike><span style="background: #FFFF00">parameters</span>.<strike> 
 		  </strike>
 @param offset offset <span style="background: #FFFF00">of triggering parameters </span>within <strike>triggeringParameters
</strike><code><span style="background: #FFFF00">triggeringParameters</code>.
</span> @param length length of <strike>parameters within</strike><span style="background: #FFFF00">triggering</span> <strike>triggeringParameters
</strike><span style="background: #FFFF00">parameters.
</span> 
 @exception <strike>java.lang.</strike>SecurityException if <code>triggeringParameters</code> is <strike>not</strike><span style="background: #FFFF00">not
</span> accessible in the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context.
 @exception <strike>java.lang.</strike>NullPointerException if <code>triggeringParameters</code> <strike>is equal</strike><span style="background: #FFFF00">is
</span> <strike>to </strike><code>null</code>.
 @exception <strike>java.lang.</strike>ArrayIndexOutOfBoundsException if <strike>offset</strike><span style="background: #FFFF00">reading</span> <strike>or</strike><span style="background: #FFFF00">triggering</span> <strike>length</strike><span style="background: #FFFF00">parameters
</span> <strike>would lead to</strike><span style="background: #FFFF00">command would cause</span> access <span style="background: #FFFF00">of data </span>outside array bounds.<strike>
</strike><span style="background: #FFFF00">

</span> @exception <strike>javacard.framework.</strike>ISOException with <span style="background: #FFFF00">one of </span>the following reason codes:<strike>
</strike> <ul>
 <strike>	</strike><li> <code>SW_WRONG_DATA</code> if <strike>data within triggeringParameters</strike><span style="background: #FFFF00">parameters</span> are <strike>not</strike><span style="background: #FFFF00">not
</span> correctly formatted.
 <strike>	</strike><li> <code>SW_CONDITIONS_NOT_SATISFIED</code> if <strike>operation</strike><span style="background: #FFFF00">the request</span> could not <strike>be</strike><span style="background: #FFFF00">be
</span> processed (<strike>for example</strike><span style="background: #FFFF00">e.g.</span> if no <strike>SCP 81</strike><span style="background: #FFFF00">SCP81</span> <strike>support is possible for</strike><span style="background: #FFFF00">session</span> <strike>the calling application</strike><span style="background: #FFFF00">could be established</span>).
 </ul></blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.HTTPReportListener!class"></A><a href="org.globalplatform.HTTPReportListener.html" class="hiddenlink">Class <b>HTTPReportListener</b></a><br><br><blockquote><strike>An applet may implement this</strike><span style="background: #FFFF00">This</span> interface <strike>in order</strike><span style="background: #FFFF00">defines a</span> <span style="background: #FFFF00">method </span>to receive <span style="background: #FFFF00">a </span>notification <strike>on HTTPAdministration</strike><span style="background: #FFFF00">upon completion
</span> <strike>request</strike><span style="background: #FFFF00">(success</span> <strike>processing.
</strike><span style="background: #FFFF00">or</span> <strike>
</strike><span style="background: #FFFF00">failure) of an HTTP</span> <span style="background: #FFFF00">Administration Session.</span><p><strike>
 Such an applet shall expose the</strike><span style="background: #FFFF00">

 An Application that wishes to receive</span> <strike>HTTPReportListener</strike><span style="background: #FFFF00">such</span> <strike>interface</strike><span style="background: #FFFF00">a</span> <strike>object(s)</strike><span style="background: #FFFF00">notification</span> <strike>through 
</strike><span style="background: #FFFF00">shall implement</span> <span style="background: #FFFF00">the
 <A HREF="1.6\javadoc\core\org/globalplatform/HTTPReportListener/javacard/framework/Applet.html#getShareableInterfaceObject"></span><TT>javacard.framework.Applet.getShareableInterfaceObject<strike>(javacard.framework.AID,</strike></TT></A> <strike>byte)</strike><span style="background: #FFFF00">to return an
 <A HREF="1.6\javadoc\core\org/globalplatform/HTTPReportListener/HTTPReportListener.html"><TT>HTTPReportListener</span></TT></A><strike>
</strike> <strike>only if</strike><span style="background: #FFFF00">instance when</span> the <strike>client</strike><code><span style="background: #FFFF00">clientAID</code></span> <strike>AID</strike><span style="background: #FFFF00">parameter
</span> is <span style="background: #FFFF00">set to <code></span>null</code>, and the <code><span style="background: #FFFF00">parameter</code> </span>parameter is <strike>set</strike><span style="background: #FFFF00">set
</span> to <A HREF="1.6\javadoc\core\org/globalplatform/HTTPReportListener/GPSystem.html#FAMILY_HTTP_REPORT"><TT>GPSystem.FAMILY_HTTP_REPORT</TT></A>.<strike>
 
</strike><p><span style="background: #FFFF00">

</span> @since <ul><span style="background: #FFFF00">
 <li></span>export file version 1.3<span style="background: #FFFF00">: initial version.
 <li>export file version 1.6: reviewed overall description of this interface.
 </ul></span></blockquote>
<A NAME="org.globalplatform.HTTPReportListener.dmethod.httpAdministationSessionReport(short)"></A><a href="org.globalplatform.HTTPReportListener.html" class="hiddenlink">Class <b>HTTPReportListener</b></a>, <a href="org.globalplatform.HTTPReportListener.html#org.globalplatform.HTTPReportListener.httpAdministationSessionReport_changed(short)" class="hiddenlink">void <b>httpAdministationSessionReport(short)</b></a><br><br><blockquote>Notifies the <strike>applet</strike><span style="background: #FFFF00">Application</span> that the requested <strike>HTTPAdministrationSession</strike><span style="background: #FFFF00">HTTP</span> <strike>has been</strike><span style="background: #FFFF00">Administration Session
</span> successfully completed or not.<strike>
</strike><span style="background: #FFFF00"> </span> <p><strike>
</strike><span style="background: #FFFF00">

</span> The OPEN <strike>notify</strike><span style="background: #FFFF00">notifies</span> the <strike>Applet</strike><span style="background: #FFFF00">Application</span> when the <strike>HTTPAdministrationSession</strike><span style="background: #FFFF00">HTTP Administration Session</span> <strike>end</strike><span style="background: #FFFF00">ends
</span> or when <span style="background: #FFFF00">the </span>retry policy is exhausted.<p>
 
 @param status <strike>With following meaning
  </strike><span style="background: #FFFF00">Either</span> <A HREF="1.6\javadoc\core\.html#HTTP_SESSION_NO_ERROR"><TT><span style="background: #FFFF00">.</span>HTTP_SESSION_NO_ERROR<strike>:  HTTPAdministration session</strike></TT></A> <strike>End
 </strike><span style="background: #FFFF00">(failure)</span> <span style="background: #FFFF00">or</span> <A HREF="1.6\javadoc\core\.html#HTTP_SESSION_ERROR"><TT><span style="background: #FFFF00">.</span>HTTP_SESSION_ERROR<strike>: retry policy of</strike></TT></A> <strike>the HTTPAdministration session is exhausted</strike><span style="background: #FFFF00">(success).</span></blockquote>
<A NAME="org.globalplatform.HTTPReportListener.field.HTTP_SESSION_ERROR"></A><a href="org.globalplatform.HTTPReportListener.html" class="hiddenlink">Class <b>HTTPReportListener</b></a>, <a href="org.globalplatform.HTTPReportListener.html#org.globalplatform.HTTPReportListener.HTTP_SESSION_ERROR" class="hiddenlink">short <b>HTTP_SESSION_ERROR</b></a><br><br><blockquote>Constant notifying that <strike>the HTTPAdministartion</strike><span style="background: #FFFF00">a HTTP</span> <strike>session</strike><span style="background: #FFFF00">Administration Session</span> <strike>fails</strike><span style="background: #FFFF00">failed</span>. <strike>
</strike><span style="background: #FFFF00">That</span> <strike>The</strike><span style="background: #FFFF00">is, the
</span> retry policy of the session is exhausted and the administration <strike>session</strike><span style="background: #FFFF00">session
</span> request is aborted.</blockquote>
<A NAME="org.globalplatform.HTTPReportListener.field.HTTP_SESSION_NO_ERROR"></A><a href="org.globalplatform.HTTPReportListener.html" class="hiddenlink">Class <b>HTTPReportListener</b></a>, <a href="org.globalplatform.HTTPReportListener.html#org.globalplatform.HTTPReportListener.HTTP_SESSION_NO_ERROR" class="hiddenlink">short <b>HTTP_SESSION_NO_ERROR</b></a><br><br><blockquote>Constant notifying that <strike>HTTPAdministration session End</strike><span style="background: #FFFF00">a HTTP Administration</span> <span style="background: #FFFF00">Session ended </span>successfully</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.Personalization!class"></A><a href="org.globalplatform.Personalization.html" class="hiddenlink">Class <b>Personalization</b></a><br><br><blockquote>This <span style="background: #FFFF00">interface </span>defines <strike>the interface that represents</strike><span style="background: #FFFF00">a method through which</span> an <strike>applet method</strike><span style="background: #FFFF00">Application</span> <strike>accessible through the OPEN</strike><span style="background: #FFFF00">may forward
 input data</span> to <strike>
 the</strike><span style="background: #FFFF00">another</span> Application<strike>'s associated</strike> <strike>Security</strike><span style="background: #FFFF00">and</span> <strike>Domain.</strike><span style="background: #FFFF00">retrieve</span> <strike>The Applet class that</strike><span style="background: #FFFF00">output data from that
</span> <strike>will</strike><span style="background: #FFFF00">Application.<p>

</span> <strike>use the additional 
 functionality that allows a Security Domain</strike><span style="background: #FFFF00">This interface shall be implemented by an Application that wishes</span> to <strike>pass data to</strike><span style="background: #FFFF00">receive
</span> <strike>the applet and send back</strike><span style="background: #FFFF00">personalization data forwarded by its</span> <strike>Applet#s</strike><span style="background: #FFFF00">associated</span> <strike>
 data personalization must implement this interface</strike><span style="background: #FFFF00">Security Domain and request
 outputting response data</span>.<strike>
</strike> <strike>
 The</strike><span style="background: #FFFF00">In</span> <strike>OPEN is</strike><span style="background: #FFFF00">such a</span> <strike>responsible</strike><span style="background: #FFFF00">scenario,</span> <strike>of calling this new interface if</strike><span style="background: #FFFF00">if the Application implements
 both the</span> <strike>implemented</strike><A HREF="1.6\javadoc\core\org/globalplatform/Personalization/Application.html"><TT><span style="background: #FFFF00">Application</TT></A></span> <strike>by</strike><span style="background: #FFFF00">and</span> the <strike>Applet to 
</strike><A HREF="1.6\javadoc\core\org/globalplatform/Personalization/Personalization.html"><TT><span style="background: #FFFF00">Personalization</TT></A></span> <strike>personalize</strike><span style="background: #FFFF00">interface</span>, <strike>otherwise</strike><span style="background: #FFFF00">then
</span> the <strike>interface Application</strike><span style="background: #FFFF00">Security Domain</span> shall <strike>be called. 
 See also section 7.3.3 of</strike><span style="background: #FFFF00">use</span> the <strike>GlobalPlatform Card Specification</strike><A HREF="1.6\javadoc\core\org/globalplatform/Personalization/Personalization.html"><TT><span style="background: #FFFF00">Personalization</TT></A></span> <strike>v2</strike><span style="background: #FFFF00">interface</span>.<strike>2 -</strike> <strike>Personalization</strike><p><span style="background: #FFFF00">

</span> <strike>support.
</strike><span style="background: #FFFF00">@see</span> <strike>
</strike><span style="background: #FFFF00">Application

</span> @since export file version 1.2</blockquote>
<A NAME="org.globalplatform.Personalization.dmethod.processData(byte[], short, short, byte[], short)"></A><a href="org.globalplatform.Personalization.html" class="hiddenlink">Class <b>Personalization</b></a>, <a href="org.globalplatform.Personalization.html#org.globalplatform.Personalization.processData_changed(byte[], short, short, byte[], short)" class="hiddenlink">short <b>processData(byte[], short, short, byte[], short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Processes</span> <strike>method processes Application</strike><span style="background: #FFFF00">application</span> specific data received from another <strike>entity
 </strike>on<strike> the </strike><span style="background: #FFFF00">-</span>card<span style="background: #FFFF00"> entity</span>.<p><span style="background: #FFFF00">

</span> If <strike>this other entity is the</strike><span style="background: #FFFF00">the Application invoking this method</span> <strike>Application's</strike><span style="background: #FFFF00">is</span> <strike>associated</strike><span style="background: #FFFF00">a</span> Security Domain<strike>,
 this</strike> <strike>data is the APDU</strike><span style="background: #FFFF00">then it shall
 be</span> <strike>buffer.
</strike><span style="background: #FFFF00">assumed</span> <strike>Notes</strike><span style="background: #FFFF00">that</span>:<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>During</strike><span style="background: #FFFF00">Both</span> the <strike>invocation</strike><code><span style="background: #FFFF00">inBuffer</code></span> <strike>the</strike><span style="background: #FFFF00">and</span> <strike>Java</strike><code><span style="background: #FFFF00">outBuffer</code></span> <strike>Card VM performs</strike><span style="background: #FFFF00">byte arrays
 are</span> <strike>a</strike><em><span style="background: #FFFF00">global</em></span> <strike>context switch</strike><span style="background: #FFFF00">byte arrays</span>;
 <span style="background: #FFFF00">
 </span><li>The <strike>applet</strike><span style="background: #FFFF00">data forwarded by the Security Domain</span> is <strike>responsible for</strike><span style="background: #FFFF00">a STORE</span> <strike>managing</strike><span style="background: #FFFF00">DATA command. The
 <code>sOffset</code> parameter</span> <span style="background: #FFFF00">locates </span>the <strike>atomicity</strike><span style="background: #FFFF00">class byte</span> of <strike>its own</strike><span style="background: #FFFF00">the command</span> <strike>data;
</strike><span style="background: #FFFF00">and
</span> <span style="background: #FFFF00">the</span> <strike>As</strike><code><span style="background: #FFFF00">sLength</code></span> <strike>a</strike><span style="background: #FFFF00">parameter indicates the length of the entire
 command (i.e. header + data field).

 <li>The</span> Security Domain <strike>immaterial</strike><span style="background: #FFFF00">will</span> <strike>of</strike><span style="background: #FFFF00">send back to the off-card entity the output
</span> <span style="background: #FFFF00">data written by </span>the Application <strike>Life</strike><span style="background: #FFFF00">to <code>outBuffer</code>.

</span> <strike>Cycle</strike><li><span style="background: #FFFF00">Any</span> <strike>State can
 invoke</strike><span style="background: #FFFF00">exception thrown by</span> this method<span style="background: #FFFF00"> will be rethrown by the Security
 Domain</span>, <strike>it</strike><span style="background: #FFFF00">hence will be converted to and returned as a response status word
 to the off-card entity. If the exception</span> is <span style="background: #FFFF00">an <A HREF="1.6\javadoc\core\ISOException.html"><TT>ISOException</TT></A>, then
 </span>the <strike>responsibility</strike><span style="background: #FFFF00">status</span> <strike>of</strike><span style="background: #FFFF00">word will be</span> the <strike>applet to ensure</strike><span style="background: #FFFF00">reason code of</span> that <strike>its</strike><span style="background: #FFFF00">exception.</span> <strike>
</strike><span style="background: #FFFF00">Otherwise,</span> <strike>current Life Cycle State</strike><span style="background: #FFFF00">a
 status word of</span> <strike>is</strike><span style="background: #FFFF00">'6F00'</span> <strike>valid</strike><span style="background: #FFFF00">will</span> <strike>for</strike><span style="background: #FFFF00">be returned.

 </ul>

 <p>Notes:<ul>

 <li><em>Upon invocation of</span> this <strike>operation</strike><span style="background: #FFFF00">method, the Java Card VM performs a
 context switch</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> <li><em>As the <strike>applet</strike><span style="background: #FFFF00">Application</span> is not the <span style="background: #FFFF00">currently </span>selected Application,<strike>
</strike> <strike>it</strike><span style="background: #FFFF00">it
</span> should not <strike>use</strike><span style="background: #FFFF00">attempt</span> <strike>the</strike><span style="background: #FFFF00">to access</span> <span style="background: #FFFF00">transient memory of type
 <code></span>CLEAR_ON_DESELECT</code> <strike>when creating transient</strike><span style="background: #FFFF00">during the processing</span> <strike>arrays</strike><span style="background: #FFFF00">of this method</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> <li><em><strike>If</strike><span style="background: #FFFF00">The</span> <strike>the method throws an ISOException</strike><span style="background: #FFFF00">Application is responsible for managing</span> the <strike>JavaCard</strike><span style="background: #FFFF00">atomic
</span> <strike>runtime environment sends 
</strike><span style="background: #FFFF00">modification of its own</span> <strike>the</strike><span style="background: #FFFF00">data,</span> <strike>associated</strike><span style="background: #FFFF00">if</span> <strike>reason</strike><span style="background: #FFFF00">needed.</em>

</span> <strike>code</strike><li><em><span style="background: #FFFF00">As</span> <strike>as the response status</strike><span style="background: #FFFF00">this method may be</span> <strike>instead.</strike><span style="background: #FFFF00">invoked</span> <strike>
 If the Exception thrown does</strike><span style="background: #FFFF00">by a Security Domain immaterial of
</span> <strike>not</strike><span style="background: #FFFF00">the Application's</span> <strike>extends</strike><span style="background: #FFFF00">internal</span> <strike>ISOException</strike><span style="background: #FFFF00">state,</span> the <strike>reason code</strike><span style="background: #FFFF00">Application</span> is <strike>ISO7816.SW_UNKNOWN.
</strike><span style="background: #FFFF00">responsible</span> <strike>The</strike><span style="background: #FFFF00">for
 ensuring</span> <strike>personalization</strike><span style="background: #FFFF00">that its internal state is valid</span> <strike>session remains open</strike><span style="background: #FFFF00">for this operation</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> </ul>
  
 @param inBuffer <strike>the source </strike>byte array containing <strike>the</strike><span style="background: #FFFF00">input</span> data<span style="background: #FFFF00">.</span> <strike>expected by the</strike><span style="background: #FFFF00">Must be a</span> <strike>applet.</strike><em><span style="background: #FFFF00">global</em></span>
 <strike>This buffer must be</strike><span style="background: #FFFF00">byte</span> <strike>global</strike><span style="background: #FFFF00">array</span>.
 @param inOffset <strike>starting</strike> offset <strike>within source byte</strike><span style="background: #FFFF00">of input data</span> <strike>array</strike><span style="background: #FFFF00">within <code>inBuffer</code></span>.
 @param inLength <span style="background: #FFFF00"> </span>length of <span style="background: #FFFF00">input </span>data.
 @param outBuffer <strike>the out </strike>byte array where <strike>the</strike><span style="background: #FFFF00">output</span> data <strike>expected by the Off-Card Entity </strike>shall be <strike>set</strike><span style="background: #FFFF00">written</span>. <strike>
</strike><span style="background: #FFFF00">Must</span> <strike>This buffer</strike><span style="background: #FFFF00">be a
</span> <strike>shall</strike><em><span style="background: #FFFF00">global</em></span> <strike>be global</strike><span style="background: #FFFF00">byte array</span>.
 @param outOffset <strike>starting </strike>offset <strike>within out</strike><span style="background: #FFFF00">where output</span> <strike>byte</strike><span style="background: #FFFF00">data shall be written within
</span> <strike>array
</strike><code><span style="background: #FFFF00">inBuffer</code>.

</span> @return <strike>The</strike><span style="background: #FFFF00">the</span> number of bytes <strike>set</strike><span style="background: #FFFF00">written to <code>outBuffer</code>.

 @exception</span> <strike>inoutBuffer at</strike><span style="background: #FFFF00">SecurityException if</span> <strike>outOffset</strike><code><span style="background: #FFFF00">inBuffer</code> or
 <code>outBuffer</code> is not a <em>global</em> byte array</span>.
 @<strike>throws Exceptions thrown</strike><span style="background: #FFFF00">exception NullPointerException if</span> <strike>are</strike><code><span style="background: #FFFF00">inBuffer</code></span> <strike>Application</strike><span style="background: #FFFF00">or
</span> <strike>specific</strike><code><span style="background: #FFFF00">outBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading intput data or writing
 output data would cause access of data outside array bounds</span>.</blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.SecureChannel!class"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a><br><br><blockquote>This <span style="background: #FFFF00">interface </span>defines <strike>an interface to be</strike><span style="background: #FFFF00">basic Secure Channel services</span> used <span style="background: #FFFF00">to manage entity
 authentication and protect APDU commands and responses. It is typically
 exposed </span>by <span style="background: #FFFF00">a Security Domain to its associated Applications.<p>

 Using </span>an <strike>Application that may want to</strike><span style="background: #FFFF00">instance of this interface requires</span> <strike>delegate</strike><span style="background: #FFFF00">no knowledge</span> <span style="background: #FFFF00">of </span>the <strike>handling</strike><span style="background: #FFFF00">underlying
</span> <strike>of</strike><span style="background: #FFFF00">protocols,</span> <strike>entity</strike><span style="background: #FFFF00">algorithms</span> <strike>
</strike><span style="background: #FFFF00">and secrets used to perform</span> <span style="background: #FFFF00">entity </span>authentication <span style="background: #FFFF00">and
 provide integrity </span>and <span style="background: #FFFF00">confidentiality of </span>APDU <strike>security</strike><span style="background: #FFFF00">commands and responses, which
 only need to be known by the provider of the instance.<p>

 An</span> <span style="background: #FFFF00">Application that wishes to delegate such activities </span>to its <span style="background: #FFFF00">associated
 Security Domain shall retrieve a <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannel/SecureChannel.html"><TT>SecureChannel</TT></A> instance provided by
 its </span>associated Security Domain<span style="background: #FFFF00"> using the <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannel/GPSystem.html#getSecureChannel"><TT>GPSystem.getSecureChannel</TT></A>
 method. On some implementations, this <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannel/SecureChannel.html"><TT>SecureChannel</TT></A> instance may also
 be retrieved using the <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannel/GPSystem.html#getService"><TT>GPSystem.getService</TT></A> method</span>.<p><span style="background: #FFFF00">
</span> 
 <strike>This</strike><span style="background: #FFFF00">If the card supports logical channels,</span> <span style="background: #FFFF00">this </span>interface is <strike>designed</strike><span style="background: #FFFF00">responsible</span> <strike>to</strike><span style="background: #FFFF00">for
 correctly</span> <strike>offer interoperability to the Application in that it requires no knowledge 
</strike><span style="background: #FFFF00">handling any indication of a logical channel number present in the
 class</span> <span style="background: #FFFF00">byte </span>of <strike>the</strike><span style="background: #FFFF00">APDU</span> <strike>mechanisms</strike><span style="background: #FFFF00">commands.</span> <strike>used</strike><span style="background: #FFFF00">In particular, it shall be</span> <span style="background: #FFFF00">able </span>to <strike>perform the authentication</strike><span style="background: #FFFF00">verify and
 remove</span> <strike>or</strike><span style="background: #FFFF00">(i.e.</span> <strike>of</strike><span style="background: #FFFF00">unwrap)</span> the <strike>scheme</strike><span style="background: #FFFF00">protection</span> <strike>used</strike><span style="background: #FFFF00">(if</span> <strike>for</strike><span style="background: #FFFF00">any) of an</span> APDU <strike>security and shall allow 
 an Application to interface</strike><span style="background: #FFFF00">command without
 altering such indication of a logical channel</span> <strike>correctly</strike><span style="background: #FFFF00">number.

</span> <strike>with</strike><span style="background: #FFFF00">Upon successful initialization of</span> a <span style="background: #FFFF00">Secure Channel Session, the
 implementation shall establish both a compulsory Session </span>Security <strike>Domain</strike><span style="background: #FFFF00">Level and a
 Current Security Level:<ul>

</span> <strike>immaterial</strike><li><span style="background: #FFFF00">The compulsory <em>Session Security Level</em> is the Security</span> <span style="background: #FFFF00">Level negotiated
 during the initialization </span>of the <strike>mechanisms</strike><span style="background: #FFFF00">session,</span> <strike>or schemes</strike><span style="background: #FFFF00">that shall</span> <strike>used</strike><span style="background: #FFFF00">apply as a minimum
 security requirement during the entire Secure Channel Session</span>. <strike>
 Prior to using this</strike><span style="background: #FFFF00">The compulsory
 Session Security Level</span> <strike>interface,</strike><span style="background: #FFFF00">shall</span> <strike>an</strike><span style="background: #FFFF00">only</span> <strike>Application</strike><span style="background: #FFFF00">be reset upon (full) termination of the
</span> <span style="background: #FFFF00">Secure Channel Session.

 <li>The <em>Current Security Level</em> </span>is <strike>required</strike><span style="background: #FFFF00">the security requirement that
 shall indeed apply</span> to <strike>obtain</strike><span style="background: #FFFF00">APDU commands</span> <strike>a</strike><span style="background: #FFFF00">(and responses) during the</span> <strike>handle</strike><span style="background: #FFFF00">session</span> <span style="background: #FFFF00">and is
 initialized </span>to <strike>its associated Security</strike><span style="background: #FFFF00">the same value</span> <strike>Domain#s</strike><span style="background: #FFFF00">as</span> <strike>
 SecureChannel interface object by invoking</strike><span style="background: #FFFF00">the compulsory Session Security Level at</span> <span style="background: #FFFF00">the
 beginning of </span>the <strike>GPSystem</strike><span style="background: #FFFF00">session</span>.<strike>getSecureChannel</strike><span style="background: #FFFF00"> The Current Security Level may be subsequently
 updated </span>(<span style="background: #FFFF00">e.g. R-MAC or not</span>) <strike>method.</strike><span style="background: #FFFF00">upon</span> <strike>
 The SecureChannel interface shall only be</strike><span style="background: #FFFF00">successful processing of some commands
 specific to</span> <strike>exposed</strike><span style="background: #FFFF00">the underlying security protocol or upon successful</span> <strike>through</strike><span style="background: #FFFF00">invocation</span> <span style="background: #FFFF00">of
 </span>the <strike>GPSystem</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannel/SecureChannelx.html#setSecurityLevel"><TT><span style="background: #FFFF00">SecureChannelx</span>.<strike>getSecureChannel()</strike><span style="background: #FFFF00">setSecurityLevel</TT></A></span> method<strike>.
</strike> <strike>
</strike><span style="background: #FFFF00">(if</span> <strike>In</strike><span style="background: #FFFF00">supported),</span> <strike>all cases where</strike><span style="background: #FFFF00">but shall
 never</span> <span style="background: #FFFF00">get below </span>the <strike>Application</strike><span style="background: #FFFF00">minimum</span> <strike>passes</strike><span style="background: #FFFF00">requirement defined by</span> the <strike>APDU</strike><span style="background: #FFFF00">compulsory Session
 Security Level.</span> <strike>buffer</strike><span style="background: #FFFF00">The Current Security Level,</span> as <strike>a</strike><span style="background: #FFFF00">well as any information
</span> <strike>parameter</strike><span style="background: #FFFF00">relating</span> to the <span style="background: #FFFF00">Secure Channel Session (except the compulsory Session
 </span>Security <strike>Domain</strike><span style="background: #FFFF00">Level)</span>, <strike>the class byte</strike><span style="background: #FFFF00">shall be reset</span> <strike>
</strike><span style="background: #FFFF00">upon abortion</span> <span style="background: #FFFF00">or termination </span>of the <strike>APDU shall</strike><span style="background: #FFFF00">Secure
 Channel</span> <strike>not</strike><span style="background: #FFFF00">Session.

 </ul>

 <a name="sc_abort">See Card Specification v2.2.1 section 10.2.3 for details
 about abortion and termination of a Secure Channel Session.</a><p>
 
 Until it is aborted, a Secure Channel Session shall</span> be <strike>modified</strike><span style="background: #FFFF00">bound to the following
 information:<ul>

 <li>the Logical Channel on which it was initiated: The session only exists on
 the Logical Channel on which it was initiated</span>. <strike>This</strike><span style="background: #FFFF00">If an</span> <strike>ensures</strike><span style="background: #FFFF00">Application</span> <strike>that</strike><span style="background: #FFFF00">invokes this
 interface from another Logical</span> <span style="background: #FFFF00">Channel, then </span>the <strike>Security</strike><span style="background: #FFFF00">interface</span> <strike>Domain</strike><span style="background: #FFFF00">shall behave as if
 no Secure Channel Session was currently</span> <strike>knows</strike><span style="background: #FFFF00">open</span> <span style="background: #FFFF00">but </span>the <strike>logical channel</strike><span style="background: #FFFF00">existing session</span> <strike>number</strike><span style="background: #FFFF00">shall
 neither be aborted nor be terminated</span>. <span style="background: #FFFF00">For resource management reasons,</span>
 <strike>If</strike><span style="background: #FFFF00">attempts to open another Secure Channel Session from another Logical Channel
 (i.e. concurrently</span> <span style="background: #FFFF00">to </span>the <strike>card</strike><span style="background: #FFFF00">existing</span> <strike>supports</strike><span style="background: #FFFF00">one(s))</span> <strike>logical</strike><span style="background: #FFFF00">may</span> <strike>channels,</strike><span style="background: #FFFF00">be</span> <strike>it</strike><span style="background: #FFFF00">rejected</span> <strike>is</strike><span style="background: #FFFF00">by the
 implementation.

</span> <li>the <strike>responsibility of</strike><span style="background: #FFFF00">Application that</span> <span style="background: #FFFF00">initiated </span>the <strike>Security</strike><span style="background: #FFFF00">session:</span> <strike>Domain</strike><span style="background: #FFFF00">Any</span> <span style="background: #FFFF00">call performed </span>to <strike>correctly</strike><span style="background: #FFFF00">this
</span> <strike>manage</strike><span style="background: #FFFF00">interface by another Application from</span> the <strike>
 logical channel information when</strike><span style="background: #FFFF00">Logical Channel attached to the
</span> <strike>processing</strike><span style="background: #FFFF00">session shall be rejected with an exception. For example, this may happen if
 this other Application somehow obtained a reference to this interface</span> <span style="background: #FFFF00">using
 </span>the <strike>APDU</strike><span style="background: #FFFF00">sharing mechanism</span>.

 </ul><span style="background: #FFFF00">
 
 </span>@since <ul><span style="background: #FFFF00">
 <li></span>export file version 1.0<span style="background: #FFFF00">: initial version.
 <li>export file version 1.6: reviewed overall description of this interface.
 </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.decryptData(byte[], short, short)"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.decryptData_changed(byte[], short, short)" class="hiddenlink">short <b>decryptData(byte[], short, short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Decrypts</span> <strike>method is used to</strike><span style="background: #FFFF00">sensitive</span> <strike>decrypt</strike><span style="background: #FFFF00">user</span> data<strike> located in the input buffer</strike>.<p>
 <strike>Notes:</strike>
 <strike>Processing</strike><span style="background: #FFFF00">The</span> <strike>this method shall comply</strike><span style="background: #FFFF00">decryption algorithm and cryptographic</span> <span style="background: #FFFF00">key used </span>to <strike>the</strike><span style="background: #FFFF00">decrypt</span> <strike>rules</strike><span style="background: #FFFF00">data,</span> <strike>of the Secure</strike><span style="background: #FFFF00">as
 well as</span> <strike>Channel</strike><span style="background: #FFFF00">any padding</span> <strike>Protocol</strike><span style="background: #FFFF00">method,</span> <strike>
 implemented by the Security</strike><span style="background: #FFFF00">are known implicitly and depend</span> <strike>Domain;
</strike><span style="background: #FFFF00">on</span> <strike>The</strike><span style="background: #FFFF00">the
</span> <strike>Security Domain</strike><span style="background: #FFFF00">underlying security</span> <strike>implicitly</strike><span style="background: #FFFF00">protocol.<p>

</span> <strike>knows</strike><span style="background: #FFFF00">If</span> the <strike>key to</strike><span style="background: #FFFF00">Current</span> <strike>be used for</strike><span style="background: #FFFF00">Security Level is</span> <strike>decryption</strike><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT>.<strike>
</strike><span style="background: #FFFF00">NO_SECURITY_LEVEL</TT></A></span> <strike>The</strike><span style="background: #FFFF00">or</span> <strike>Security Domain is implicitly aware of</strike><span style="background: #FFFF00">the
 necessary cryptographic keys are not</span> <strike>any</strike><span style="background: #FFFF00">available,</span> <strike>padding that may be present in the
</strike><span style="background: #FFFF00">then this method shall
 throw an exception</span> <strike>decrypted</strike><span style="background: #FFFF00">(see below).<p>

 Otherwise,</span> <span style="background: #FFFF00">the </span>data <strike>and this is</strike><span style="background: #FFFF00">shall be decrypted</span> <strike>discarded.
</strike><span style="background: #FFFF00">and</span> <strike>The</strike><span style="background: #FFFF00">the</span> clear text data <strike>replaces</strike><span style="background: #FFFF00">shall
</span> <span style="background: #FFFF00">replace </span>the <strike>ciphered</strike><span style="background: #FFFF00">encrypted</span> data within the <strike>byte</strike><code><span style="background: #FFFF00">baBuffer</code> byte
</span> array. The <strike>removal
</strike><span style="background: #FFFF00">removal</span> of padding may cause the length of the clear text <strike>data</strike><span style="background: #FFFF00">data
</span> to be shorter than the length of the <strike>ciphered</strike><span style="background: #FFFF00">encrypted</span> data.<strike>
</strike> <strike>The</strike> <strike>applet is responsible for checking the integrity of the decrypted</strike><span style="background: #FFFF00">Any failure in the
 decryption or padding removal process shall</span> <strike>data</strike><span style="background: #FFFF00">result in an exception being
 thrown (see below)</span>.<p><span style="background: #FFFF00">

</span> <strike>
</strike><span style="background: #FFFF00">Notes:<ul>

</span> <li><em><strike>A Secure Channel Session shall be opened and</strike><span style="background: #FFFF00">The Application is responsible for removing application specific
</span> <strike>a</strike><span style="background: #FFFF00">padding,</span> <strike>sensitive</strike><span style="background: #FFFF00">if</span> <strike>data</strike><span style="background: #FFFF00">any.</span> <strike>decryption</strike><span style="background: #FFFF00">For</span> <strike>key</strike><span style="background: #FFFF00">example,</span> <strike>shall be</strike><span style="background: #FFFF00">if the</span> <strike>available;
</strike><span style="background: #FFFF00">underlying</span> <strike>This</strike><span style="background: #FFFF00">security</span> <strike>method</strike><span style="background: #FFFF00">protocol is</span> <strike>fails</strike><span style="background: #FFFF00">SCP
</span> <strike>if</strike><span style="background: #FFFF00">'02',</span> <strike>a Secure Channel Session</strike><span style="background: #FFFF00">then no padding method</span> is <span style="background: #FFFF00">defined and this method will </span>not <strike>open 
</strike><span style="background: #FFFF00">remove any
</span> <strike>(i.e</strike><span style="background: #FFFF00">padding</span>.<strike> Session</strike></em><span style="background: #FFFF00">

</span> <strike>Security</strike><li><em><span style="background: #FFFF00">The</span> <strike>Level =</strike><span style="background: #FFFF00">Application is</span> <strike>NO_SECURITY_LEVEL)</strike><span style="background: #FFFF00">responsible</span> <strike>or if</strike><span style="background: #FFFF00">for checking</span> the <strike>corresponding session</strike><span style="background: #FFFF00">integrity</span> <strike>keys are not available</strike><span style="background: #FFFF00">of the
 decrypted data</span>.<span style="background: #FFFF00"> </span></em><strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @param baBuffer <span style="background: #FFFF00">byte array containing </span>the <strike>source byte</strike><span style="background: #FFFF00">data that</span> <strike>array</strike><span style="background: #FFFF00">shall be decrypted</span>.
 @param sOffset <span style="background: #FFFF00"> </span>offset <strike>within</strike><span style="background: #FFFF00">of</span> the <strike>source byte array</strike><span style="background: #FFFF00">data</span> <strike>to start the decryption</strike><span style="background: #FFFF00">that shall be decrypted</span>.
 @param sLength <strike>the</strike> <strike>number</strike><span style="background: #FFFF00">length</span> of <strike>bytes</strike><span style="background: #FFFF00">the</span> <strike>to</strike><span style="background: #FFFF00">data</span> <strike>decrypt</strike><span style="background: #FFFF00">that shall be decrypted</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>The </strike>length of the <strike>clear text</strike><span style="background: #FFFF00">decrypted</span> data<span style="background: #FFFF00">, with any padding removed if a padding
 method is defined for the underlying security protocol</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @exception ISOException with <span style="background: #FFFF00">one of </span>the following reason codes<span style="background: #FFFF00"> (other
 reason codes specific to the underlying security protocol may be
 returned)</span>:<strike>
</strike><ul><span style="background: #FFFF00">

</span> <li><strike>ISO7816.SW_SECURITY_STATUS_NOT_SATISFIED</strike><span style="background: #FFFF00">'6985'</span> if <strike>a Secure Channel Session has not been opened</strike><span style="background: #FFFF00">there is no Secure
 Channel Session currently open</span>.<strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>ISO7816.SW_WRONG_LENGTH</strike><span style="background: #FFFF00">'6700'</span> if the length of <span style="background: #FFFF00">the </span>data <strike>to</strike><span style="background: #FFFF00">that shall
</span> be decrypted is not valid<span style="background: #FFFF00"> (e.g. underlying algorithm requires data to be
 block-aligned and input data are not)</span>.</li><strike>
</strike><span style="background: #FFFF00">

</span> </ul><span style="background: #FFFF00">

 </span>@exception <strike>java.lang.</strike>SecurityException if <code>baBuffer</code> is not accessible <strike>in</strike><span style="background: #FFFF00">in
</span> the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context <strike>
 </strike>e.g. <code>baBuffer</code> is not a <em>global</em><span style="background: #FFFF00">
</span> array nor an array belonging to the caller context.<span style="background: #FFFF00">
 @exception NullPointerException if <code>baBuffer</code> is
 <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading user data or writing
 decrypted data would cause access of data outside array bounds.</span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.encryptData(byte[], short, short)"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.encryptData_changed(byte[], short, short)" class="hiddenlink">short <b>encryptData(byte[], short, short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Encrypts</span> <span style="background: #FFFF00">sensitive user data.<p>

 If this </span>method is <strike>used to encrypt data located in</strike><span style="background: #FFFF00">not supported by the implementation or</span> the <strike>input buffer.
</strike><span style="background: #FFFF00">underlying
</span> <strike>Notes:
</strike><span style="background: #FFFF00">protocol</span> <strike>Processing</strike><span style="background: #FFFF00">does</span> <strike>this method shall comply to the</strike><span style="background: #FFFF00">not define any sensitive data encryption</span> <strike>rules</strike><span style="background: #FFFF00">mechanism,</span> <strike>of the Secure Channel Protocol 
 implemented by the</strike><span style="background: #FFFF00">it shall
 do nothing and simply throw an exception</span> <strike>Security</strike><span style="background: #FFFF00">(see</span> <strike>Domain;
</strike><span style="background: #FFFF00">below).<p>

</span> The <strike>Security Domain is implicitly aware</strike><span style="background: #FFFF00">encryption algorithm and cryptographic key</span> <strike>of</strike><span style="background: #FFFF00">used to encrypt data,</span> <span style="background: #FFFF00">as
 well as </span>any padding <strike>that</strike><span style="background: #FFFF00">method, are</span> <strike>must</strike><span style="background: #FFFF00">known</span> <strike>be</strike><span style="background: #FFFF00">implicitly and</span> <strike>applied to</strike><span style="background: #FFFF00">depend on</span> the
 <strike>clear</strike><span style="background: #FFFF00">underlying</span> <strike>text</strike><span style="background: #FFFF00">security</span> <strike>data</strike><span style="background: #FFFF00">protocol.<p>

</span> <strike>prior to encryption according to the</strike><span style="background: #FFFF00">If the Current Security Level is</span> <strike>Secure</strike><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT><span style="background: #FFFF00">.NO_SECURITY_LEVEL</TT></A></span> <strike>Channel</strike><span style="background: #FFFF00">or</span> <strike>Protocol;
</strike><span style="background: #FFFF00">the
</span> <strike>The</strike><span style="background: #FFFF00">necessary</span> <strike>Security</strike><span style="background: #FFFF00">cryptographic keys</span> <strike>Domain</strike><span style="background: #FFFF00">are</span> <strike>implicitly</strike><span style="background: #FFFF00">not available, then this method shall
 throw an exception (see below).<p>

</span> <strike>knows</strike><span style="background: #FFFF00">Otherwise,</span> the <strike>key to</strike><span style="background: #FFFF00">data shall</span> be <strike>used</strike><span style="background: #FFFF00">padded</span> <strike>for</strike><span style="background: #FFFF00">(NOTE:</span> <strike>encryption.
</strike><span style="background: #FFFF00">depends</span> <strike>The</strike><span style="background: #FFFF00">on</span> <strike>ciphered</strike><span style="background: #FFFF00">the underlying
 protocol) and encrypted and the encrypted</span> data <strike>replaces</strike><span style="background: #FFFF00">shall replace</span> the <strike>clear</strike><span style="background: #FFFF00">clear
</span> text data within the <code><span style="background: #FFFF00">baBuffer</code> </span>byte array.<strike>
</strike> <strike>A</strike><span style="background: #FFFF00">The</span> <strike>Secure Channel Session</strike><span style="background: #FFFF00">addition of
 padding</span> <strike>shall</strike><span style="background: #FFFF00">may cause the</span> <span style="background: #FFFF00">length of the encrypted data to </span>be <strike>opened and a sensitive</strike><span style="background: #FFFF00">longer than the
 length</span> <span style="background: #FFFF00">of the clear text </span>data<span style="background: #FFFF00">.</span> <strike>encryption</strike> <strike>key</strike><span style="background: #FFFF00">Any failure in the padding or encryption
 process</span> shall <strike>be</strike><span style="background: #FFFF00">result</span> <strike>available;
</strike><span style="background: #FFFF00">in an exception being thrown (see below).<p>

 Notes:<ul>

</span> <li><em><strike>This</strike><span style="background: #FFFF00">The</span> <strike>method</strike><span style="background: #FFFF00">Application is responsible for adding</span> <strike>fails</strike><span style="background: #FFFF00">application</span> <span style="background: #FFFF00">specific
 padding, </span>if <strike>a</strike><span style="background: #FFFF00">needed.</span> <strike>Secure</strike><span style="background: #FFFF00">For</span> <strike>Channel</strike><span style="background: #FFFF00">example,</span> <strike>Session</strike><span style="background: #FFFF00">if the underlying</span> <span style="background: #FFFF00">security protocol </span>is <strike>not</strike><span style="background: #FFFF00">SCP
</span> <strike>open</strike><span style="background: #FFFF00">'02',</span> <strike>
</strike><span style="background: #FFFF00">then</span> <strike>(i.e.</strike><span style="background: #FFFF00">no</span> <strike>Session Security Level =</strike><span style="background: #FFFF00">padding method is defined</span> <strike>NO_SECURITY_LEVEL)</strike><span style="background: #FFFF00">and</span> <strike>or if the corresponding session</strike><span style="background: #FFFF00">this method by itself will</span> <strike>keys</strike><span style="background: #FFFF00">not
 add any padding, which may lead to an exception being thrown (see</span> <span style="background: #FFFF00">below) if
 input data </span>are not <strike>available</strike><span style="background: #FFFF00">block-aligned</span>.<strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>the </strike>byte array containing the data <strike>to</strike><span style="background: #FFFF00">that shall</span> be <strike>processed</strike><span style="background: #FFFF00">encrypted</span>.
 @param sOffset <span style="background: #FFFF00"> </span>offset <strike>within</strike><span style="background: #FFFF00">of</span> the <strike>byte array</strike><span style="background: #FFFF00">data</span> <strike>to start the encryption</strike><span style="background: #FFFF00">that shall be encrypted</span>.
 @param sLength <strike>the</strike> <strike>number</strike><span style="background: #FFFF00">length</span> of <strike>bytes</strike><span style="background: #FFFF00">the</span> <strike>to</strike><span style="background: #FFFF00">data</span> <strike>encrypt</strike><span style="background: #FFFF00">that shall be encrypted</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @return <strike>The </strike>length of the encrypted data.<strike>
</strike><span style="background: #FFFF00">

</span> @exception <strike>ArrayIndexOutOfBoundsException</strike><span style="background: #FFFF00">ISOException</span> <strike>
</strike><span style="background: #FFFF00">with</span> <strike>if</strike><span style="background: #FFFF00">one</span> <strike>enciphering produces data outside array</strike><span style="background: #FFFF00">of the following reason codes</span> <strike>bounds.</strike><span style="background: #FFFF00">(other
</span> <strike>
</strike><span style="background: #FFFF00">reason</span> <strike>@exception</strike><span style="background: #FFFF00">codes</span> <strike>ISOException with</strike><span style="background: #FFFF00">specific to</span> the <strike>following</strike><span style="background: #FFFF00">underlying</span> <strike>reason</strike><span style="background: #FFFF00">security protocol may be
</span> <strike>code</strike><span style="background: #FFFF00">returned)</span>:<strike>
</strike><ul><span style="background: #FFFF00">

</span> <li><strike>ISO7816</strike><span style="background: #FFFF00">'6982' if this method is not
 supported by the implementation</span>.<strike>SW_SECURITY_STATUS_NOT_SATISFIED</strike><span style="background: #FFFF00">

</span> <li><span style="background: #FFFF00">'6985' </span>if <strike>a</strike><span style="background: #FFFF00">there is no</span> Secure Channel Session <span style="background: #FFFF00">currently open.

 <li>'6700' if the length of the data that shall
 be encrypted </span>is not <strike>open</strike><span style="background: #FFFF00">valid (e.g. underlying algorithm requires data to be
 block-aligned and input data are not)</span>.</li><strike>
</strike><span style="background: #FFFF00">

 </ul>

</span> @exception <strike>java.lang.</strike>SecurityException if <code>baBuffer</code> is not accessible <strike>in</strike><span style="background: #FFFF00">in
</span> the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context <strike>
 </strike>e.g. <code>baBuffer</code> is not a <em>global</em><span style="background: #FFFF00">
</span> array nor an array belonging to the caller context.<span style="background: #FFFF00">
 @exception NullPointerException if <code>baBuffer</code> is
 <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading user data or writing
 encrypted data would cause access of data outside array bounds.</span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.getSecurityLevel()"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.getSecurityLevel_changed()" class="hiddenlink">byte <b>getSecurityLevel()</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Gets</span> <strike>method returns, from the requester's standpoint, </strike>the <em>Current Security Level<strike> coded 
 as a bit-map according to Table 10 1 indicating whether entity authentication has occurred and
  what level of security is currently applicable to command and response messages processed 
 by the unwrap() and wrap() methods</strike></em>.<strike>
</strike> <strike>Notes:
</strike><span style="background: #FFFF00">

</span> <strike>Applets</strike><span style="background: #FFFF00">An Application</span> <strike>must</strike><span style="background: #FFFF00">shall</span> invoke this method to ensure that <strike>application specific security requirements
 have been</strike><span style="background: #FFFF00">its</span> <strike>previously met or will be</strike><span style="background: #FFFF00">own specific
 security requirements are</span> enforced by <strike>the Security</strike><span style="background: #FFFF00">this</span> <strike>Domain</strike><span style="background: #FFFF00">interface</span>.<strike>
</strike> <strike>More</strike><span style="background: #FFFF00">It</span> <strike>than one level of security may be active and these</strike><span style="background: #FFFF00">shall also take
 into account that the Current Security Level</span> may change during <strike>a</strike><span style="background: #FFFF00">the</span> Secure
 Channel<strike>,</strike> <span style="background: #FFFF00">Session (</span>e.g. <strike>an </strike>R_MAC <strike>session </strike>may be <strike>initiated</strike><span style="background: #FFFF00">enabled or disabled</span> during a C_<strike>MAC</strike><span style="background: #FFFF00">MAC
</span> session<span style="background: #FFFF00">)</span>.<p><span style="background: #FFFF00">

 Notes:<ul></span>
 <li><em>The Current Security Level<span style="background: #FFFF00">,</span> <strike>may be different at</strike><span style="background: #FFFF00">as returned by this</span> <strike>the</strike><span style="background: #FFFF00">method, may</span> <strike>same time</strike><span style="background: #FFFF00">be
 different</span> for an Application invoking <strike>
 </strike>the method and its <strike>associated</strike><span style="background: #FFFF00">associated
</span> Security Domain depending on the <strike>Secure</strike><span style="background: #FFFF00">underlying</span> <strike>Channel Protocol</strike><span style="background: #FFFF00">security protocol</span> and <strike>
 the</strike><span style="background: #FFFF00">the
</span> authenticated off-card entity's Application Provider ID (e.g. it may <strike>be</strike><span style="background: #FFFF00">be
</span> ANY_AUTHENTICATED <strike>
 </strike>for the application and AUTHENTICATED for its <strike>associated</strike><span style="background: #FFFF00">associated
</span> Security Domain<span style="background: #FFFF00">, and vice versa</span>).</em>
 </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @return The <strike>current</strike><span style="background: #FFFF00">Current</span> Security Level<span style="background: #FFFF00">, which is a combination of one or more
 the following constants:<ul>
 <li><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT>.NO_SECURITY_LEVEL</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#AUTHENTICATED"><TT>.AUTHENTICATED</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#ANY_AUTHENTICATED"><TT>.ANY_AUTHENTICATED</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#C_MAC"><TT>.C_MAC</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#C_DECRYPTION"><TT>.C_DECRYPTION</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#R_MAC"><TT>.R_MAC</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#R_ENCRYPTION"><TT>.R_ENCRYPTION</TT></A>
 </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.processSecurity(APDU)"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.processSecurity_changed(javacard.framework.APDU)" class="hiddenlink">short <b>processSecurity(APDU)</b></a><br><br><blockquote>Processes security related APDU commands<strike>.
 
 This</strike><span style="background: #FFFF00">,</span> <strike>method</strike><span style="background: #FFFF00">that</span> is<strike> used by an applet to process</strike><span style="background: #FFFF00">,</span> APDU commands <strike>that possibly</strike><span style="background: #FFFF00">relating
</span> <strike>relate </strike>to the <strike>security 
 mechanism used</strike><span style="background: #FFFF00">underlying</span> <strike>by the Security</strike><span style="background: #FFFF00">security</span> <strike>Domain</strike><span style="background: #FFFF00">protocol</span>.<p><span style="background: #FFFF00">

</span> As the intention is to allow an Application to <strike>be associated</strike><span style="background: #FFFF00">use</span> <strike>
 with a</strike><span style="background: #FFFF00">Secure</span> <strike>Security Domain</strike><span style="background: #FFFF00">Channel services
</span> without having any knowledge of the <strike>security mechanisms used by the</strike><span style="background: #FFFF00">underlying</span> <strike>Security 
</strike><span style="background: #FFFF00">security</span> <strike>Domain</strike><span style="background: #FFFF00">protocols</span>, <strike>the</strike><span style="background: #FFFF00">the
</span> <strike>applet</strike><span style="background: #FFFF00">Application may</span> <strike>assumes</strike><span style="background: #FFFF00">assume</span> that APDU commands that it does not recognize <strike>are</strike><span style="background: #FFFF00">are
</span> part of the security <strike>mechanism 
</strike><span style="background: #FFFF00">protocol</span> and will be recognized by <strike>the</strike><span style="background: #FFFF00">this</span> <strike>Security</strike><A HREF="1.6\javadoc\core\SecureChannel.html"><TT><span style="background: #FFFF00">SecureChannel</TT></A></span> <strike>Domain</strike><span style="background: #FFFF00">instance</span>. <strike>The</strike><span style="background: #FFFF00">Therefore, the</span> <strike>applet can</strike><span style="background: #FFFF00">Application may</span> either invoke <strike>this</strike><span style="background: #FFFF00">this
</span> method prior to determining <strike>
 </strike>if it recognizes the command or only <strike>invoke</strike><span style="background: #FFFF00">invoke
</span> this method for commands it does not recognize.<strike>
 The method sets the compulsory Session Security Level that is established at Secure Channel initiation and 
 which is required for the whole Secure Channel Session.</strike> <strike>On</strike><span style="background: #FFFF00">In</span> <strike>successful initialization of the Secure Channel Session</strike><span style="background: #FFFF00">turn</span>, <strike>
 the Current Security Level is set to the same value as the compulsory Session Security Level. 
</strike><span style="background: #FFFF00">this</span> <strike>The Current Security Level</strike><span style="background: #FFFF00">method will
 throw an</span> <strike>is</strike><A HREF="1.6\javadoc\core\ISOException.html"><TT><span style="background: #FFFF00">ISOException</TT></A></span> <strike>updated</strike><span style="background: #FFFF00">if</span> <strike>(R-MAC</strike><span style="background: #FFFF00">it</span> <strike>or</strike><span style="background: #FFFF00">does</span> not<strike>) on the successful</strike> <strike>processing of</strike><span style="background: #FFFF00">recognize</span> the <strike>
 BEGIN</strike><span style="background: #FFFF00">APDU</span> <strike>R-MAC</strike><span style="background: #FFFF00">command</span> <strike>SESSION / END</strike><span style="background: #FFFF00">as
 a security</span> <strike>R-MAC</strike><span style="background: #FFFF00">related</span> <strike>SESSION commands</strike><span style="background: #FFFF00">APDU command</span>.<strike>
 
 </strike><p><strike>Notes:
 Processing this method shall comply to the rules</strike><span style="background: #FFFF00">

</span> <strike>of the Secure Channel Protocol implemented by the Security Domain;
 The</strike><span style="background: #FFFF00">This</span> method is responsible for receiving the data field of <strike>commands</strike><span style="background: #FFFF00">APDU commands
</span> that are recognized<strike>;
 The applet</strike> <strike>is responsible for recognizing commands</strike><span style="background: #FFFF00">(i.e.</span> that <strike>the method refused</strike><span style="background: #FFFF00">belong</span> to <strike>process ('6E00'</strike><span style="background: #FFFF00">the</span> <strike>and</strike><span style="background: #FFFF00">security</span> <strike>'6D00'</strike><span style="background: #FFFF00">protocol</span>)<strike>;</strike>.<strike>
 The applet is responsible for outputting status  bytes</strike> <strike>returned</strike><span style="background: #FFFF00">When
</span> <strike>due to the </strike>processing <strike>of instructions recognized</strike><span style="background: #FFFF00">a</span> <strike>by</strike><span style="background: #FFFF00">command,</span> <strike>the</strike><span style="background: #FFFF00">this</span> method<strike>;
 If response data</strike> <strike>is</strike><span style="background: #FFFF00">shall</span> <strike>present,</strike><span style="background: #FFFF00">write</span> <strike>this</strike><span style="background: #FFFF00">response</span> data <strike>will be placed </strike>in <strike>the</strike><span style="background: #FFFF00">the
</span> <code>APDU</code> buffer at offset <A HREF="1.6\javadoc\core\ISO7816.html#OFFSET_CDATA"><TT>ISO7816.OFFSET_CDATA<strike>.
</strike></TT></A> <strike>The return</strike><span style="background: #FFFF00">or return
</span> <strike>code</strike><span style="background: #FFFF00">a status word</span> <strike>indicates</strike><span style="background: #FFFF00">under</span> the <strike>length</strike><span style="background: #FFFF00">form</span> <strike>and</strike><span style="background: #FFFF00">of</span> <strike>the</strike><span style="background: #FFFF00">an <A HREF="1.6\javadoc\core\ISOException.html"><TT>ISOException</TT></A>.</span> <strike>applet</strike><span style="background: #FFFF00">The</span> <strike>is</strike><span style="background: #FFFF00">Application is
</span> responsible for outputting <strike>this</strike><span style="background: #FFFF00">such</span> <span style="background: #FFFF00">response </span>data<strike>.
</strike> <strike>
</strike><span style="background: #FFFF00">and/or status</span> <span style="background: #FFFF00">word.</span><p><strike>
</strike><span style="background: #FFFF00">

</span> @param apdu the incoming <code>APDU</code> object.<strike>
</strike><span style="background: #FFFF00">

</span> @return the number of bytes to be output<span style="background: #FFFF00"> (i</span>.<strike>
</strike><span style="background: #FFFF00">e. length of</span> <span style="background: #FFFF00">response data).

 </span>@exception ISOException with <span style="background: #FFFF00">a reason code reflecting some error detected
 by the underlying security protocol, or with one of </span>the following <strike>reason</strike><span style="background: #FFFF00">reason
</span> codes <strike>(other</strike><span style="background: #FFFF00">if</span> <strike>security mechanism
 related</strike><span style="background: #FFFF00">the APDU command</span> <strike>status</strike><span style="background: #FFFF00">is not</span> <strike>words may be</strike><span style="background: #FFFF00">recognized and does</span> <strike>returned)</strike><span style="background: #FFFF00">not relate to the
 underlying security protocol</span>:<ul>
 <li><strike>ISO7816.SW_CLA_NOT_SUPPORTED</strike><span style="background: #FFFF00">'6E00' if</span> <span style="background: #FFFF00">the </span>class byte <span style="background: #FFFF00">of the command </span>is not recognized by <strike>the</strike><span style="background: #FFFF00">this</span> method.
 <li><strike>ISO7816.SW_INS_NOT_SUPPORTED</strike><span style="background: #FFFF00">'6D00' if the</span> instruction byte <span style="background: #FFFF00">of the command </span>is not recognized by <strike>the</strike><span style="background: #FFFF00">this</span> method.<span style="background: #FFFF00">
 </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.resetSecurity()"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.resetSecurity_changed()" class="hiddenlink">void <b>resetSecurity()</b></a><br><br><blockquote><strike>This method is used to reset all information relating to</strike><span style="background: #FFFF00">Terminates</span> the current Secure Channel Session.<strike>
</strike><span style="background: #FFFF00">

</span> <strike>It</strike><span style="background: #FFFF00">This method</span> resets both the compulsory <em>Session Security Level</em> and <strike>the</strike><span style="background: #FFFF00">the
</span> <em>Current Security Level</em> to <A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT><span style="background: #FFFF00">.</span>NO_SECURITY_LEVEL<strike>,
</strike></TT></A><span style="background: #FFFF00"> and resets all
</span> <strike>terminates</strike><span style="background: #FFFF00">information relating to</span> the current Secure Channel Session <strike>and</strike><span style="background: #FFFF00">(e.g.</span> <strike>erases</strike><span style="background: #FFFF00">internal
</span> <strike>all</strike><span style="background: #FFFF00">states,</span> session keys<span style="background: #FFFF00">)</span>.<strike>
 </strike><p><strike>Notes:
 It is strongly</strike><span style="background: #FFFF00">

</span> <strike>recommended that applets using the services of a Security Domain invoke 
 this method in the</strike><span style="background: #FFFF00">This method shall not fail and shall simply return if no Secure
 Channel Session has been</span> <strike>Applet</strike><span style="background: #FFFF00">initiated</span>.<strike>deselect()</strike><p><span style="background: #FFFF00">

</span> <strike>method;
</strike><span style="background: #FFFF00">Notes:<ul></span> <li><em><strike>The Security Domain will reset all information relating to the current Secure</strike><span style="background: #FFFF00">It</span> <strike>Channel,</strike><span style="background: #FFFF00">is</span> <strike>i.e.
</strike><span style="background: #FFFF00">recommended</span> <strike>all Secure Channel session</strike><span style="background: #FFFF00">that Applications using this</span> <strike>keys,</strike><span style="background: #FFFF00">interface
</span> <strike>state information and security level information will be</strike><span style="background: #FFFF00">invoke this method in the implementation of their
</span> <strike>erased</strike><code><span style="background: #FFFF00">Applet</span>.<strike>
 This</strike><span style="background: #FFFF00">deselect()</code></span> method<strike> shall not fail if no Secure Channel has been initiated</strike>.</em><strike>
</strike> </ul></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.unwrap(byte[], short, short)"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.unwrap_changed(byte[], short, short)" class="hiddenlink">short <b>unwrap(byte[], short, short)</b></a><br><br><blockquote><strike>This</strike><span style="background: #FFFF00">Verifies</span> <strike>method is used to process </strike>and <strike>verify</strike><span style="background: #FFFF00">removes</span> the <strike>secure</strike><span style="background: #FFFF00">security</span> <strike>messaging</strike><span style="background: #FFFF00">protection</span> of an incoming <strike>command</strike><span style="background: #FFFF00">APDU command
</span> according to <strike>the
 security level and</strike><span style="background: #FFFF00">the</span> <strike>Session</strike><em><span style="background: #FFFF00">Current</span> Security Level</em><span style="background: #FFFF00">.<p>

</span> <strike>of</strike><span style="background: #FFFF00">If</span> the <strike>current</strike><span style="background: #FFFF00">Current</span> <strike>Secure Channel</strike><span style="background: #FFFF00">Security Level</span> <strike>Session</strike><span style="background: #FFFF00">is <A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT></span>.<strike>
</strike><span style="background: #FFFF00">NO_SECURITY_LEVEL</TT></A></span> <strike>Notes:
</strike><span style="background: #FFFF00">and</span> <strike>Processing</strike><span style="background: #FFFF00">is
</span> <strike>this method shall comply to the rules</strike><span style="background: #FFFF00">different from the compulsory Session Security Level</span> <strike>of</strike><span style="background: #FFFF00">(i.e.</span> <strike>the</strike><span style="background: #FFFF00">a previous
</span> Secure Channel <strike>Protocol implemented</strike><span style="background: #FFFF00">Session</span> <strike>by</strike><span style="background: #FFFF00">was</span> <strike>the</strike><a href="#sc_abort"><span style="background: #FFFF00">aborted</a></span> <strike>Security</strike><span style="background: #FFFF00">but</span> <strike>Domain;
</strike><span style="background: #FFFF00">not</span> <strike>If</strike><span style="background: #FFFF00">fully
</span> <strike>NO_SECURITY_LEVEL</strike><span style="background: #FFFF00">terminated)</span>, <strike>AUTHENTICATED</strike><span style="background: #FFFF00">then</span> <strike>or</strike><span style="background: #FFFF00">this</span> <strike>ANY_AUTHENTICATED</strike><span style="background: #FFFF00">method</span> <strike>only is</strike><span style="background: #FFFF00">shall throw</span> <strike>indicated,</strike><span style="background: #FFFF00">an</span> <strike>
</strike><span style="background: #FFFF00">exception</span> <strike>when</strike><span style="background: #FFFF00">(see</span> <strike>complying</strike><span style="background: #FFFF00">below).<p>

</span> <strike>to</strike><span style="background: #FFFF00">If</span> the <strike>Secure</strike><span style="background: #FFFF00">class</span> <strike>Channel</strike><span style="background: #FFFF00">byte does not indicate secure messaging (according to</span> <strike>Protocol</strike><span style="background: #FFFF00">ISO/IEC
</span> <strike>rules</strike><span style="background: #FFFF00">7816-4)</span>, <span style="background: #FFFF00">then </span>this method <strike>will</strike><span style="background: #FFFF00">shall</span> not attempt <strike>any secure messaging</strike><span style="background: #FFFF00">to</span> <strike>processing on the incoming</strike><span style="background: #FFFF00">verify and remove any
</span> <strike>command,</strike><span style="background: #FFFF00">security</span> <strike>
</strike><span style="background: #FFFF00">protection:</span> the incoming command <strike>will</strike><span style="background: #FFFF00">shall</span> remain as is within <strike>the</strike><span style="background: #FFFF00">the
</span> <strike>incoming</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>APDU object</strike><span style="background: #FFFF00">byte array</span> and the returned length <strike>of the #unwrapped# data</strike><span style="background: #FFFF00">shall</span> <strike>is</strike><span style="background: #FFFF00">be</span> set <strike>to</strike><span style="background: #FFFF00">to
</span> the value <strike>
 </strike>of the <code>sLength</code> parameter<strike>, otherwise a security error is returned;
</strike><span style="background: #FFFF00">.<p>

</span> If the class byte <strike>does not indicate</strike><span style="background: #FFFF00">indicates</span> secure messaging (according to ISO/<strike>IEC</strike><span style="background: #FFFF00">IEC
</span> 7816-4), <span style="background: #FFFF00">then </span>this method <strike>will not</strike><span style="background: #FFFF00">shall</span> attempt <strike>any secure messaging 
 processing</strike><span style="background: #FFFF00">verifying and removing the
 security</span> <strike>on</strike><span style="background: #FFFF00">protection according to</span> the <strike>incoming command</strike><span style="background: #FFFF00">Current Security</span> <strike>and</strike><span style="background: #FFFF00">Level:<ul>

 <li>If</span> the <strike>incoming command will remain</strike><span style="background: #FFFF00">Current Security Level is</span> <strike>as</strike><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT><span style="background: #FFFF00">.NO_SECURITY_LEVEL</TT></A>,</span> <strike>is</strike><A HREF="1.6\javadoc\core\.html#AUTHENTICATED"><TT><span style="background: #FFFF00">.AUTHENTICATED</TT></A></span> <strike>within</strike><span style="background: #FFFF00">or</span> <strike>the</strike><A HREF="1.6\javadoc\core\.html#ANY_AUTHENTICATED"><TT><span style="background: #FFFF00">.ANY_AUTHENTICATED</TT></A>,</span> <strike>incoming APDU</strike><span style="background: #FFFF00">then this</span> <strike>object.</strike><span style="background: #FFFF00">method</span> <strike>
 When complying with the Secure</strike><span style="background: #FFFF00">shall not
 attempt to verify and</span> <strike>Channel</strike><span style="background: #FFFF00">remove any</span> <strike>Protocol rules</strike><span style="background: #FFFF00">security protection</span>, the <strike>returned length</strike><span style="background: #FFFF00">incoming</span> <strike>of the</strike><span style="background: #FFFF00">command
 will</span> <strike>#unwrapped#</strike><span style="background: #FFFF00">remain</span> <strike>data</strike><span style="background: #FFFF00">as</span> is <strike>set to</strike><span style="background: #FFFF00">within</span> the <strike>value</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>of the</strike><span style="background: #FFFF00">byte array</span> <strike>sLength</strike><span style="background: #FFFF00">(with</span> <strike>parameter
 otherwise a security</strike><span style="background: #FFFF00">class
 byte indicating secure</span> <strike>error</strike><span style="background: #FFFF00">messaging)</span> <strike>is</strike><span style="background: #FFFF00">and</span> <strike>returned;
</strike><span style="background: #FFFF00">the</span> <strike>The</strike><span style="background: #FFFF00">returned</span> <strike>applet is responsible for receiving</strike><span style="background: #FFFF00">length shall be set to
</span> the <strike>data field</strike><span style="background: #FFFF00">value</span> of the <strike>command;
</strike><code><span style="background: #FFFF00">sLength</code> parameter.

</span> <li><strike>Correct</strike><span style="background: #FFFF00">Incorrect</span> <strike>secure messaging processing</strike><span style="background: #FFFF00">verification and removal</span> of the <strike>unwrap()</strike><span style="background: #FFFF00">security</span> <strike>will</strike><span style="background: #FFFF00">protection shall
</span> result in <strike>the incoming</strike><span style="background: #FFFF00">an</span> <strike>command</strike><span style="background: #FFFF00">exception</span> being <strike>reformatted</strike><span style="background: #FFFF00">thrown</span> <strike>within</strike><span style="background: #FFFF00">(see below) and</span> the <strike>
 incoming APDU object with</strike><span style="background: #FFFF00">current Secure
 Channel Session being</span> <a href="#sc_abort"><span style="background: #FFFF00">aborted</a>: </span>all <strike>data</strike><span style="background: #FFFF00">information
</span> relating to the <strike>secure messaging removed. 
 A reformatted case 1 or</strike><span style="background: #FFFF00">Secure</span> <strike>case</strike><span style="background: #FFFF00">Channel</span> <strike>2</strike><span style="background: #FFFF00">Session,</span> <strike>command will include an Lc</strike><span style="background: #FFFF00">except the compulsory Session
 Security</span> <strike>byte</strike><span style="background: #FFFF00">Level,</span> <strike>set to</strike><span style="background: #FFFF00">shall be</span> <strike>zero;
</strike><span style="background: #FFFF00">reset.

</span> <li><strike>If R_MAC is indicated in the</strike><span style="background: #FFFF00">Correct</span> <strike>Current Security Level</strike><span style="background: #FFFF00">verification and removal</span> of the <strike>Secure Channel Session, once</strike><span style="background: #FFFF00">security</span> <strike>secure messaging processing of</strike><span style="background: #FFFF00">protection shall
 result in</span> the incoming <strike>
 </strike>command <strike>has successfully completed,</strike><span style="background: #FFFF00">being</span> <strike>R-MAC</strike><span style="background: #FFFF00">reformatted</span> <strike>computation on</strike><span style="background: #FFFF00">within the
</span> <strike>the</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>reformatted command</strike><span style="background: #FFFF00">byte array</span> (<strike>i</strike><span style="background: #FFFF00">a</span>.<strike>e</strike><span style="background: #FFFF00">k</span>.<strike> after all the data relating to secure messaging 
 has been removed) will be initiated</strike><span style="background: #FFFF00">a</span>. <strike>If no secure messaging processing was required for the incoming</strike><span style="background: #FFFF00">unwrapped</span> command<strike>, R-MAC computation will</strike><span style="background: #FFFF00">).</span> <strike>
 be initiated on the unmodified incoming</strike><span style="background: #FFFF00">A reformatted
 case 1 or case 2</span> command<strike>,</strike> <strike>appended with a</strike><span style="background: #FFFF00">shall include an</span> Lc byte <strike>of zero in event</strike><span style="background: #FFFF00">set</span> <strike>of</strike><span style="background: #FFFF00">to</span> <strike>a</strike><span style="background: #FFFF00">'00'.

</span> <strike>case</strike></ul><span style="background: #FFFF00">

</span> <strike>1</strike><span style="background: #FFFF00">Notes:<ul>

</span> <strike>or</strike><li><em><span style="background: #FFFF00">The</span> <strike>case 2</strike><span style="background: #FFFF00">Application is</span> <strike>command;
</strike><span style="background: #FFFF00">implicitly</span> <strike>Incorrect</strike><span style="background: #FFFF00">responsible</span> <strike>processing of</strike><span style="background: #FFFF00">for receiving</span> the <strike>unwrap method will</strike><span style="background: #FFFF00">data</span> <strike>result in</strike><span style="background: #FFFF00">field
 of</span> the <strike>information</strike><span style="background: #FFFF00">incomping</span> <strike>relating to</strike><span style="background: #FFFF00">APDU</span> <strike>the current Secure Channel being reset</strike><span style="background: #FFFF00">command prior to invoking this method</span>.</em><span style="background: #FFFF00">
 </span>
 <li><em><strike>This method does</strike><span style="background: #FFFF00">Depending</span> <strike>not fail if</strike><span style="background: #FFFF00">on</span> <strike>a Secure Channel</strike><span style="background: #FFFF00">the underlying security</span> <strike>Session</strike><span style="background: #FFFF00">protocol,</span> <strike>is</strike><span style="background: #FFFF00">if</span> <strike>not</strike><span style="background: #FFFF00">R_MAC</span> <strike>open</strike><span style="background: #FFFF00">is
</span> <strike>(that</strike><span style="background: #FFFF00">indicated</span> <strike>is,</strike><span style="background: #FFFF00">by</span> <strike>when Session</strike><span style="background: #FFFF00">the Current</span> Security Level<strike> = NO_SECURITY_LEVEL) or
 if the corresponding</strike><span style="background: #FFFF00">,</span> <strike>session</strike><span style="background: #FFFF00">R-MAC</span> <strike>keys are not</strike><span style="background: #FFFF00">computation may be
</span> <strike>available;
</strike><span style="background: #FFFF00">initiated</span> <strike>The</strike><span style="background: #FFFF00">on</span> <strike>method fails if the</strike><span style="background: #FFFF00">the reformatted command once</span> secure messaging <strike>of</strike><span style="background: #FFFF00">processing of
</span> the incoming command <strike>is not</strike><span style="background: #FFFF00">has</span> successfully <strike>verified or 
 does not match</strike><span style="background: #FFFF00">completed.</span> <strike>the Current Security Level</strike><span style="background: #FFFF00">If no secure messaging
</span> <strike>(as</strike><span style="background: #FFFF00">processing</span> <strike>defined either as</strike><span style="background: #FFFF00">was required for</span> the <strike>compulsory Session Security Level set at 
 initialization</strike><span style="background: #FFFF00">incoming</span> <strike>of</strike><span style="background: #FFFF00">command,</span> <strike>the</strike><span style="background: #FFFF00">R-MAC</span> <strike>Secure Channel Session or as</strike><span style="background: #FFFF00">computation would
 be initiated on</span> the <strike>Current Security Level</strike><span style="background: #FFFF00">unmodified</span> <strike>set</strike><span style="background: #FFFF00">incoming</span> <strike>by</strike><span style="background: #FFFF00">command,</span> <strike>the</strike><span style="background: #FFFF00">appended</span> <strike>setSecurityLevel()</strike><span style="background: #FFFF00">with</span> <strike>method).</strike><span style="background: #FFFF00">a</span> <strike>
 If the</strike><span style="background: #FFFF00">Lc byte
 of</span> <strike>method</strike><span style="background: #FFFF00">'00'</span> <strike>fails,</strike><span style="background: #FFFF00">in</span> the <strike>Current Security Level is reset to</strike><span style="background: #FFFF00">event</span> <strike>NO_SECURITY_LEVEL,</strike><span style="background: #FFFF00">of</span> <strike>but not the compulsory Session Security Level</strike><span style="background: #FFFF00">a case 1 or case 2 command</span>.</em><strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>the source of</strike><span style="background: #FFFF00">byte array containing</span> the <strike>data to</strike><span style="background: #FFFF00">incoming</span> <strike>be unwrapped</strike><span style="background: #FFFF00">APDU command</span>.
 @param sOffset <strike>the </strike>offset <strike>within baBuffer </strike>of the <strike>APDU data</strike><span style="background: #FFFF00">incoming</span> <strike>to unwrap</strike><span style="background: #FFFF00">APDU command</span>, i.e. <strike>the </strike>offset of <strike>the command header</strike><span style="background: #FFFF00">the
 class byte</span>.
 @param sLength <strike>the </strike>length of the <strike>APDU data</strike><span style="background: #FFFF00">incoming</span> <strike>to unwrap</strike><span style="background: #FFFF00">APDU command</span>, i.e <strike>the </strike>length of <strike>the</strike><span style="background: #FFFF00">the
 entire</span> <span style="background: #FFFF00">APDU </span>command <span style="background: #FFFF00">(</span>header <strike>and</strike><span style="background: #FFFF00">+</span> data field<span style="background: #FFFF00">)</span>.
 
 @return <strike>the </strike>length of the <span style="background: #FFFF00">reformatted (</span>unwrapped<span style="background: #FFFF00">)</span> <strike>data</strike><span style="background: #FFFF00">APDU command</span>, i.e <strike>the </strike>length <strike>of</strike><span style="background: #FFFF00">of
</span> the <span style="background: #FFFF00">entire APDU </span>command <span style="background: #FFFF00">(</span>header <strike>and</strike><span style="background: #FFFF00">+</span> data field<span style="background: #FFFF00">)</span>.
 
 @exception ISOException with <span style="background: #FFFF00">one of </span>the following reason <strike>code</strike><span style="background: #FFFF00">codes</span> (<strike>other</strike><span style="background: #FFFF00">other
</span> <strike>security</strike><span style="background: #FFFF00">reason codes specific to</span> <strike>mechanism related
 status words</strike><span style="background: #FFFF00">the underlying security protocol</span> may <strike>be</strike><span style="background: #FFFF00">be
</span> returned):<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>ISO7816</strike><span style="background: #FFFF00">'6985' if the Current Security Level is <A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT></span>.<strike>SW</strike><span style="background: #FFFF00">NO</span>_SECURITY_<strike>STATUS_NOT_SATISFIED</strike><span style="background: #FFFF00">LEVEL</TT></A></span> <strike>if secure messaging verification</strike><span style="background: #FFFF00">but
 the compulsory Session</span> <strike>failed.
</strike><span style="background: #FFFF00">Security</span> <strike>ISO7816</strike><span style="background: #FFFF00">Level is different from <A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT></span>.<strike>SW_CLA</strike><span style="background: #FFFF00">NO</span>_<strike>NOT</strike><span style="background: #FFFF00">SECURITY</span>_<strike>SUPPORTED class</strike><span style="background: #FFFF00">LEVEL</TT></A>,</span> <strike>byte</strike><span style="background: #FFFF00">that</span> is<span style="background: #FFFF00">, a previous Secure Channel</span> <span style="background: #FFFF00">Session was <a
 href="#sc_abort">aborted</a> but </span>not <strike>recognized</strike><span style="background: #FFFF00">fully</span> <strike>by</strike><span style="background: #FFFF00">terminated.

</span> <strike>the</strike><li><span style="background: #FFFF00">'6982' if this</span> method<span style="background: #FFFF00"> failed
 verifying or removing the security protection of the incoming APDU
 command</span>.<span style="background: #FFFF00">

 </span></ul><strike>
</strike><span style="background: #FFFF00">

</span> @exception <strike>java.lang.</strike>SecurityException if <code>baBuffer</code> is not accessible <strike>in</strike><span style="background: #FFFF00">in
</span> the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context <strike>
 </strike>e.g. <code>baBuffer</code> is not a <em>global</em> array <strike>nor</strike><span style="background: #FFFF00">nor
</span> an array belonging to the caller context.<span style="background: #FFFF00">
 @exception NullPointerException if <code>baBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading the incoming APDU
 command would cause access of data outside array bounds.</span></blockquote>
<A NAME="org.globalplatform.SecureChannel.dmethod.wrap(byte[], short, short)"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.wrap_changed(byte[], short, short)" class="hiddenlink">short <b>wrap(byte[], short, short)</b></a><br><br><blockquote><strike>This method applies secure messaging</strike><span style="background: #FFFF00">Computes and adds security protection</span> to <strike>the current</strike><span style="background: #FFFF00">an</span> outgoing <strike>response</strike><span style="background: #FFFF00">APDU response
</span> according to the <em><span style="background: #FFFF00">Current Security Level</em>.<p>

 If the </span>Current Security Level <span style="background: #FFFF00">is <A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT>.NO_SECURITY_LEVEL</TT></A> </span>and <strike>
</strike><span style="background: #FFFF00">is
 different from the compulsory</span> Session Security Level <strike>of</strike><span style="background: #FFFF00">(i.e.</span> <strike>the</strike><span style="background: #FFFF00">a previous
</span> Secure Channel Session<strike>.
</strike> <strike>Notes:
</strike><span style="background: #FFFF00">was</span> <strike>Processing</strike><a href="#sc_abort"><span style="background: #FFFF00">aborted</a></span> <strike>this method shall</strike><span style="background: #FFFF00">but not fully
</span> <strike>comply</strike><span style="background: #FFFF00">terminated),</span> <strike>to the rules of the Secure Channel</strike><span style="background: #FFFF00">then this method shall throw an exception</span> <strike>Protocol</strike><span style="background: #FFFF00">(see below).<p>

</span> <strike>implemented</strike><span style="background: #FFFF00">Otherwise,</span> <strike>by the Security</strike><span style="background: #FFFF00">this method shall</span> <strike>Domain;
</strike><span style="background: #FFFF00">attempt</span> <strike>This</strike><span style="background: #FFFF00">computing</span> <strike>method attempts secure messaging processing of</strike><span style="background: #FFFF00">and adding a security
 protection to</span> the <strike>current </strike>outgoing <strike>response</strike><span style="background: #FFFF00">message according</span> <strike>when</strike><span style="background: #FFFF00">to</span> the Current Security <strike>Level</strike><span style="background: #FFFF00">Level
</span> <strike>indicates
</strike><span style="background: #FFFF00">(e.g.</span> <A HREF="1.6\javadoc\core\.html#R_MAC"><TT><span style="background: #FFFF00">.</span>R_MAC</TT></A> and/or <A HREF="1.6\javadoc\core\.html#R_ENCRYPTION"><TT><span style="background: #FFFF00">.</span>R_ENCRYPTION<strike>;
</strike></TT></A><span style="background: #FFFF00">).</span> If the <strike>Current</strike><span style="background: #FFFF00">Current
</span> Security Level does not <strike>indicate R_MAC</strike><span style="background: #FFFF00">require</span> <strike>and/or</strike><span style="background: #FFFF00">any</span> <strike>R_ENCRYPTION,</strike><span style="background: #FFFF00">protection</span> <strike>when complying with</strike><span style="background: #FFFF00">for APDU responses</span> <strike>the</strike><span style="background: #FFFF00">(which
</span> <strike>
 Secure Channel Protocol</strike><span style="background: #FFFF00">includes the case where</span> <strike>rules,</strike><span style="background: #FFFF00">there</span> <strike>this method will do no processing</strike><span style="background: #FFFF00">is no Secure Channel Session currently
</span> <strike>and</strike><span style="background: #FFFF00">open),</span> the outgoing response message <strike>will</strike><span style="background: #FFFF00">shall</span> remain as is in the <strike>APDU object.</strike><span style="background: #FFFF00">within</span> <strike>
</strike><span style="background: #FFFF00">the
</span> <strike>The</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>returned length of</strike><span style="background: #FFFF00">byte array and</span> the <strike>#wrapped#</strike><span style="background: #FFFF00">returned</span> <strike>data</strike><span style="background: #FFFF00">length</span> <strike>is</strike><span style="background: #FFFF00">shall be</span> set to <strike>the</strike><span style="background: #FFFF00">a
</span> value of <strike>the </strike><code><span style="background: #FFFF00">(</span>sLength <strike>parameter minus</strike><span style="background: #FFFF00">-</span> 2<span style="background: #FFFF00">)</code>,</span> <strike>(</strike>indicating the status <strike> </strike>bytes are <strike>no 
</strike><span style="background: #FFFF00">no
</span> longer present at the end of the returned data<strike>);</strike><span style="background: #FFFF00">.<p></span>
 <span style="background: #FFFF00">
 Notes:<ul>

 </span><li><em>The <strike>applet</strike><span style="background: #FFFF00">Application</span> is responsible for appending the expected status <strike>bytes</strike><span style="background: #FFFF00">bytes
</span> at the end of the response data <span style="background: #FFFF00">prior to invoking this method </span>in order <strike>for</strike><span style="background: #FFFF00">for
</span> them to be <strike>
 </strike>protected by secure messaging<strike>;
</strike><span style="background: #FFFF00">.</span> The <strike>returned data does not include the </strike>status <strike> </strike>bytes<strike>;
 The method fails if the secure messaging of the incoming command is not successfully verified or does not match the 
 Current Security Level</strike> <strike>(as defined either as the compulsory Session Security Level set at initialization of the Secure Channel Session or
 as the Current</strike><span style="background: #FFFF00">shall</span> <strike>Security Level set</strike><span style="background: #FFFF00">be
 subsequently removed</span> by <strike>the setSecurityLevel() method). 
 If the method fails, the Current Security Level is reset to NO_SECURITY_LEVEL, but not the compulsory Session Security Level;
 This</strike><span style="background: #FFFF00">this</span> method<strike> does not fail if a Secure Channel Session is not open (that is, when Session Security Level = NO_SECURITY_LEVEL) or 
 if the corresponding session keys are not available</strike>.</em><strike>
</strike><span style="background: #FFFF00">

</span> </ul><strike>
 
</strike><span style="background: #FFFF00">

</span> @param baBuffer <strike>the source of the</strike><span style="background: #FFFF00">byte array containing response</span> data <strike>to</strike><span style="background: #FFFF00">(including</span> <strike>be</strike><span style="background: #FFFF00">the
</span> <strike>wrapped.</strike><span style="background: #FFFF00">expected status</span> <span style="background: #FFFF00">bytes).</span>
 @param sOffset <strike>the </strike>offset <strike>within baBuffer </strike>of <strike>the</strike><span style="background: #FFFF00">response</span> data<strike> to wrap</strike>.
 @param sLength <strike>the </strike>length of <strike>the</strike><span style="background: #FFFF00">response</span> data <strike>to wrap.
 Notes:
 The length Li of the Response Data Field is automatically calculated by the Security Domain and 
 prepended to</strike><span style="background: #FFFF00">(including</span> the <strike>Response Data Field for computation of</strike><span style="background: #FFFF00">expected</span> <strike>the</strike><span style="background: #FFFF00">status
</span> <strike>R-MAC</strike><span style="background: #FFFF00">bytes)</span>.<strike>
 </strike>

 @return <strike>the </strike>length of the <span style="background: #FFFF00">reformatted (</span>wrapped<span style="background: #FFFF00">)</span> <strike>data.
</strike><span style="background: #FFFF00">response</span> <strike>@exception</strike><span style="background: #FFFF00">data,</span> <strike>ISOException</strike><span style="background: #FFFF00">with</span> <strike>if</strike><span style="background: #FFFF00">security
</span> <strike>security mechanism related</strike><span style="background: #FFFF00">information added and</span> status <strike>words might be returned.
 @exception ArrayIndexOutOfBoundsException if wrapping produces data outside array</strike><span style="background: #FFFF00">bytes</span> <strike>bounds</strike><span style="background: #FFFF00">removed</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @exception <strike>java.lang.</strike>SecurityException if <code>baBuffer</code> is not accessible <strike>in</strike><span style="background: #FFFF00">in
</span> the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context <strike>
 </strike>e.g. <code>baBuffer</code> is not a <em>global</em><span style="background: #FFFF00">
</span> array nor an array belonging to the caller context.<span style="background: #FFFF00">
 @exception NullPointerException if <code>baBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if writing security information
 in <code>baBuffer</code> would cause access of data outside array bounds.</span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.ANY_AUTHENTICATED"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.ANY_AUTHENTICATED" class="hiddenlink">byte <b>ANY_AUTHENTICATED</b></a><br><br><blockquote>Entity Any Authentication has occurred (0x40).
 <p>Note:<ul>
 <strike>Authenticated</strike><li><em><span style="background: #FFFF00">The authenticated</span> entity is not the Application Provider of the Application.</em>
 <strike>The</strike><li><em><span style="background: #FFFF00">Entity Authentication and the</span> level of security that will be applied by the <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A>
 and <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> methods are not necessarily related. A Security Domain, by default, could
 verify the MAC on any command passed as a parameter in the <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method without
 entity authentication previously having occurred.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.AUTHENTICATED"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.AUTHENTICATED" class="hiddenlink">byte <b>AUTHENTICATED</b></a><br><br><blockquote>Entity Authentication has occurred <strike> </strike>as Application Provider (0x80).
 <p>Note:<ul>
 <li><em>Entity Authentication and the level of security that will be applied by the <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A>
 and <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> methods are not necessarily related. A Security Domain, by default, could
 verify the MAC on any command passed as a parameter in the <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method without
 entity authentication previously having occurred.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.C_DECRYPTION"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.C_DECRYPTION" class="hiddenlink">byte <b>C_DECRYPTION</b></a><br><br><blockquote>The <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method will decrypt incoming command data (0x02).
 <p>Note:<ul>
 <li><em>Command data decryption could be indicated along with entity authentication and one or more
 levels of security.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.C_MAC"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.C_MAC" class="hiddenlink">byte <b>C_MAC</b></a><br><br><blockquote>The <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method will verify the MAC on an incoming command (0x01).
 <p>Note:<ul>
 <li><em>MAC verification could be indicated along with entity authentication and one or more
 levels of security, e.g. a value of '03' indicates that while entity authentication has not
 occurred, the <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method will decrypt the command data of incoming commands
 and verify the MAC on incoming commands.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.NO_SECURITY_LEVEL"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.NO_SECURITY_LEVEL" class="hiddenlink">byte <b>NO_SECURITY_LEVEL</b></a><br><br><blockquote>Entity Authentication has not occurred (0x00).
 <p>Note:<ul>
 <li><em>Entity Authentication and the level of security that will be applied by the
 <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A> and <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> methods are not necessarily related. A
 Security Domain, by default, could verify the MAC on any command passed as a parameter in
 the <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method without entity authentication previously having occurred.</em>
 <li><em>The <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A> and <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> methods will not apply any cryptographic
 processing to command or response data.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.R_ENCRYPTION"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.R_ENCRYPTION" class="hiddenlink">byte <b>R_ENCRYPTION</b></a><br><br><blockquote>The <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A> method will encrypt the outgoing response data (0x20).
 <p>Note:<ul>
 <li><em>Response data encryption could be indicated along with entity authentication and one
 or more levels of security.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannel.field.R_MAC"></A><a href="org.globalplatform.SecureChannel.html" class="hiddenlink">Class <b>SecureChannel</b></a>, <a href="org.globalplatform.SecureChannel.html#org.globalplatform.SecureChannel.R_MAC" class="hiddenlink">byte <b>R_MAC</b></a><br><br><blockquote>The <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A> method will generate a MAC for the outgoing response data (0x10).
 <p>Note:<ul>
 <li><em>MAC generation could be indicated along with entity authentication and one or more
 levels of security, e.g. a value of '91' indicates that entity authentication has occurred,
 that the <A HREF="1.6\javadoc\core\.html#unwrap"><TT><span style="background: #FFFF00">.</span>unwrap</TT></A> method will verify the MAC on incoming commands and that the
 <A HREF="1.6\javadoc\core\.html#wrap"><TT><span style="background: #FFFF00">.</span>wrap</TT></A> method will generate a MAC on outgoing response data.</em><span style="background: #FFFF00"> </ul></span></blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.SecureChannelx!class"></A><a href="org.globalplatform.SecureChannelx.html" class="hiddenlink">Class <b>SecureChannelx</b></a><br><br><blockquote>This <strike>defines</strike><span style="background: #FFFF00">interface</span> <span style="background: #FFFF00">is </span>an <strike>interface which extends</strike><span style="background: #FFFF00">extension of the</span> <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/SecureChannel.html"><TT>SecureChannel</TT></A> <strike>Interface and includes a</strike><span style="background: #FFFF00">interface that
 defines one</span> supplementary method<strike>.</strike> <strike>See 
</strike><span style="background: #FFFF00">to update</span> <strike>SecureChannel</strike><span style="background: #FFFF00">the</span> <strike>interface</strike><em><span style="background: #FFFF00">Current</span> <strike>for</strike><span style="background: #FFFF00">Security</span> <strike>a</strike><span style="background: #FFFF00">Level</em>
</span> <strike>description of the underlying interface</strike><span style="background: #FFFF00">during a Secure Channel Session</span>.<p><span style="background: #FFFF00">

</span> <strike>Prior to using this</strike><span style="background: #FFFF00">An Application that wishes</span> <strike>interface,</strike><span style="background: #FFFF00">to</span> <strike>an Application</strike><span style="background: #FFFF00">use the</span> <strike>is
</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/SecureChannelx.html"><TT><span style="background: #FFFF00">SecureChannelx</TT></A></span> <strike>required to</strike><span style="background: #FFFF00">interface shall
</span> obtain a <strike>handle</strike><span style="background: #FFFF00">reference</span> to <strike>its</strike><span style="background: #FFFF00">a</span> <strike>associated</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/SecureChannel.html"><TT><span style="background: #FFFF00">SecureChannel</TT></A></span> <strike>Security</strike><span style="background: #FFFF00">instance</span> <strike>Domain's</strike><span style="background: #FFFF00">and</span> <strike>SecureChannelx</strike><span style="background: #FFFF00">try</span> <strike>interface object by invoking</strike><span style="background: #FFFF00">to cast it to
</span> the <strike>
</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/SecureChannelx.html"><TT><span style="background: #FFFF00">SecureChannelx</TT></A></span> <strike>GPSystem</strike><span style="background: #FFFF00">interface</span>.<strike>getSecureChannel() method and</strike> <strike>casting</strike><span style="background: #FFFF00">Whether</span> the <strike>returned</strike><span style="background: #FFFF00">objects</span> <strike>object to type</strike><span style="background: #FFFF00">returned by the
</span> <strike>SecureChannelx</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/GPSystem.html#getSecureChannel"><TT><span style="background: #FFFF00">GPSystem</span>.<strike>  
 The SecureChannelx</strike><span style="background: #FFFF00">getSecureChannel</TT></A></span> <strike>Interface shall be implemented</strike><span style="background: #FFFF00">method also implement the</span> <strike>by</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx/SecureChannelx.html"><TT><span style="background: #FFFF00">SecureChannelx</TT></A></span> <strike>a Security Domain</strike><span style="background: #FFFF00">interface is implementation</span> <strike>compliant</strike><span style="background: #FFFF00">dependent,</span> <strike>to</strike><span style="background: #FFFF00">however,</span> this <strike>version of</strike><span style="background: #FFFF00">may</span> <strike>the 
 specification and the corresponding object reference shall</strike><span style="background: #FFFF00">be
 expressed as a requirement in specific GlobalPlatform configuration
</span> <strike>be</strike><span style="background: #FFFF00">documents.

</span> <strike>exposed</strike><span style="background: #FFFF00">@since</span> <strike>through</strike><ul><span style="background: #FFFF00">
</span> <strike>the</strike><li><span style="background: #FFFF00">export</span> <strike>
</strike><span style="background: #FFFF00">file</span> <strike>GPSystem.getSecureChannel()</strike><span style="background: #FFFF00">version</span> <strike>method</strike><span style="background: #FFFF00">1</span>.<strike>
</strike><span style="background: #FFFF00">1:</span> <strike>@see</strike><span style="background: #FFFF00">initial</span> <strike>SecureChannel</strike><span style="background: #FFFF00">version.</span>
 <strike>@since </strike><li>export file version 1.<strike>1</strike><span style="background: #FFFF00">6: reviewed overall description of this interface.
 </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannelx.dmethod.setSecurityLevel(byte)"></A><a href="org.globalplatform.SecureChannelx.html" class="hiddenlink">Class <b>SecureChannelx</b></a>, <a href="org.globalplatform.SecureChannelx.html#org.globalplatform.SecureChannelx.setSecurityLevel_changed(byte)" class="hiddenlink">void <b>setSecurityLevel(byte)</b></a><br><br><blockquote><strike>
 This method updates</strike><span style="background: #FFFF00">Updates</span> the <em>Current Security Level<strike> for</strike></em><span style="background: #FFFF00">.

</span> <strike>all subsequent invocations of</strike><span style="background: #FFFF00">If this method is</span> <strike>wrap()</strike><span style="background: #FFFF00">not</span> <strike>and</strike><span style="background: #FFFF00">supported</span> <strike>unwrap()</strike><span style="background: #FFFF00">by</span> <strike>
</strike><span style="background: #FFFF00">the</span> <strike>methods,</strike><span style="background: #FFFF00">implementation</span> <strike>except when Secure Channel is</strike><span style="background: #FFFF00">or the underlying
 protocol does</span> not <strike>active or was aborted during</strike><span style="background: #FFFF00">define</span> <strike>the same Application</strike><span style="background: #FFFF00">any sensitive data</span> <strike>session.
</strike><span style="background: #FFFF00">encryption</span> <strike>Current</strike><span style="background: #FFFF00">mechanism,</span> <strike>Security Level is coded as a</strike><span style="background: #FFFF00">it shall
 do nothing and simply</span> <strike>bit-map</strike><span style="background: #FFFF00">throw</span> <strike>according to</strike><span style="background: #FFFF00">an exception</span> <strike>table</strike><span style="background: #FFFF00">(see</span> <strike>10-1</strike><span style="background: #FFFF00">below)</span>.<p><span style="background: #FFFF00">

</span> The <strike>current</strike><span style="background: #FFFF00">Current</span> Security Level cannot be set <strike>
 </strike>below the compulsory <strike>Session</strike><em><span style="background: #FFFF00">Session
</span> Security Level</em>, <strike>buty</strike><span style="background: #FFFF00">but</span> only equal or above. <strike>The Current Security Level</strike><span style="background: #FFFF00">It</span> may be <strike>
 </strike>increased <strike>or</strike><span style="background: #FFFF00">or
</span> decreased during a Secure Channel Session as long as it is at least <strike>equal</strike><span style="background: #FFFF00">equal
</span> to the compulsory <strike>Session
</strike><span style="background: #FFFF00">Session</span> Security Level.<strike>
 </strike><p><strike>Notes:
</strike><span style="background: #FFFF00">

</span> <strike>This</strike><span style="background: #FFFF00">If</span> <strike>method fails if a Secure</strike><span style="background: #FFFF00">the Current Security Level is</span> <strike>Channel</strike><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT><span style="background: #FFFF00">.NO_SECURITY_LEVEL</TT></A></span> <strike>Session is not</strike><span style="background: #FFFF00">or the
 cryptographic</span> <strike>open,</strike><span style="background: #FFFF00">keys</span> <strike>if</strike><span style="background: #FFFF00">required by</span> the <strike>corresponding session keys are not 
</strike><span style="background: #FFFF00">new Current Security Level are not
</span> available<span style="background: #FFFF00">,</span> <strike>or if</strike><span style="background: #FFFF00">then this</span> <strike>the</strike><span style="background: #FFFF00">method shall throw an exception (see below).<p>

 The new</span> Current Security Level <strike>is equal to</strike><span style="background: #FFFF00">shall apply for</span> <strike>NO_SECURITY_LEVEL</strike><span style="background: #FFFF00">all subsequent invocations
 of <A HREF="1.6\javadoc\core\SecureChannel.html#wrap"><TT>SecureChannel</span>.<strike>
</strike><span style="background: #FFFF00">wrap</TT></A></span> <span style="background: #FFFF00">and <A HREF="1.6\javadoc\core\SecureChannel.html#unwrap"><TT>SecureChannel.unwrap</TT></A> methods,</span>
 <span style="background: #FFFF00">except when there is no current Secure Channel Session.<p>

 </span>@param bSecurityLevel <strike>the</strike><span style="background: #FFFF00">The new</span> Current Security Level<span style="background: #FFFF00">,</span> <strike>to be</strike><span style="background: #FFFF00">which shall</span> <strike>set</strike><span style="background: #FFFF00">a
 combination of one or more the following constants:<ul>

 <li><A HREF="1.6\javadoc\core\.html#NO_SECURITY_LEVEL"><TT>.NO_SECURITY_LEVEL</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#AUTHENTICATED"><TT>.AUTHENTICATED</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#ANY_AUTHENTICATED"><TT>.ANY_AUTHENTICATED</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#C_MAC"><TT>.C_MAC</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#C_DECRYPTION"><TT>.C_DECRYPTION</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#R_MAC"><TT>.R_MAC</TT></A>
 <li><A HREF="1.6\javadoc\core\.html#R_ENCRYPTION"><TT></span>.<span style="background: #FFFF00">R_ENCRYPTION</TT></A></span>
 </ul><span style="background: #FFFF00">

 </span>@exception ISOException with <span style="background: #FFFF00">one of </span>the following reason codes (<strike>other</strike><span style="background: #FFFF00">other
</span> <strike>security</strike><span style="background: #FFFF00">reason codes specific to</span> <strike>mechanism
 related status words</strike><span style="background: #FFFF00">the underlying security protocol</span> may <strike>be</strike><span style="background: #FFFF00">be
</span> returned):<ul><strike>
</strike><span style="background: #FFFF00">

</span> <li><strike>ISO7816</strike><span style="background: #FFFF00">'6982' if this method is not supported by the implementation</span>.<strike>SW_CONDITION_NOT_SATISFIED</strike><span style="background: #FFFF00">

 <li>'6985' if there is no Secure Channel Session currently open or if the
 new Current Security Level does not comply with (i.e. goes below) the
 compulsory Session Security Level.

 </span></ul></blockquote>
<hr align="left" width="100%">
<A NAME="org.globalplatform.SecureChannelx2!class"></A><a href="org.globalplatform.SecureChannelx2.html" class="hiddenlink">Class <b>SecureChannelx2</b></a><br><br><blockquote>This <strike>defines an interface which extends</strike><span style="background: #FFFF00">interface is an extension of</span> the <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannel.html"><TT>SecureChannel</TT></A><span style="background: #FFFF00"> interface</span> <strike>Interface and overrides the</strike><span style="background: #FFFF00">that
 defines one supplementary</span> method <strike>processSecurity().
</strike><span style="background: #FFFF00">overriding</span> <strike>See</strike><span style="background: #FFFF00">the</span> <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannel.html#processSecurity"><TT>SecureChannel<strike> interface for a description</strike><span style="background: #FFFF00">.processSecurity</TT></A></span> <strike>of</strike><span style="background: #FFFF00">method.<p>

</span> <strike>the underlying</strike><span style="background: #FFFF00">An Application</span> <strike>interface.
</strike><span style="background: #FFFF00">that</span> <strike>Prior</strike><span style="background: #FFFF00">wishes</span> to <strike>using</strike><span style="background: #FFFF00">use</span> <strike>this</strike><span style="background: #FFFF00">the <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannelx2.html"><TT>SecureChannelx2</TT></A></span> interface<strike>,</strike> <strike>an Application is required</strike><span style="background: #FFFF00">shall
 obtain a reference</span> to <strike>obtain </strike>a <strike>handle</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannel.html"><TT><span style="background: #FFFF00">SecureChannel</TT></A></span> <strike>to its associated</strike><span style="background: #FFFF00">instance and try</span> <strike>
</strike><span style="background: #FFFF00">to cast</span> <strike>Security</strike><span style="background: #FFFF00">it</span> <strike>Domain's</strike><span style="background: #FFFF00">to
</span> <span style="background: #FFFF00">the <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannelx2.html"><TT></span>SecureChannelx2</TT></A> interface<span style="background: #FFFF00">.</span> <strike>object by invoking</strike><span style="background: #FFFF00">Whether the objects</span> <strike>the</strike><span style="background: #FFFF00">returned by the
</span> <A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/GPSystem.html#getSecureChannel"><TT>GPSystem.getSecureChannel<strike>()</strike></TT></A> method <strike>
 and</strike><span style="background: #FFFF00">also</span> <strike>casting</strike><span style="background: #FFFF00">implement</span> the <strike>returned object</strike><A HREF="1.6\javadoc\core\org/globalplatform/SecureChannelx2/SecureChannelx2.html"><TT><span style="background: #FFFF00">SecureChannelx2</TT></A></span> <strike>to type</strike><span style="background: #FFFF00">interface is</span> <strike>SecureChannelx2.
</strike><span style="background: #FFFF00">implementation</span> <strike>The</strike><span style="background: #FFFF00">dependent,</span> <strike>SecureChannelx2</strike><span style="background: #FFFF00">however,</span> <strike>Interface shall be implemented by</strike><span style="background: #FFFF00">this may be
 expressed as</span> a <strike>Security Domain</strike><span style="background: #FFFF00">requirement</span> <strike>compliant</strike><span style="background: #FFFF00">in</span> <strike>to this</strike><span style="background: #FFFF00">specific</span> <strike>version of</strike><span style="background: #FFFF00">GlobalPlatform configuration
</span> <strike>the</strike><span style="background: #FFFF00">documents.

</span> <strike>specification
</strike><span style="background: #FFFF00">@since</span> <strike>and</strike><ul><span style="background: #FFFF00">
</span> <strike>the</strike><li><span style="background: #FFFF00">export</span> <strike>corresponding object</strike><span style="background: #FFFF00">file version</span> <strike>reference</strike><span style="background: #FFFF00">1.4:</span> <strike>shall</strike><span style="background: #FFFF00">initial</span> <strike>be</strike><span style="background: #FFFF00">version.
</span> <strike>exposed</strike><li><span style="background: #FFFF00">export</span> <strike>through the GPSystem</strike><span style="background: #FFFF00">file version 1</span>.<strike>getSecureChannel() method
 @see</strike><span style="background: #FFFF00">6:</span> <strike>SecureChannel
</strike><span style="background: #FFFF00">reviewed</span> <strike>@since</strike><span style="background: #FFFF00">overall</span> <strike>export file version 1</strike><span style="background: #FFFF00">description of this interface</span>.<strike>4</strike><span style="background: #FFFF00">
 </ul></span></blockquote>
<A NAME="org.globalplatform.SecureChannelx2.dmethod.processSecurity(byte[], short, short, short)"></A><a href="org.globalplatform.SecureChannelx2.html" class="hiddenlink">Class <b>SecureChannelx2</b></a>, <a href="org.globalplatform.SecureChannelx2.html#org.globalplatform.SecureChannelx2.processSecurity_changed(byte[], short, short, short)" class="hiddenlink">short <b>processSecurity(byte[], short, short, short)</b></a><br><br><blockquote>Processes security related APDU commands<strike>.
 
 This</strike><span style="background: #FFFF00">,</span> <strike>method</strike><span style="background: #FFFF00">that</span> is<strike> used by an applet to process</strike><span style="background: #FFFF00">,</span> APDU commands <strike>that possibly relate</strike><span style="background: #FFFF00">relating
</span> to the <strike>security 
 mechanism used by the</strike><span style="background: #FFFF00">underlying</span> <strike>Security Domain</strike><span style="background: #FFFF00">security protocol</span>.<strike> As the intention is to allow an Application to be associated </strike><p>
 <strike>with a Security Domain without having any knowledge of the security mechanisms used by the Security </strike>
 <strike>Domain, the applet assumes that APDU commands that it does not recognize are part of the security mechanism 
</strike><span style="background: #FFFF00">This</span> <strike>and will</strike><span style="background: #FFFF00">method shall</span> be <strike>recognized</strike><span style="background: #FFFF00">used</span> <strike>by</strike><span style="background: #FFFF00">in</span> the <strike>Security Domain. The applet can either invoke this method prior to determining 
 if</strike><span style="background: #FFFF00">same</span> <strike>it recognizes</strike><span style="background: #FFFF00">way as</span> the <strike>command or only invoke this method for commands it does not recognize.
 The</strike><A HREF="1.6\javadoc\core\SecureChannel.html#processSecurity"><TT><span style="background: #FFFF00">SecureChannel.processSecurity</TT></A></span> method<strike> sets the compulsory Session Security</strike><span style="background: #FFFF00">,</span> <strike>Level</strike><span style="background: #FFFF00">except</span> that <strike>is established at Secure Channel initiation and 
 which is required for </strike>the <strike>whole Secure Channel</strike><span style="background: #FFFF00">incoming</span> <strike>Session. On successful</strike><span style="background: #FFFF00">APDU
</span> <strike>initialization of</strike><span style="background: #FFFF00">command</span> <strike>the Secure Channel Session</strike><span style="background: #FFFF00">shall be read from</span>, <strike>
</strike><span style="background: #FFFF00">and</span> <strike>the Current Security Level is set</strike><span style="background: #FFFF00">any response data shall be written</span> to <strike>the same value as the compulsory Session Security Level. 
 The Current Security Level is updated (R-MAC or not) on the successful processing of the 
 BEGIN R-MAC SESSION /</strike><span style="background: #FFFF00">the
</span> <strike>END R-MAC</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>SESSION commands</strike><span style="background: #FFFF00">byte array</span>.<strike>
 
 </strike><p><span style="background: #FFFF00">

 </span>Notes:<ul><strike>
 Processing this method shall comply to the rules of the Secure Channel Protocol implemented by the Security Domain;
</strike><span style="background: #FFFF00">

</span> <li><em>The applet is <span style="background: #FFFF00">implicitly </span>responsible for <strike>setting command header and</strike><span style="background: #FFFF00">receiving</span> the data <strike>field</strike><span style="background: #FFFF00">field
</span> of <strike>commands to process in </strike>the <strike>input buffer;
 The applet is responsible for recognizing commands that</strike><span style="background: #FFFF00">incomping</span> <strike>the method refused</strike><span style="background: #FFFF00">APDU command prior</span> to <strike>process ('6E00'</strike><span style="background: #FFFF00">invoking</span> <strike>and</strike><span style="background: #FFFF00">this</span> <strike>'6D00');</strike><span style="background: #FFFF00">method</span>.</em>
 <strike>The applet is responsible for</strike><span style="background: #FFFF00">
</span> <strike>outputting</strike></ul><span style="background: #FFFF00">
</span> <strike>status</strike><span style="background: #FFFF00">
</span> <span style="background: #FFFF00">@param</span> <strike>bytes returned due to</strike><span style="background: #FFFF00">baBuffer byte array containing</span> the <strike>processing of instructions</strike><span style="background: #FFFF00">incoming</span> <strike>recognized by the</strike><span style="background: #FFFF00">APDU</span> <strike>method;</strike><span style="background: #FFFF00">command.</span>
 <strike>If response data is present, this data will</strike><span style="background: #FFFF00">@param</span> <strike>be placed in</strike><span style="background: #FFFF00">sInOffset offset of</span> the <strike>baBuffer</strike><span style="background: #FFFF00">incoming APDU</span> <strike>buffer</strike><span style="background: #FFFF00">command,</span> <strike>at</strike><span style="background: #FFFF00">i.e.</span> offset <strike>specified by</strike><span style="background: #FFFF00">of the
</span> <strike>sOutOffset</strike><span style="background: #FFFF00">class byte</span>.
 <strike>The return code indicates</strike><span style="background: #FFFF00">@param</span> <strike>the</strike><span style="background: #FFFF00">sInLength</span> length <strike>and</strike><span style="background: #FFFF00">of</span> the <strike>applet is responsible for</strike><span style="background: #FFFF00">incoming</span> <strike>outputting</strike><span style="background: #FFFF00">APDU</span> <strike>this</strike><span style="background: #FFFF00">command,</span> <strike>data</strike><span style="background: #FFFF00">i</span>.<strike>
</strike><span style="background: #FFFF00">e</span> <strike>
</strike><span style="background: #FFFF00">length</span> <strike>
</strike><span style="background: #FFFF00">of</span> <strike>@param</strike><span style="background: #FFFF00">the
</span> <strike>baBuffer the source</strike><span style="background: #FFFF00">entire APDU command</span> <strike>and</strike><span style="background: #FFFF00">(header</span> <strike>response byte</strike><span style="background: #FFFF00">+ data</span> <strike>array</strike><span style="background: #FFFF00">field)</span>.<strike>  </strike>
 @param <strike>sInOffset</strike><span style="background: #FFFF00">sOutOffset</span> offset within <strike>the</strike><code><span style="background: #FFFF00">baBuffer</code></span> <strike>source byte array</strike><span style="background: #FFFF00">where response data
</span> <strike>to</strike><span style="background: #FFFF00">(if</span> <strike>start</strike><span style="background: #FFFF00">any)</span> <strike>the security processing</strike><span style="background: #FFFF00">shall be written</span>.<strike>
</strike><span style="background: #FFFF00">

</span> @<strike>param sInLength</strike><span style="background: #FFFF00">return</span> the number of bytes to <strike>process.
 @param</strike><span style="background: #FFFF00">be</span> <strike>sOutOffset</strike><span style="background: #FFFF00">output</span> <strike>offset</strike><span style="background: #FFFF00">(i.e.</span> <strike>within the</strike><span style="background: #FFFF00">length of</span> response <strike>byte</strike><span style="background: #FFFF00">data).

</span> <strike>array</strike><span style="background: #FFFF00">@exception</span> <strike>to start the</strike><span style="background: #FFFF00">ISOException with a</span> <strike>response.

</strike><span style="background: #FFFF00">reason</span> <strike>@return</strike><span style="background: #FFFF00">code</span> <strike>the number of bytes to be output
 
</strike><span style="background: #FFFF00">reflecting some error detected
 by the underlying security</span> <strike>@throws</strike><span style="background: #FFFF00">protocol,</span> <strike>ISOException</strike><span style="background: #FFFF00">or</span> with <span style="background: #FFFF00">one of </span>the following <strike>reason</strike><span style="background: #FFFF00">reason
</span> codes <strike>(other</strike><span style="background: #FFFF00">if</span> <strike>security mechanism
</strike><span style="background: #FFFF00">the APDU</span> <strike>related</strike><span style="background: #FFFF00">command is</span> <strike>status words may be</strike><span style="background: #FFFF00">not recognized and does</span> <strike>returned)</strike><span style="background: #FFFF00">not relate to the
 underlying security protocol</span>:<ul>
 <li><strike>ISO7816.SW_CLA_NOT_SUPPORTED</strike><span style="background: #FFFF00">'6E00' if the</span> class byte <span style="background: #FFFF00">of the command </span>is not <strike>recognized</strike><span style="background: #FFFF00">recognized
</span> by <strike>the</strike><span style="background: #FFFF00">this</span> method.
 <li><strike>ISO7816.SW_INS_NOT_SUPPORTED</strike><span style="background: #FFFF00">'6D00'</span> <span style="background: #FFFF00">if the </span>instruction byte <span style="background: #FFFF00">of the command </span>is <strike>not</strike><span style="background: #FFFF00">not
</span> recognized by <strike>the</strike><span style="background: #FFFF00">this</span> method.<span style="background: #FFFF00">  </span>
 </ul><span style="background: #FFFF00">

 </span>@exception <strike>java.lang.</strike>SecurityException<strike> </strike> if <code>baBuffer</code> is not accessible <strike>in</strike><span style="background: #FFFF00">in
</span> the caller<strike>#</strike><span style="background: #FFFF00">'</span>s context <strike>
 </strike>e.g. <code>baBuffer</code> is not a <em>global</em> array <strike>nor</strike><span style="background: #FFFF00">nor
</span> an array belonging to the caller context.<span style="background: #FFFF00">
 @exception NullPointerException if <code>baBuffer</code> is <code>null</code>.
 @exception ArrayIndexOutOfBoundsException if reading the incoming APDU
 command would cause access of data outside array bounds.</span></blockquote>

</BODY>
</HTML>
